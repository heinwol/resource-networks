Может, ничто никогда не случается
только раз, и, может, все случается не
один раз, а расходится, как круги по
воде, когда камешек падает в пруд:
круги движутся, расширяются; пруд
связан тонкой водяной пуповиной со
следующим прудом, который он, этот
первый пруд, питает и все время
питал, пусть даже у того первого
пруда иная температура воды, иной
молекулярный
состав,
иная
способность видеть, чувствовать,
вспоминать, отражать в ином ракурсе
бесконечное неизменное небо – все
равно водное эхо от падения камешка,
которого второй пруд даже и не видел,
бежит
по
его
поверхности
изначальными кругами, в том же
нерушимом ритме.
У. Фолкнер, «Авессалом, Авессалом!»

ВВЕДЕНИЕ
Модели распространения ресурсов в сетях с ограниченными
пропускными способностями существуют более 60 лет, начиная с
потоковой модели Форда-Фалкерсона [59]. Эту модель можно
назвать статической, поскольку в ней не рассматривается поведение
сети во времени; важно лишь, какой максимальный поток возможен
в данной сети, – другими словами, какой максимальный ресурс
можно передавать за единицу времени без задержек в
промежуточных узлах. В дальнейшем появились различные
динамические сетевые модели распространения: модификации
потоковых моделей, процессы рассеяния на графах, целочисленные
пороговые модели, такие как игра выстреливания фишек (chip-firing
game) и другие.
В настоящей книге излагается новая модель распространения
однородных ресурсов – ресурсная сеть – и исследуются ее
динамические свойства. Ресурсная сеть – это ориентированный
граф, ребра которого имеют положительные пропускные
способности. В вершинах размещается ресурс; каждая вершина
может хранить неограниченное количество ресурса. Сеть
функционирует в дискретном времени. Суммарное количество
3

ресурса W на протяжении всего времени функционирования сети не
изменяется. Распределение ресурса по вершинам в момент t
дискретного времени определяет состояние сети Q(t). В момент t
каждая вершина отдает ресурс другим вершинам по выходящим
ребрам по одному из двух правил: если ресурса в вершине vi не
меньше, чем суммарная пропускная способность ее выходящих
ребер, вершина отдает «все, что может», т.е. пропускные
способности ее выходящих ребер используются полностью; в
противном случае, вершина отдает весь ресурс, распределяя его
пропорционально пропускным способностям. На следующем такте
переданный ресурс входит в смежные вершины по входящим
ребрам, после чего процесс отдачи повторяется.
Важной особенностью ресурсных сетей является наличие
порогового значения Т суммарного ресурса: поведение сети при
«малом» (меньшем Т) и «большом» ресурсе оказывается
существенно различным.
План книги таков. В главе 1 дается краткий обзор
динамических графовых моделей и приводятся основные сведения
по теории матриц и цепей Маркова, активно используемые в книге.
В главе 2 вводятся основные понятия теории, которые
иллюстрируются на примере наиболее простого класса ресурсных
сетей: полных однородных сетей (сетей, граф которых – полный, а
все пропускные способности одинаковы). Предлагается матричная
классификация ресурсных сетей по двум основаниям: по топологии,
т.е. структуре графа сети, и по пропускным способностям. В
последующих главах исследуется поведение различных классов
ресурсных сетей. Общая схема исследования для всех классов
одинакова: доказывается существование (или отсутствие)
предельного состояния (при t → ) и предельного потока, решаются
задачи их вычисления при различных начальных состояниях и
значениях суммарного ресурса, демонстрируется различие в
поведении при малом и большом ресурсе. Однако методы решения
этих задач и конкретные результаты для разных классов сетей
существенно различны. Заключение содержит краткое резюме
основных результатов теории и сравнение ресурсных сетей с
другими динамическими сетевыми моделями.
Наши теоремы вначале были гипотезами, которые, в свою
очередь, возникли из множества вычислительных экспериментов.
Индуктивному характеру исследования соответствует индуктивный
стиль изложения: анализ примеров, как правило, предшествует
доказательствам теорем.
4

Для облегчения предварительного знакомства с содержанием
книги мы снабдили каждую главу анонсом ее содержания в начале и
кратким комментарием в конце главы. Резюме основных
результатов книги содержится в конце книги.
Исследования, составляющие содержание книги, проводились
в 2008–2016 гг., были поддержаны грантами РФФИ и опубликованы
в работах [25–37, 41–43, 97, 98].
Выражаем сердечную благодарность:
Р.П. Агаеву и П.Ю. Чеботареву за чрезвычайно полезное
обсуждение различных разделов теории и советы по смежным
вопросам;
Н.А. Коргину за дружескую и конструктивную критику наших
публикаций;
Н.А. Базенкову, Д.А. Губанову, С.Г. Куливцу, А.А. Кулиничу
за активное участие в многочисленных семинарах, где мы
докладывали наши результаты;
С.Н. Васильеву и Д.А. Новикову за доброжелательную
поддержку нашей работы на многих её этапах.

5

ГЛАВА 1. ОБЗОР ГРАФОВЫХ
ДИНАМИЧЕСКИХ МОДЕЛЕЙ,
в которой:
• Производится обзор графовых моделей и их классификация в
зависимости от применяемых подходов и решаемых задач.
• Рассматриваются потоковые задачи: классическая потоковая модель
Форда – Фалкерсона и ее модификации, как статические, так и
динамические, а также неклассические модели, среди которых задача о
поиске сбалансированного потока и ряд моделей на графах с
нестандартными достижимостями.
• Описываются процессы рассеяния на графах, и перечисляются
некоторые задачи, сводящиеся к этим моделям.
• Вводятся основные определения и приводятся некоторые результаты
из области цепей Маркова и теории матриц.
• Описывается пороговая модель chip-firing game и ее модификации.
• Описывается модель самоорганизующейся критичности «абелева куча
песка». Рассматривается ее интерпретация в терминах chip-firing game.

Большое количество задач из разных предметных областей
решается с помощью алгоритмической теории графов. К ним
относятся не только задачи, непосредственно связанные с потоками
в сетях, сетевым управлением и планированием, но и
комбинаторные и вероятностные задачи, имеющие графовую
интерпретацию. Классические сетевые задачи – это задачи
распределения дорожного трафика, управления транспортными
потоками, потоками данных, задачи распределения нагрузки в
компьютерных сетях, и ряд других, в которых сетевая модель имеет
в качестве прообраза реальную сеть. Сходные инструменты
применяются при решении задач, связанных с информационными
сетями: с появлением сетей мобильных операторов и социальных
сетей и блогов в Интернете выделился класс задач, связанных с
моделированием распространения мнений в социальных сетях,
установления взаимных влияний абонентов сетей телефонных
операторов, управлением связности ad hoc сетей (ad hoc сети –
децентрализованные беспроводные сети, не имеющие постоянной
структуры, где узлы соединяются «на лету») и др. Модели
достижения консенсуса в многоагентных системах также
основываются на графах коммуникаций, характеризующих степень
влияния агентов друг на друга при формировании мнений.
В
задачах,
моделирующих
материальные
или
информационные потоки, ребра графа соответствуют дорогам или
6

иным физическим каналам связи, и основное внимание уделяется
нахождению способов наилучшей передачи потока по этим каналам.
В других задачах внимание концентрируется на состояниях,
соответствующих вершинам графа, а ребра лишь задают переходы
между ними (возможно, с некоторой вероятностью). Примерами
могут служить различные комбинаторные и вероятностные задачи,
схемы алгоритмов, графы переходов автоматов и сетей Петри. Часть
таких задач адекватно описывается статическими моделями, однако
в большинстве случаев строятся динамические модели.
Отметим, что в настоящей работе под «динамикой»
понимается изменение состояний (потоков, ресурсов и др.) при
постоянной топологии. За рамками обзора остаются все модели, в
которых топология графа изменяется. К ним относятся модели роста
(см., например, [72]), в которых в граф добавляются новые
вершины; модели «случайной эволюции» [120], в которых при
постоянном количестве вершин происходит «перемонтаж» ребер, за
счет чего изменяются топологические характеристики графа;
модели структурного разрушения, в которых при определенных
условиях происходит удаление узлов вместе с их инцидентными
ребрами [39, 40].
Исходя из применяемых методов, графовые динамические
модели с постоянной топологией можно разбить на три больших
класса:
1) классические потоковые модели и их модификации;
2) случайные блуждания и рассеяние на графах;
3) целочисленные пороговые модели.
Настоящий обзор посвящен отдельным моделям из этих
классов. Некоторые из них малоизвестны, но, на взгляд авторов,
представляют большой интерес. Из первого класса подробно будут
рассмотрены задача поиска сбалансированного потока в сети и
потоковые модели на графах с нестандартной достижимостью.
Остальные направления, в полной мере ставшие классикой,
перечислены лишь конспективно. Для второго класса, которому
посвящено большое количество литературы (см., например, книгу
[78] и библиографический список к ней), будут приведены
некоторые задачи, моделируемые случайными блужданиями. Кроме
того, будет кратко изложен применяющийся при их исследованиях
математический аппарат, который активно используется в основной
части книги. Из моделей третьего класса будет описана «игра
выстреливания фишек» (chip-firimg-game) и некоторые ее
приложения. Структура главы соответствует приведенной
7

классификации. Ее первая часть посвящена потоковым моделям,
вторая – случайным блужданиям, третья – целочисленным
пороговым моделям.
Отметим, что графовая терминология в обзоре соответствует
терминологии оригинальных работ. Термины «дуги» и «ребра»
используются, в основном, в одном и том же смысле, за
исключением тех фрагментов, где это оговаривается отдельно.

1.1. Потоковые модели
1.1.1. Классические потоковые модели
К этому классу относятся различные варианты потоковых моделей,
начиная от классических задач о нахождении оптимального потока
[6, 59, 60], и заканчивая задачами исследования потоков на графах c
нестандартной достижимостью [9, 10, 16 – 24, 44, 50, 51, 57] (в
таких графах существуют ребра, обладающие разными свойствами,
и вследствие этого не все пути являются допустимыми). Сюда же
входит ряд комбинаторных задач, имеющих потоковую
интерпретацию. Основные направления развития этого класса задач
в большой степени обусловлены их приложениями в городском
планировании, транспорте, энергетике, коммуникациях и других
областях, в которых важны выборы маршрутов, оптимальных по
тому или иному критерию, или некоторой их совокупности. Задачи
комбинаторной оптимизации, решаемые с помощью потоковых
моделей, – это задачи о составлении расписаний, о максимальных
паросочетаниях (например, трудоустройстве), о паросочетаниях с
минимальным расстоянием и другие [46, 48, 54, 56].
Алгоритмы, используемые для решения таких задач, хорошо
изучены и описаны. К ним относятся поиск максимального потока
(алгоритм Форда – Фалкерсона и его модификации), поиск
допустимых и максимальных потоков с минимальной стоимостью
[92], составление динамических потоков, удовлетворяющих тем или
иным временным ограничениям и ряд других [56, 65].
Задача о максимальном потоке
Классическая модель была описана Фордом и Фалкерсоном в
[59]. Обзор потоковых алгоритмов был произведен в [6, 65]. Введем
основные определения. Пусть G(V, E) – конечный ориентированный
граф; V – множество вершин, V= n; E  V V – множество ребер,
e = (u, v); Е= m.
Hа ребрах определена числовая функция f(e) = f(u, v), u, v  V.
8

Дивергенцией функции f(e) в вершине v называется разность
сумм значений этой функции на входящих и исходящих ребрах.
div f(v) =  f (u, v) −  f (v, u ) .
( v ,u )

( u ,v )

Так как всякое входящее ребро является выходящим,
выполняется следующее соотношение:

 div

f (v) = 0.

vV

Статические потоки – s-t-поток (1-1-поток)
Классическая постановка Форда – Фалкерсона (s-t-поток)
формулируется следующим образом: в сети имеются один источник
и один сток. Нужно найти величину максимального потока из
источника в сток.
Пусть функция f(e) задает поток в сети. Выполняются
следующие условия на сеть и поток.
1. Выделены две вершины: s (источник) и t (сток). Остальные
вершины называются внутренними; для них div f(v) = 0.
2. На функцию f(е) наложены ограничения:
0  f(е)  с(е);
с(е) называется пропускной способностью ребра е.
Из п. 1 следует, что div f(t) = −div f(s).
Величина M(f) = div f(t) = −div f(s) называется мощностью
потока.
Если div f(t) = div f(s) = 0, то поток называется циркуляцией.
Для внутренней вершины vj из условия div f(vj) = 0 следует, что
n

n



i =1

f ij =

 f ji
i =1

Мощность потока – линейный функционал на множестве
потоков:
M(f + g) = M(f )+ M(g).

L

Элементарные потоки можно разделить на два класса – потоки
вдоль простых путей и потоки C вдоль простых циклов.
9

Справедлива следующая теорема.
Теорема о разложении потока. Положительный поток f можно
представить в виде суммы элементарных положительных потоков:
f=



L

+



C

.

Разрезом А = (X, Y) сети G называется разбиение множества
вершин на два класса, причем s  X, t  Y.
U+(A) – множество ребер, соединяющих вершины из
множества X с вершинами множества Y; U−(A) – множество ребер,
соединяющих вершины из множества Y с вершинами множества X.
c(A) =  c(e) – пропускная способность разреза.
eU +

div f(A) =

 div

f (v) – дивергенция потока f на разрезе А.

vX

Легко показать, что значение дивергенции на разрезе А
совпадает с мощностью потока M(f): div f(A) = M(f).
Тогда
M(f) = div f(A) =

+f (e) − −f (e)

eU

eU



+c(e)

= c(A),

eU

т.е. мощность потока не превосходит пропускной способности
любого разреза.
Для сети с источником s и стоком t максимальный поток
определяется в соответствии с теоремой Форда – Фалкерсона.
Теорема Форда – Фалкерсона.
1. Если для всех е  Е пропускные способности с(е) – целые
числа, то существует целочисленный максимальный поток (поток
максимальной мощности).
2. Мощность максимального потока равна пропускной
способности минимального разреза: M(f) = min с(А).
A

Алгоритм Форда – Фалкерсона позволяет находить
максимальный поток для любой целочисленной сети.
П р и м е р 1.1. Для сети с пятью вершинами минимальный
разрез представлен на рис. 1.1.

10

4

a

c

2
1

s

3
3

b

2

t


Рис. 1.1. Минимальный разрез

Пропускная
способность
минимального
разреза,
а
соответственно, и максимальный поток в этой сети равны трем.
В общем случае (при вещественных пропускных способностях
ребер) алгоритм Форда-Фалкерсона может не сойтись, причем даже
его сходимость не гарантирует получения в пределе максимального
потока.
Многополюсные и многопродуктовые потоки
Многополюсный поток. Пусть в сети имеется k источников
s1, …, sk и l стоков
t1, …, tl. Такой поток называется
многополюсным. Задача нахождения максимального потока в
многополюсной сети (k-l-задача) редуцируется к 1-1-задаче:
вводятся фиктивные вершины – единственный источник s и
единственный сток t.

11

s

s1

t1

s2

t2
Потоковая сеть

.
.
.
sk

t

.
.
.
tl

Рис. 1.2. Редукция k-l-задачи к 1-1-задаче

Пропускные способности фиктивных ребер удовлетворяют
следующим соотношениям:
c(s, si) =

 c( si , v j ) ,
j

c(ti, t) =

 c ( v j , ti ) .
j

Тогда дивергенция в промежуточных вершинах по-прежнему
равна нулю. Минимальный разрез 1-1-задачи совпадает с
минимальным разрезом k-l-задачи по построению.
Многопродуктовый поток. Пусть имеется множество
продуктов K = {1, ..., k}, k источников s1, …, sk, k стоков t1, …, tk (по
одному источнику и стоку для каждого продукта); задано k функций
fi на ребрах, причем fi задает поток i-го продукта из si в ti.
Формулировка задачи о максимальном многопродуктовом
потоке: найти поток максимальной суммарной мощности  M i
i

[95].
Поиск сбалансированного потока
Задача поиска сбалансированного потока рассматривается в
[14]. Потоковая модель задана ориентированным графом G = (V, E),
|V| = n. Пропускные способности дуг в модели не ограничены.
Каждой вершине i поставлено в соответствие два множества: Ii
и Oi. Ii – множество «входящих соседей» вершины i: Ii =
= {k: (k, i)  E}; Oi – множество «исходящих соседей» вершины i:
Oi = {k: (i, k)  E}, i  V.
12

В графе имеется множество стоковых вершин T – это вершины
без исходящих дуг: T = {i  V: Oi = }.
Нестоковым
вершинам
приписаны
некоторые
неотрицательные константы qi, называемые потенциалами.
Вершины с qi > 0 являются источниками сети.
Потоком в такой сети называются действительные числа xij,
заданные на множестве (i, j)  E. Каждая вершина в дискретном
времени распределяет пришедший и порожденный (при qi > 0)
поток во все исходящие дуги в заданной пропорции.
Начальный поток задается потенциалами вершин-источников.
Поток, пришедший в стоки, вычитается из суммарного потока.
В каждой нестоковой вершине на каждом такте происходит
перераспределение входящего в нее потока и ее потенциала в
исходящие дуги: заданы доли потока, направляемого в каждую из
исходящих дуг.
Поток называется сбалансированным, если для каждой
вершины выполняется закон сохранения – сумма входящего в нее
потока и собственного потенциала вершины равна величине
исходящего потока:
qi +  x pi =  xij , i  V \ T .
pI i

jOi

Процесс изменения потока не всегда приходит к
сбалансированному (равновесному) состоянию. Исследуются
условия стабилизации потока, скорость сходимости процесса,
ищется вектор сбалансированного потока.
Равновесное распределение ресурсов. Те же авторы в [15]
описывают другую сетевую модель, функционирующую в
дискретном времени, названную «системой». Модель задана
взвешенным графом G = (V, E), |V| = n. Вершинам графа приписаны
неотрицательные величины qi, названные ресурсами. На каждом
такте ресурс вершины распределяется между инцидентными
ребрами. Каждое ребро представлено парой дуг, ресурсы в дугах на
каждом такте времени называются их весами. Веса дуг (i, j) и (j, i)
могут быть различны.
Величины ресурсов в вершинах постоянны. Состояние сети –
это распределение ресурсов по дугам. Состояния меняются с
течением времени. Вес дуги (i, j) на шаге k обозначается через xijk .
Считается, что начальные веса xij0 известны и для них выполняется:
13

 xij0 = qi , i V ,

jVi

(

j Vi = {l V : (i, l )  E}.

Для каждой пары смежных вершин i, j задана функция
. Вершина i на каждом следующем шаге выбирает новые

cij xijk , x kji

)

веса xijk +1 так, чтобы минимизировать максимальное значение
функции cij, j  Vi.
Таким образом, решается задача оптимизации

(

)

max cij xijk +1 , x kji → min ;
jVi

{ xijk +1 }

 xijk +1 = qi ;

jVi

xijk +1 = 0, (i, j )  E .
При этом веса xijk считаются известными.
Для такой
модели найдены достаточные условия
существования предельных и равновесных состояний; для
некоторых частных случаев (функций cij специального вида)
приведены формулы их вычисления.
1.1.2. Потоки в сетях с нестандартной достижимостью
Понятие графа с нестандартной достижимостью было введено
Я.М. Ерусалимским и Е.О. Басанговой в [9, 10].
В графах с нестандартной достижимостью вводятся те или
иные ограничения на некоторое подмножество дуг, вследствие чего
не все пути в графе становятся допустимыми, или появляются пути,
придающие потоку некоторые дополнительные характеристики. Вид
ограничений определяет тип достижимости в графе. При такой
постановке классические графы можно рассматривать как частный
(тривиальный) случай графов с нестандартной достижимостью. Для
большинства
видов
достижимости
задача
нахождения
максимального потока оказывается NP-трудной [16].
Потоки в сетях с различными видами нестандартных
достижимостей были исследованы в [16–24, 44, 50, 51, 57].
14

Ориентированный граф в этих работах задается тройкой
G(X, U, f), где X ≠  – множество вершин, U – множество дуг;
функция f: U → X × X – отображение, называемое отображением
инцидентности.
1.1.2.1. Смешанная достижимость на орграфах
Ориентированные графы со смешанной достижимостью
исследуются в [10]. В орграфе G(X, U, f) множество ребер
разбивается на два непустых подмножества:
U = UR  UZ , UR ≠ , UZ ≠ ,
где UR – множество нейтральных дуг, UZ – множество
запрещенных дуг.
В графе со смешанной достижимостью по определению
допустимыми являются только смешанные пути. Путь длины n
называется смешанным, если и только если в нем за каждой
запрещенной дугой с номером, меньшим n, следует нейтральная
дуга. То есть запрещенные дуги не могут следовать
непосредственно друг за другом.

2
1

5
4

3

7
6

Рис. 1.3. Граф с нейтральными и запрещенными дугами

На рис. 1.3 из трех путей, ведущих из вершины 1 в вершину 7,
смешанными и, соответственно, допустимыми являются два пути из
трех: пути, проходящие через вершины 1-2-4-5-7 и 1-2-4-6-7. Путь
1-3-6-7, являясь геометрически кратчайшим, недопустим, поскольку
имеет две подряд запрещенные дуги.
В графах со смешанной достижимостью может нарушаться
свойство аддитивности (или транзитивности): «если существует
путь из вершины x в вершину y и из вершины y в вершину z, то
существует и путь из вершины x в вершину z, полученный склейкой
этих двух путей». Однако в графах со смешанной достижимостью,
15

если первый путь заканчивается, а второй начинается
запрещенными дугами, это свойство перестает выполняться: оба
пути являются смешанными, но их «сумма» таковой не является.
На рис. 1.3 пути, проходящие через вершины 1-3-6 и 6-7,
смешанные; путь 1-3-6-7, как уже было отмечено, – не смешанный.
Проверка наличия пути между двумя вершинами в таком
графе (как и в других графах с нестандартной достижимостью), а
также поиск кратчайшего пути между вершинами осуществляются с
помощью вспомогательного графа, названного разверткой.
Развертка графа со смешанной достижимостью. Пусть
G(X, U = UR  UZ, f) – граф со смешанной достижимостью.
Множество вершин развертки графа G представляет собой
множество X  X' , где X' – дубликат множества X: каждой вершине
x  X соответствует вершина x'  X'. Нейтральной дуге исходного
графа u  UR (f(u) = (x, y)) на графе развертки соответствует две
дуги, входящие в вершину y: одна из них начинается в вершине x,
другая – в x'. Если u  UZ , f(u) = (x, y), на графе развертки ей будет
соответствовать дуга, соединяющая вершины x и y'.
Если исходный граф взвешен, то вспомогательный граф также
будет взвешенным; веса его дуг полагаются равными весам
породивших их дуг исходного графа.
Для графа развертки G' справедливы следующие утверждения.
— Вершина y достижима из вершины x на графе
G(X, U = UR  UZ, f) тогда и только тогда, когда на развертке G'
существуют пути из вершины x во множество вершин {y, y'}.
— Длина кратчайшего пути из вершины x в вершину y на
графе со смешанной достижимостью G(X, U = UR  UZ, f) равна
длине кратчайшего пути из вершины x во множество вершин {y, y'}
на развертке G'. Этот кратчайший смешанный путь может быть
восстановлен по кратчайшему пути из вершины x во множество
вершин {y, y'} на развертке G' .
Кратчайший путь на графе G' может быть найден с помощью
алгоритма Дейкстры. Показано, что никакая модернизация
алгоритма Дейкстры без перехода к вспомогательному графу
невозможна.
1.1.2.2. Магнитая достижимость на орграфах
Ещё один вид нестандартной достижимости – магнитная
достижимость, которая сильно отличается от смешанной, поскольку
ограничения на множество допустимых путей на графе с магнитной
16

достижимостью носят не локальный, а глобальный характер.
Графы с накоплением неубывающей магнитности содержат
множество магнитных и немагнитных дуг [19, 22, 44, 57]. Приведем
ряд основных определений.
Пусть дан граф G(X, U, f), U = UH  UM , UH  UM = .
Множество UM называется множеством магнитных дуг, UH –
множеством немагнитных дуг. Пусть µ – путь, состоящий из n дуг.
С каждым отрезком [i; j]N (1 ≤ i < j ≤ n) пути µ связана числовая
характеристика λµ(i, j), равная количеству магнитных дуг этого
отрезка.
Каждая дуга считается столько раз, сколько раз она
встречается в пути. Характеристика λµ(i, j) называется величиной
накопленной неубывающей магнитности отрезка [i; j]N пути µ.
Путь µ называется магнитно-накопительным путем порядка
k (≥ 1) длины n с неубывающей магнитностью на графе G, если
выполняется следующее условие. Если к i-му шагу от своего начала
путь µ накопил магнитность λµ(i) ≥ k и среди дуг, выходящих из
концевой вершины i-й дуги, есть хотя бы одна магнитная дуга, то
(i + 1)-я дуга этого пути обязательно является магнитной.
Граф G(X, U, f), где U = UH  UM , на котором
рассматриваются только магнитно-накопительные пути порядка k,
называется графом с накоплением неубывающей магнитности
порядка k.
Для таких графов также строятся вспомогательные графы
развертки. В них в отличие от разверток графов со смешанной
достижимостью каждой вершине исходного графа соответствует
(k + 1) вершин графа развертки x0, x1, ..., xk. При этом правила
построения различаются для немагнитных дуг, берущих начало в
вершинах, из которых не выходит магнитных дуг; для немагнитных
дуг, выходящих из вершин, имеющих выходящие магнитные дуги;
для собственно магнитных дуг.
Доказаны следующие теоремы [22].
— Любому пути µ' из вершины x0 во множество вершин
{y0, ..., yk} на вспомогательном графе G' соответствует магнитнонакопительный путь µ из вершины x в вершину y на исходном графе
G. Справедливо и обратное утверждение: для того, чтобы вершина
y была магнитно-достижима при условии неубывающей
магнитности из вершины x на графе G, необходимо и достаточно,
чтобы на графе G' была достижима из вершины x0 хотя бы одна из
вершин множества Vy = {y0, ..., yk}.
17

— Кратчайшему пути на развёртке G' из вершины x0 в одну из
вершин множества Vy = {y0, ..., yk} соответствует кратчайший
магнитно-накопительный путь на графе G.
Из этих теорем следует, что для нахождения кратчайшего пути
на графе с накоплением неубывающей магнитности можно
применять обычные алгоритмы нахождения кратчайшего пути на
его развёртке.
В [22] описаны также и другие виды графов с магнитной
достижимостью: графы с накоплением-исчезновением магнитности,
графы с возрастанием-убыванием магнитности, графы с условием
биполярной магнитности.
1.1.2.3. Барьерная достижимость на орграфах
Барьерная достижимость, так же, как и магнитная,
определяется на отрезках пути, т.е. является нелокальной
характеристикой.
Графы с барьерной достижимостью G(X, U, f) содержат три
попарно не пересекающихся типа дуг: U = U0  U↑  UB, где U0 –
множество нейтральных дуг, U↑ – множество увеличивающих дуг и
UB – множество дуг барьерного перехода (барьерных дуг) [50, 51].
В таких графах переход по барьерной дуге возможен только в том
случае, если потоком была накоплена энергия не ниже высоты
барьерной достижимости h. Энергия накапливается при переходе
через увеличивающие дуги (начальная энергия равна нулю).
На рис. 1.4 представлен граф с барьерной достижимостью.
Ясно, что при h > 0 переход по барьерной дуге (3, 4) сразу
невозможен. То есть пути 1 → 2 → 3 → 4 не существует. Поток
должен пройти по циклу 2 → 3 → 6 → 5 → 2 h раз с тем, чтобы
столько же раз пройти по увеличивающей дуге (6, 5), и только после
этого он сможет преодолеть барьерную дугу (3, 4).
Так, если h = 1, то допустимым будет барьерный путь высоты
единица: 1 → 2 → 3 → 6 → 5 → 2 → 3 → 4.

5

1
18

2

+
6

3

b

4

Рис. 1.4. Граф с дугой барьерного перехода (3, 4)
и увеличивающей дугой (6, 5)

На графах с барьерной достижимостью для нахождения
кратчайших путей нельзя напрямую применять алгоритм Дейкстры.
Для исследования графов с барьерной достижимостью также
строится вспомогательный граф развертка G'.
1.1.2.4. Другие виды нестандартной достижимости на
графах
В графах с вентильной достижимостью [21] множество дуг
разбивается на m классов с номерами от 0 до m – 1, где дуги,
принадлежащие нулевому классу, являются нейтральными, а дуги,
принадлежащие классу i, называются вентильными уровня i.
Вентильным путем в таком графе называется путь, в котором дуга
из класса k не может быть пройдена раньше, чем дуга из класса k –
1.
Графы с монотонной достижимостью также содержат m
непересекающихся классов дуг. Путь в таком графе называется
монотонным, если номера классов дуг в нем образуют
неубывающую последовательность, т.е., если пройдена дуга,
принадлежащая классу l, то далее в пути не должны встречаться
дуги из классов 1, 2, … l – 1.
Кроме описанных, рассмотрены частично ориентированные
графы [9, 10], графы с биполярной достижимостью [51], с
ограниченной магнитной достижимостью [44]. В графах с
различными видами достижимости изучаются гомогенные и
многопродуктовые потоки [18, 50].
Для графов с нестандартной достижимостью обобщается
понятие случайного блуждания [19, 21]. Случайное блуждание, как
и в классическом случае, задается переходными вероятностями на
дугах, однако переход из вершины в вершину возможен только по
путям, являющимся допустимыми в графе с данным типом
достижимости. Такое блуждание не является марковским
процессом, однако можно построить соответствующую развертку
графа, для которой оно будет описываться однородной цепью
Маркова.
В
работах
Я.М. Ерусалимского
и
Н.Н. Водолазова
рассмотрены задачи о всплеске динамического потока, когда его
величина в какой-то момент времени превышает величину
максимального стационарного потока [23, 24].
19

1.1.3. Задачи, сводящиеся к статическим потоковым
моделям
Задача о назначениях. Эта задача, являясь комбинаторной,
решается с помощью потоковых алгоритмов. Пусть для выполнения

t1
s1
t2
s

s2
.
.
.

sk

t3

t

.
.
.

tl
l видов t1, …, tl имеется k работников s1, …, sk. Каждый работник
может выполнять несколько работ, но назначить его можно только
на одну. Задача решается редукцией к потоковой 1-1-задаче: ребрам
(si, tj) присваиваются пропускные способности с(si, tj) = 1. Строится
двудольный граф, как показано на рис. 1.5, и, как и в
многополюсной задаче, вводятся фиктивные источник и сток.
Рис. 1.5. Представление задачи о назначениях

Распределение товаров. Эта задача состоит в распределении
поставок товаров с заводов в оптовые базы, предназначенные для
временного хранения товаров, а затем в розничные торговые точки.
Каналы распределения обладают заданными пропускными
способностями и различной стоимостью доставки. Цель состоит в
удовлетворении спроса на товар в любой точке розничной торговли,
причем, выбор маршрута должен осуществляться с учетом
минимизации стоимости доставки.
Обмен данными. В компьютерной сети есть множество
серверов, передающих данные по каналам связи с разной скоростью
передачи. Серверы обмениваются сообщениями. Задача состоит в
нахождении оптимальной скорости передачи данных; если каждому
каналу приписана некоторая стоимость передачи, – нужно
произвести поиск варианта передачи с заданной скоростью, при
условии минимизации затрат.
20

Надежность сети. Коммуникационная сеть моделируется как
некоторое множество проводов, соединяющих устройства через
коммутаторы так, что существует возможность установить линию
связи, соединяющую любые два устройства. Требуется найти
максимальное число магистральных линий, которые можно
отключить без нарушения связи между любой парой коммутаторов.
Отсечение линий снабжения. Ведя военные действия,
некоторая страна осуществляет материальное снабжение войск
через систему взаимосвязанных дорог. Цель противника состоит в
том, чтобы прервать снабжение, нанося по дорогам бомбовые
удары. При этом предполагается, что число бомб пропорционально
ширине дороги. Задача состоит в нахождении минимального числа
бомб, необходимого, чтобы лишить войска снабжения.
1.1.4. Динамические задачи. Потоки во времени
(flow over time)
Для каждого ребра е графа G(V, E) кроме пропускной способности
c(e), заданы время передачи (е) и ценовой коэффициент a(e)
(затраты на единицу потока).
В рамках этой модели решаются следующие задачи.
Максимальные потоки во времени: передать от s к t
максимальный поток за время Т.
Быстрейшие потоки: передать от s к t заданный объем потока
за минимально возможное время.
Потоки с ранним прибытием: построить s-t-поток
максимальной мощности, прибывающий в сток раньше момента 
для всех   [0, T).
Потоки с поздним отправлением: построить s-t-поток
максимальной мощности, выходящий из источника позже момента 
для всех   [0, T).
Потоки с ценами (такие задачи являются NP-трудными):
− найти поток минимальной стоимости в данном интервале
времени:
− найти быстрейший поток, не превосходящий заданной
стоимости.
Быстрейшие многопродуктовые потоки (также NP-трудные
задачи). Многопродуктовый поток f во времени с горизонтом
времени Т задается набором функций fe,i: [0, T) → ℝ+, где fe,i()
определяет долю потока (на единицу времени) продукта i,
21

входящего в ребро е в момент . Поток, вошедший в ребро е в
момент , выходит из е в момент  + (е). Времена передачи
зафиксированы. Для выполнения горизонта Т требуется, чтобы fe,i()
= 0 для   [Т – (е), T).
Все эти классы динамических задач можно разделить еще по
одному критерию: в одних моделях промежуточные вершины могут
только передавать поток (дивергенция в каждый момент времени
равна нулю), в других эти вершины способны временно накапливать
поток, и затем отдавать.
В модели с хранением потока в промежуточных вершинах к
моменту Т все вершины должны быть опустошены, и весь поток
должен оказаться в стоке.

1.2. Случайные блуждания и рассеяние на графах
Большинство потоковых моделей и алгоритмов отличает одна
общая особенность. Их целью является выявление ребер,
образующих пути, обладающие теми или иными свойствами
(максимизирующими поток, минимизирующими затраты и/или
время и т.д.). То есть ищутся в каком-то смысле «хорошие» пути, а
все остальные не учитываются. Модели, представленные в
настоящем разделе, используют принципиально иной подход: в
отличие от поиска выделенных путей в них рассматриваются все
возможные пути между вершинами в связном графе. Такая
формулировка задач теории графов может быть названа
«интегральной по путям» [78].
В этом разделе мы рассмотрим две модели и их приложения.
Случайное блуждание материальной точки на графе – марковский
процесс, в котором в каждом такте дискретного времени точка из
вершины, в которой она находится, может перейти в любую
смежную вершину с заданной вероятностью. Под рассеянием
(диффузией) на графе принято понимать процесс распространения
некоторого ресурса (материального или информационного) по
некоторому детерминированному или вероятностному закону.
В дальнейшем нас будет интересовать рассеяние с законом
сохранения, при котором общее количество распространяющегося
ресурса не изменяется. Его мы рассмотрим в разделе 1.2.3.
1.2.1. Области применения моделей случайного
блуждания и рассеяния на графах
Рассеяние на графах используется в алгоритмах построения
22

выборок, при решении комбинаторных задач о перестановках, при
исследовании многопродуктовых потоков и маршрутизации в СБИС
[101]. С его помощью моделируются балансирование нагрузки в
распределенных сетях, процессы формирования мнений в
социальных сетях, активность в сетях мобильных операторов, и ряд
других стохастических и детерминированных процессов.
Балансирование нагрузки в распределенных сетях тесно
связано с рассматриваемыми процессами на графах. В этой модели
каждая вершина (обычно неориентированного) графа соответствует
процессору, и каждый процессор i имеет определенное количество
рабочей нагрузки wi. Процессоры хотят передать нагрузку другим
процессорам по ребрам, с тем, чтобы их нагрузка приблизительно
выровнялась. По духу это близко случайному блужданию на
регулярном графе, где «вероятность» передается по ребрам и, в
конечном счете, выравнивается [64].
Модели процессов в сетях мобильных операторов,
позволяющие предсказывать динамику оттока клиентов из данной
сети, также моделируются с помощью рассеяния на графе [84].
Вершинами этого графа являются клиенты сети, дуги взвешены –
чем сильнее связь между клиентами, определяемая длительностью
обоюдных телефонных разговоров, тем больше вес дуги. Величина,
накапливаемая в вершине и передающаяся соседям, выражает
решимость клиента покинуть данную сеть. При достижении ею
определенного значения клиент покидает сеть, что может повлечь за
собой лавинообразный уход связанных с ним клиентов.
Моделирование таких процессов позволяет прогнозировать
сценарии развития мобильной сети и вовремя купировать
распространение нежелательных процессов.
При анализе распространения мнений в социальных сетях [12,
13, 49] граф представляет собой модель взаимодействия
пользователей некоторой социальной сети. Граф ориентирован;
вдоль дуг распространяются те или иные информационные
факторы, которые могут формировать коллективное мнение. Все
вершины в сети можно оценить по ряду параметров, каждый из
которых
соответствует
некоторому
виду
значимости:
влиятельности, цитируемости, активности. Здесь рассчитываются
такие характеристики, как различные виды центральности вершин, а
также вес PageRank [79], который, в свою очередь, также является
модификацией процесса случайного блуждания на графе.
Исследуются и моделируются динамические процессы в сетях,
параметры которых (степенной закон распределения степеней
23

(безмасштабность), наличие хабов, короткая средняя длина пути и
др.) соответствуют реальным социальным сетям. Многие
информационные процессы в них описываются моделями
распространения эпидемий в безмасштабных сетях [119].
Обобщенные модели рассеяния, в том числе переменного
порядка, применяются в области защиты информации, в частности,
для
обнаружения
аномального
поведения
пользователей
компьютерных систем [45, 121].
Дискретные модели координации действий [113] в
многоагентных системах и достижения консенсуса (модель Де
Гроота и ее обобщения) описываются, соответственно,
однородными и неоднородными цепями Маркова [4, 5].
1.2.2. Конечные цепи Маркова и их классификация
Пусть S1, S2, …, Sn – все возможные состояния некоторой системы,
функционирующей в дискретном времени t. В каждый момент t
система может находиться в одном из состояний. Вероятности
перехода из одного состояния в другое задаются стохастической
матрицей Р, где pij – вероятность перехода из состояния Si в Sj. Такая
система называется цепью Маркова [38, 53, 108, 109]. Если pij не
зависят от t, цепь Маркова называется однородной. Любая
стохастическая матрица Р с вектором начальных вероятностей
0 = 1(0) ,  2(0) ,...,  n(0) задаёт однородную цепь Маркова.
Для однородной цепи Маркова с начальным распределением
0 и переходной матрицей Р выполняется: k = 0Pk, где k –
распределение вероятностей в момент k.
Рассмотрим последовательность неотрицательных матриц Р,
Р2, Р3,…, где Р – стохастическая матрица. Если существует предел
степеней Р: Р = lim ( P) k , то величины pij называются

(

)

k →

предельными переходными вероятностями.
Матрица P называется разложимой, если существует такая
перестановочная матрица П, что

Т P  =

P11 O
,
P21 P22

где P11 и P22 — квадратные матрицы порядка меньше n [11]. В
противном случае матрица P называется неразложимой.
24

По теореме Перрона – Фробениуса [11, 48, 99] любая
неразложимая матрица P  0 всегда имеет положительное
собственное число , которое является простым корнем
характеристического многочлена. Модули всех остальных
собственных чисел не превосходят . Этому числу соответствует
единственный
собственный
вектор
с
положительными
компонентами.
Если неразложимая матрица P  0 имеет h собственных чисел
0 = |1| = … = |h-1| = , то матрица называется примитивной при
h = 1, и импримитивной при h > 1 [11].
Введем классификацию цепей Маркова, следуя терминологии,
введенной в [38]. Состояния цепи Маркова можно разбить на классы
эквивалентности. Каждый класс эквивалентности содержит все
состояния, достижимые друг из друга. При этом между классами
имеется отношение частичного порядка, которое указывает
возможные направления перехода.
Те классы эквивалентности, из которых нельзя перейти в
другие, называются эргодическими множествами. Все другие
состояния образуют невозвратное множество и называются
невозвратными состояниями. Если эргодическое множество
состоит лишь из одного состояния, то это состояние таково, что,
попав в него, уже нельзя из него выйти. Такое состояние называется
поглощающим.
Цепи без невозвратных множеств
Цепь Маркова называется эргодической, если она состоит из
одного эргодического множества. Это означает, что существует
возможность попасть из каждого состояния во все остальные (не
обязательно за один шаг).
Если для стохастической матрицы Р эргодической цепи
Маркова существует такое конечное значение k, что все степени Pk,
начиная с некоторого k, строго положительны, такая цепь
называется регулярной.1 Если эргодическая цепь нерегулярна, она
называется циклической.

Заметим, что по определению матрица регулярной цепи Маркова
неразложима (это определение соответствует терминологии [38]). В [11]
регулярная матрица может быть разложимой – необходимым условием
регулярности является наличие не более одного эргодического множества. Здесь и
далее будем использовать определение регулярности, данное в [38].
25
1

Регулярные цепи Маркова
Результаты, полученные для предельных состояний в
регулярных цепях Маркова, обобщены в [38]:
У т в е р ж д е н и е 1.1. Если Р – регулярная стохастическая
матрица, то:
1) предел lim P k = Р существует;
k →

2) для любого вектора вероятностей  последовательность
векторов Pk сходится к единственному вектору  = (1, 2, …, n)
при k → ;
3) все компоненты вектора  положительны;
4) каждая строка матрицы Р представляет собой один и тот
же вектор предельных абсолютных вероятностей, т.е.
Р = 1,
где 1 – вектор-столбец, состоящий из n единиц;
5) вектор  – единственный вероятностный вектор, для
которого Р = .
6) РР = РР = Р.
Цепи с невозвратными множествами
В таких цепях переход от состояния к состоянию
осуществляется в направлении эргодических множеств. Попав в
одно из них, процесс уже не может его покинуть. Поэтому
исследование таких цепей можно свести отдельно к исследованию
эргодических цепей и исследованию цепей, в которых каждое
эргодическое множество состоит из одного элемента. Такие цепи
называются поглощающими цепями Маркова.
1.2.3. Графы перехода конечных цепей Маркова
Всякой цепи Маркова со стохастической матрицей Р = (pij)nn,
соответствует взвешенный орграф G(P), для которого Р является
матрицей смежности: pij – это вес ребра eij; если pij = 0, то ребро eij
отсутствует. Такой граф называется графом переходов [52]. Если
неориентированный граф связен, то матрица неразложима. Если
граф ориентирован, для неразложимости матрицы P необходима
сильная связность. Таким образом, смена состояний в однородной
цепи Маркова эквивалентна переходу от вершины к вершине в
26

конечном графе в соответствии с вероятностями, заданными весами
на дугах. Такие процессы задают случайное блуждание на графе.
Случайное блуждание на орграфе G начинается в некоторой
вершине i0; после t шагов оно переходит в вершину it, из этой
вершины на шаге t + 1 блуждание может переместиться к любой
вершине j с вероятностью pit j .
Множество вершин и вероятности перехода между ними
задают цепь Маркова. Вершина i0 может быть фиксирована, а может
сама быть выбрана на основании некоторого начального
распределения  0 (где  0 – вектор-строка). Обозначим через
P = (pij)nn матрицу переходных вероятностей этой цепи.
Правило блуждания выражается уравнением:

 t+1 =  t P.
 t =  P t.
Таким образом, вероятность того, что, начав в вершине i, мы
достигнем вершины j через t шагов, будет равна ij-му элементу
матрицы P t.
Распределения вероятностей  0,  1,  2, … в общем, различны.
Распределение  0 устойчиво, если  1 =  0. В этом случае,
очевидно,  t =  0 для всех t ≥ 0.
Устойчивое распределение будем обозначать через . Из
утверждения 1.1 следует, что для регулярной цепи Маркова  –
левый собственный вектор матрицы переходов Р, соответствующий
собственному числу 1.
Для неориентированного графа G распределение

i =

di
2m

является устойчивым (m – количество неориентированных ребер).
Стационарные состояния для ориентированного графа находятся,
как правило, численно.
Рассмотрим
теперь
процесс
рассеяния
некоторого
материального ресурса на взвешенном графе с выполнением закона
сохранения, при котором из каждой вершины на такте t + 1
рассеивается весь имеющийся ресурс пропорционально весам
27

выходных дуг.
Пусть граф задан G матрицей смежности A = (aij)nn, где aij –
веса дуг. Построим матрицу, элементы которой задают пропорции, в
которых разделится ресурс, выходящий из каждой вершины на
aij
произвольном такте t. Заменим в матрице А все aij на pij = n
.
 aik
k =1

Нетрудно убедиться, что полученная матрица нормирована по
строкам и что она совпадает с матрицей P = (pij)nn переходных
вероятностей случайного блуждания на графе G.
Пусть  0 – вектор-строка начального распределения ресурса,
количество которого равно W.
Правило распределения ресурса на такте t + 1 задается
аналогично:
 t+1 =  t P.
Распределение ресурса при его рассеянии задается
последовательностью векторов  0,  1,  2, … Нетрудно установить
соответствие между векторами  и  :  t = W t.
Таким образом, случайное блуждание по любому графу
математически эквивалентно процессу рассеяния ресурса на этом
графе с точностью до нормирующего множителя, хотя эти модели
отражают разные физические процессы.
Динамические процессы в цепях Маркова исследуются в
конечном и бесконечном времени. Для конечных времен интересны
вопросы об ожидаемом времени достижения некоторого множества
состояний из заданного состояния, о покрытии всего множества
состояний, о последовательности переходов и др. [66, 67] Для
бесконечного времени характерны вопросы устойчивости, формул
для вектора предельных вероятностей и многие другие [53, 115].
1.2.4. Дискретная модель достижения консенсуса
Применение теоретико-графовых методов в многоагентных
системах обусловлено удобством представления коммуникации
агентов в виде ребер графа, вершины которого соответствуют самим
агентам. Обзор этих методов дан в книге [106]. Остановимся на
рассмотрении модели Де Гроота достижения консенсуса в
многоагентных системах. Она предназначена для согласования
субъективных оценок (мнений) группой агентов [85, 4, 5, 62, 63]. В
28

основе этого согласования лежит метод последовательных
итераций, в процессе которых происходит сближение мнений.
Пусть x(0) = (x1(0), …, xn(0))T – вектор, содержащий
начальные мнения каждого члена группы, x(t) = (x1(t), …, xn(t))T –
вектор мнений на шаге с номером t. Тогда процесс согласования
задается формулой:
x(t+1) = Px(t) = Pt+1x(0),
где P – стохастическая матрица, описывающая влияние агентов друг
на друга; ее элементы pij характеризуют степень влияния мнения
агента с номером j на мнение агента с номером i. Согласие в группе
достижимо, если существует такой предельный вектор, все
компоненты которого равны. Согласие достижимо и не зависит от
начального состояния тогда и только тогда, когда предельная
матрица lim P k = Р существует и ее строки одинаковы. Из
k →

утверждения 1.1 следует, что для регулярной матрицы влияния
консенсус всегда существует.
Стохастическая матрица Р задает взвешенный орграф влияний
агентов Г. Ребро (j, i) существует, если агент j влияет на агента i.
Сила влияния определяется как вес ребра: wji = pij. Ребра в Г
ориентированы в направлении влияния.
Лапласовской матрицей L взвешенного орграфа [5] будем
называть матрицу:
L = E – P,
(1.1)
где E – единичная матрица.
Матрица
максимальных

исходящих

лесов

( )

J = J ij

взвешенного орграфа Г определяется следующим образом:

J ij =

f ij
f

, i, j = 1, …, n,

где f – суммарный вес всех максимальных исходящих лесов Г, fij –
суммарный вес максимальных исходящих лесов, в которых вершина
i принадлежит дереву, исходящему из j [63] (вес взвешенного
орграфа равен произведению весов всех его ребер).
Из следствия матричной теоремы о деревьях для цепей
Маркова имеет место равенство:
Р = J .
29

Введем некоторые дополнительные определения. Пусть А –
некоторая квадратная матрица n  n. Образ и ядро матрицы А
обозначим соответственно как R(A) и N(A). Индекс матрицы А –
 = ind A – такое наименьшее значение k {0, 1, …}, при котором
rank Ak+1 = rank Ak. Индекс матрицы равен размеру наибольшего
блока нулевого собственного значения в ее жордановой форме [63].
Идемпотентная матрица Z (т.е. матрица, для которой Z2 = Z),
называется собственным проектором матрицы А, соответствующим
собственному значению 0, если R(Z) = N(A) и N(Z) = R(A) [114,
63]. Для Z выполняется: ZA = AZ = 0. Идемпотентная матрица
однозначно определяется ядром и образом [5], поэтому собственный
проектор единствен.
Собственный проектор лапласовской матрицы L обозначим
~
через J .
В [80] доказано, что собственным проектором матрицы L
~
является матрица максимальных исходящих лесов J : J = J .
Непосредственно отсюда вытекает, что J 2 = J и LJ = JL = 0 .
С другой стороны, поскольку L = E – P, имеем
РL = LР = 0, причем R(Р) = N(L) и N(Р) = R(L) [1, 2].
То есть Р – собственный проектор матрицы L, rank Р=,
rank L= n –  ; ind L = 1 [107, 114, 3].
Таким образом, предел последовательности степеней
стохастической матрицы, если он существует, совпадает с
собственным проектором лапласовской матрицы и с матрицей
максимальных исходящих лесов графа влияний:
~
Р = J = J .

Если lim P k не существует, т.е. матрица Р – периодическая, то
k →

для нее существует предел по Чезаро (обозначим его так же: Р)
1 k
P  = lim  P i .
k →  k i =1
В случае апериодической матрицы предел по Чезаро совпадает
с пределом последовательности {Рk}. Для предела по Чезаро верны
все приведенные выше равенства.
Тогда предельный вектор итерационного процесса Де Гроота
30

вычисляется по формуле:
~
lim x(k ) = J x(0) .

k →

Для вычисления собственного проектора существуют
конечные алгоритмы. В [3] доказана теорема о том, что собственный
проектор любой квадратной матрицы А может быть вычислен с
помощью аннулирующего многочлена для матрицы Ak, где k  .
Так как для лапласовской матрицы  = ind L = 1, предельная
матрица Р может быть найдена с помощью любого аннулирующего
многочлена L.
~
Кроме того, для вычисления матрицы J можно использовать
формулы, приведенные в пп. 8–10 предложения 1 [63], и методы,
описанные в [3].
1.2.5. Неоднородные цепи Маркова
В однородных цепях Маркова вероятности перехода из состояния в
состояние постоянны и не зависят от времени. Если стохастическая
матрица изменяется на каждом шаге: P = P(t), цепь Маркова
называется неоднородной. Пусть неоднородная цепь описывается
последовательностью матриц P(1), P(2), …. Введем следующее
обозначение:
k

H k =  P (i ) , k = 1, 2, …
i =1

Если хотя бы одна из стохастических матриц P(t) = 1T, где
1 = (1, …, 1)T,  – некоторый вероятностный вектор, т.е. матрица
P(t) состоит из одинаковых строк, всё произведение Hk также будет
представлять собой матрицу с одинаковыми строками. При этом для
любой стохастической матрицы R' выполнится R'P(t) = P(t). Если R'
умножить на P(t) слева, также получится матрица с одинаковыми
строками [4]. В этом случае неоднородная цепь принципиально не
отличается от однородной регулярной цепи. Применительно к
модели Де Гроота это означает, что в ней достигнут консенсус.
Цепь с матрицами H k = (hij(k ) ) называется слабо эргодической,
если для всех i, l, j выполняется (hij( k ) − hlj( k ) ) → 0 [93]. При этом
предел матриц произведений H k может не существовать.
31

Цепь с матрицами H k называется сильно эргодической [94],
если для некоторого вероятностного вектора  имеет место

lim H k =1T.

k →

Обзор результатов для неоднородных цепей Маркова, а
также основанных на них моделей согласования мнений приведен в
[4].

1.3. Целочисленные пороговые модели
1.3.1. Chip-firing game
Игра выстреливания фишек (Chip-firing game) описана в ряде работ
Р. Андерсона и др.[68], Н. Биггса [74, 75], А. Бьёрнера и др. [76, 77],
Л. Ловаса [101], Дж. Спенсера [117] и других авторов [81, 82, 100,
111]. Игра состоит в следующем. Пусть G – ориентированный граф,
который может иметь петли и кратные ребра. В начальном
состоянии в некотором множестве вершин графа содержатся стопки
фишек (рис. 1.6). «Ход» состоит в выборе вершины, число фишек в
которой не меньше числа ее исходящих ребер, после чего эта
вершина выстреливает, т.е. передает по одной фишке по каждому
исходящему ребру всем своим соседям.
Игра продолжается до тех пор, пока остается хотя бы одна
вершина, способная выстрелить. Ключевое свойство таких игр
состоит в том, что при любой заданной начальной позиции все
последовательности выстрелов ведут себя одинаково: либо все они
будут длиться бесконечно, либо закончатся за одинаковое
количество шагов с одной и той же конечной позицией.

32

Рис. 1.6. Распределение фишек в chip-firing game

В [76] описаны зарождение и генезис chip-firing game. В [117]
был представлен следующий «пасьянс». В начальной позиции
имелась стопка из N фишек. На первом шаге N/2 из них
перекладывалось направо и столько же налево. Если N нечетно,
одна фишка оставалась в центре. На следующем шаге то же самое
проделывалось с каждой из полученных стопок и т.д. Исследовались
промежуточные и конечные позиции, а также время сходимости
процесса. Было доказано, что эта игра аппроксимируется процессом
Гальтона-Ватсона [55, 73] (в котором, однако, приходится допускать
наличие дробных частей фишек, и тогда любая стопка делится
пополам). Позже в [68] было добавлено условие, что за один шаг
происходит выбор и разделение только одной стопки, и доказано,
что описанная процедура останавливается ровно за k(k − 1)(2k − 1)/6
шагов, где k = (N + 2)/2. Более того, независимо от порядка выбора
стопок финальная позиция состояла из N последовательных стопок,
содержащих одиночные фишки, если N нечетно, и N + 1
последовательных стопок для четного N – центральная стопка при
этом пуста.
Вторым
этапом
стало
исследование
игры
на
неориентированном графе [76], где начальная позиция задавалась
некоторым набором вершин, в которые помещались стопки фишек.
(Игра продолжается до тех пор, пока существует хотя бы одна
вершина, способная выстрелить.) И, наконец, была исследована
33

модель chip-firing на ориентированных графах. Для всех этих
случаев было доказано, что игра в зависимости от количества
фишек и топологии графа является конечной (процесс
выстреливания остановится за конечное время) или бесконечной,
независимо от выбора последовательности ходов. Более того, для
фиксированного начального состояния при любом выборе
допустимых ходов конечная игра всегда заканчивается в одной и
той же позиции за одно и то же количество шагов, а бесконечная
игра зацикливается с одним и тем же циклом. В ориентированных
графах окончание игры может зависеть также от наличия стоковых
вершин.
В дальнейшем разными авторами были предложены
некоторые модификации игры. Так, в частности, в [111]
рассматривается параллельная игра выстреливаний, где все
вершины, способные выстрелить, стреляют одновременно. В
[74, 75] и [100] рассматривается модификация, названная
долларовой игрой. В этой игре существует выделенная вершина,
обладающая бесконечной ёмкостью и аккумулирующая фишки. Она
стреляет тогда и только тогда, когда ни одна вершина больше не
может произвести выстрел. Свойства такой игры выражаются в
терминах полинома Татта [8]. В [74] отмечено, что долларовая игра
может быть использована как модель экономики, в которой
правительство (выделенная вершина) вливает деньги в систему,
только если вся экономика останавливается. Изучение различных
модификаций долларовой игры ведет ко многим задачам, связанным
с критическими конфигурациями системы [74, 75]. Долларовая игра
является частным случаем задачи Дирихле, в которой множество
вершин графа делится на внутренние и граничные, причем
граничные вершины обладают бесконечной емкостью. В
долларовой игре граничная вершина единственна. В [81]
рассматривается общий случай этой модели – chip-firing game на
графе, в котором существует множество граничных вершин, и
попавшие в них фишки выбывают из игры. Эта работа
инспирирована исследованиями в сетях коммуникаций, под
фишками в ней понимаются пакеты или задания, а граничные
вершины
соответствуют
процессорам
с
неограниченной
вычислительной мощностью.
Ближе всего к модели, исследованной в настоящей работе,
находится параллельная игра выстреливаний, однако акцент в
исследовании этой модели был смещен в сторону изучения
поведения отдельных вершин в зависимости от конфигурации сети
34

и исследованию устойчивых циклических конфигураций фишек в
зависимости от их общего количества. Интересующие нас
результаты (свойства собственных чисел и векторов лапласовской и
стохастической матриц, конечность или бесконечность игры,
формулы, выражающие предельные состояния и др.) в основном
были получены для последовательных игр на ориентированных
графах.
1.3.2. Вероятностный абак
Модели, эквивалентные chip-firing game, были представлены
независимо по крайней мере дважды. Кроме описанного выше
пасьянса, предложенного Дж. Спенсером [117], и обобщенной
коллективом авторов в [68], в середине 1970-х годов А. Энгелем
была предложена модель, названная «вероятностным абаком» [90,
91]. Энгель рассматривал вероятностный абак как метод
нахождения вероятностей случайных событий. Целевое событие
соответствует некоторой стоковой вершине графа. Вероятность
события рассчитывается как вероятность оказаться в заданном стоке
из некоторой начальной вершины. Такой граф описывает
поглощающую цепь Маркова. Вероятность находится с помощью
распределения фишек на графе (Энгель называет их шашками).
Вершины в вероятностном абаке соответствуют состояниям
системы, и, таким образом, комбинаторными методами
производится расчет вероятностей попадания из заданного
начального состояния в указанное конечное состояние. Кроме этого,
вероятностный абак позволяет определять ожидаемое число шагов
для попадания из заданной начальной позиции в указанный сток.
Средствами этой модели можно производить поиск предельных
вероятностей не только в поглощающих, но и в эргодических цепях
Маркова.
Опишем принцип действия вероятностного абака на примере
поглощающей сети. Граф в этой модели рассматривается как
обобщение шашечной доски. Шашки хранятся в вершинах и
перемещаются в соответствии с переходными вероятностями,
соответствующими ребрам. Например, на рис. 1.7 вершина 1 может
сделать ход, если она обладает не менее чем шестью шашками. В
общем случае, если вершина 1 имеет количество шашек 6q + r (0 ≤
r <6), в свой ход она отдает q, 3q и 2q в вершины 2, 3 и 4
соответственно, а r шашек остаются в вершине.
Вершина называется критически загруженной, если для хода
35

ей не хватает одной шашки (на рис. 1.7 вершина 1 является
критически загруженной). Поглощающая сеть критически
загружена, если критически загружена каждая нестоковая вершина
(рис. 1.7).

1
1/6

1/3
1/2

2

3

4

Рис. 1.7. Критически загруженная сеть

Рассмотрим работу вероятностного абака при решении задач.
Пример 1. Правильная монета со сторонами 0 и 1
подкидывается, пока не будет достигнута одна из заданных
последовательностей: 101 или 0101. Граф этой игры представлен на
рис. 1.8 ([91]).

1

1
s

3

7

4

2

0

10

101

5

6

8

01

010

0101

Рис. 1.8. Граф игры подкидывания монет. Вес каждого ребра 0,5

До начала игры граф подвергается критической загрузке: в
каждую нестоковую вершину помещается по одной шашке. Игра
начинается в вершине s. В нее добавляется одна шашка, вершина
36

делает ход, который запускает серию последовательных ходов всех
остальных вершин – в сети создается поток, который
останавливается только тогда, когда не остается ни одной вершины
с двумя и более шашками. После этого вершина s критически
загружается и проверяется состояние графа. Если он не является
критически загруженным, добавляем еще шашку в s и продолжаем
игру. Так повторяется до тех пор, пока не возникнет вновь
начальное состояние критической загрузки (произойдет рекурсия).
В данном примере в вершину s нужно последовательно
добавить восемь шашек, пять из которых окажутся в стоке 7 и три –
в стоке 8. Таким образом, при старте в вершине s вероятности
поглощения для стоков 7 и 8 будут составлять соответственно 5/8 и
3/8.
Во время игры подсчитываются все ходы каждой шашки.
В описанной игре было сделано 80 ходов. Ожидаемое число шагов
из вершины 1 в сток рассчитывается по формуле
m1 =

число всех ходов
80
=
= 10.
число поглощенных шашек 8

Подсчет всех ходов можно не производить непосредственно:
зная конечную позицию, число ходов легко восстановить
обратными вычислениями, поскольку во всех внутренних вершинах
выполняется закон сохранения (уравнение равновесия) – в них вход
равен выходу [91].
Близость вероятностного абака к играм выстреливаний
очевидна. Кроме того, в [77] проводятся аналогии игры
выстреливания с сетями Петри и нейронными сетями.
1.3.3. Некоторые результаты для chip-firing game
При исследовании игры в выстреливания возникает ряд
естественных вопросов. Будет ли процесс конечным или
бесконечным? Если конечным, как долго он будет длиться? Если
бесконечным, как скоро он зациклится? Сколько фишек необходимо
для бесконечной игры? Какая последовательность выстреливаний
нужна для перехода из заданной начальной позиции в некоторую
другую позицию?
В случае неориентированных графов на эти вопросы получены
ответы. Существуют алгоритмы полиномиальной сложности для
определения, задает ли начальная позиция конечную или
37

бесконечную игру, а также для определения, достижима ли одна
позиция из другой. Пусть n – количество вершин, m – количество
ребер в графе. Если процесс конечен, он заканчивается не позднее,
чем за O(n4) шагов. Кратчайший период в периодической игре равен
n; минимальное число фишек для бесконечной игры равно m.
Ориентированные графы более трудны для изучения, и
алгоритмическая сложность нахождения некоторых параметров для
них пока не установлена.
Пусть игра выстреливаний происходит на ориентированном
графе G = (V, E), n = |V|, m = |E| (мультиребра и петли возможны, как
и в случае со случайными блужданиями). Пусть по-прежнему di+ и

di− – выходная и входная степени вершины i соответственно, aij –
количество ребер, ведущих от вершины i к вершине j. Тогда
d i+ =  aij , d i− =  a ji , aii – количество петель в вершине i.
j

j

Для произвольного вектора v  ℝV введем обозначения:
v=

 vk

k V

, v =

 d k+ vk

.

kV

Орграф называется эйлеровым, если di+ = di− [77]. В chip-firing
games на неориентированных графах каждое ребро может быть
попеременно и входным и выходным, поскольку выстрелы
происходят последовательно. Таким образом, неориентированные
графы в этой модели по умолчанию считаются эйлеровыми. Ряд
результатов, полученных для неориентированных графов,
переносится в неизменном виде на случай эйлеровых графов.
Произвольные ориентированные графы исследованы гораздо
меньше.
Полезным инструментом при изучении chip-firing games
является «уравнение сохранения фишек». Пусть s – начальная
позиция, а t – заключительная позиция некоторой конечной игры, и
пусть xi – это количество выстреливаний вершины i. Тогда

 a ji x j − di+ xi = ti − si .
j

Непосредственно из этого уравнения следует, что
38

xL = t – s,

(1.2)

где L  ℝVV – лапласовская матрица графа G(V), определяемая
следующим образом:
если i  j
 aij ,
lij =  +
− di + aii , если i = j
Это определение мы даем здесь, следуя [101]. Сравнив
формулу (1.2) с формулой (1.1), которая также задает лапласовскую
матрицу, и обозначив эти матрицы через L1 и L2 соответственно,
получим, что L1 = – L2.
В настоящем разделе под лапласовской матрицей L будем
понимать матрицу (1.2).
Пусть v – левый собственный вектор L, соответствующий
собственному числу 0 = 0: vL = 0. Из теоремы Перрона-Фробениуса
следует, что v > 0. Если G – эйлеров орграф (в частности,
неориентированный граф), то v = 1.
Матрица Лапласа связана с матрицей переходных
вероятностей случайного блуждания следующим соотношением:
P = D-1 L + E,
где D – диагональная матрица с полустепенями исхода
соответствующих вершин на главной диагонали. Отсюда следует,
что вектор предельных вероятностей связан с вектором v формулой:
d +v
(1.3)
i = i i .
v
Для
периодических
chip-firing
games
основной
характеристикой является длина периода. Из (1.2) следует, что при
прохождении полного периода s = t и
xL = 0.
(1.4)
Следовательно, x = lv для некоторого целого положительного
l. В [101] показано, что всегда можно достичь равенства x = v. В
этой же работе доказано, что минимальная длина периода любой
игры на графе G равна |v|, количество фишек, перемещенных в
течение минимального периода, равно ||v||.
39

Из формулы (1.3) вытекает, что распределение вероятностей
регулярной цепи Маркова q является стационарным тогда и только
q
тогда, когда вектор x, определенный как xi = +i , является ядром
di
матрицы Лапласа, т.е. удовлетворяет уравнению (1.4). А это, в свою
очередь, означает, что длину периода и количество фишек в игре
выстреливаний можно однозначно определить по вектору
предельных вероятностей соответствующей цепи Маркова.
1.3.4. Модель «абелева куча песка»
Датский физик Пер Бак ввел понятие самоорганизованной
критичности, которое используется при описании сложных систем.
Самоорганизованная
критичность
(СК)
характеризуется
относительно долгими периодами равновесия, прерывающимися
катастрофами (лавинами) различных масштабов, которые, в свою
очередь, ведут к новому равновесию. При этом малые воздействия
на систему могут порождать лавины разных размеров (размеры
лавин подчиняются степенному закону). Такая модель описывает
разнообразные процессы в сложных системах, которые
самоорганизуются к критическому состоянию. Упрощенная модель
СК, предложенная П. Баком, С. Таном и К. Уизенфельдом
представляет собой «кучу песка», которую можно описать
клеточным автоматом [69–71].
Модель
представляет
собой
двумерную
решетку,
описывающую поверхность, на которую сыплется песок. Модель
является открытой: песчинки поступают извне, и при «сходе
лавины» могут покидать решетку через граничные ячейки. Каждой
ячейке (клетке) (x, y) приписывается целое неотрицательное число
Z(x, y). Вводится т.н. «правило обрушения». Если количество
песчинок в ячейке (x, y) больше критического значения Z = 3, в
каждую соседнюю клетку добавляется по песчинке, а количество
песчинок в (x, y) уменьшается на 4. Правила функционирования
кучи таковы. В решетке случайным образом выбирается ячейка, и в
нее добавляется одна песчинка. Процесс повторяется до тех пор,
пока одна из ячеек не достигнет критического состояния. Тогда она
обрушивается, что, в свою очередь, может вызвать обрушение
соседних ячеек. Если опрокидывается граничная ячейка, песчинки
покидают решетку. После стабилизации в решетку снова начинает
сыпаться песок. Такие правила функционирования вызывают
лавины любых масштабов – от самых маленьких до самых больших.
40

Их распределение подчиняется степенному закону.
Алгебраические свойства модели были исследованы в ряде
работ, в частности, в [83, 86–89, 96, 102–105, 110, 112, 116, 118].
Д. Дхар обобщил модель «кучи песка». Он доказал, что она
представляет собой аддитивную абелеву группу [86]. Если
обрушившаяся ячейка активизирует несколько соседних ячеек, они
обрушиваются поочередно. Обрушивание ячеек коммутативно:
любая лавина заканчивается одним и тем же состоянием независимо
от выбора последовательности, в которой происходили
опрокидывания.
1.3.5. Графовая интерпретация «абелевой кучи»
и chip-firing game
Модель «куча песка» представляет собой регулярную решетку,
однако ее можно обобщить на любой граф. Естественную
интерпретацию этой модели представляет chip-firing game. В [101]
рассмотрена модель схода лавины, представленная некоторым
орграфом с кратными ребрами. Каждая вершина представляет собой
место, в котором аккумулируется снег. Специальная вершина s
отвечает за «внешний мир». Это вершина, из которой идет снег. Она
связана со всеми остальными вершинами сети. Когда количество
снега в одной из вершин превышает порог, она «обрушивается»,
посылая по единице снега каждому исходящему соседу, которые, в
свою очередь, могут обрушиться, и т.д., начиная лавину. Из
граничных вершин снег покидает модель. Если ориентированный
граф, моделирующий поверхность схода лавины, сильно связен, за
конечное число шагов все вершины избавятся от лишнего снега, и
ни один из них больше не сможет выстрелить, и сход лавины
прекращается.
Вершина s соединяется с каждой вершиной i посредством ai
ребер. Снегопад соответствует выстреливанию вершины s.
Предполагается, что снега в s «достаточно» для того, чтобы он
стрелял всегда. Таким образом, поддерживается динамика модели.
Последовательность
лавина-снегопад-лавина-снегопад-…
задает бесконечную игру в выстреливания на графе с
дополнительным ограничением: вершина s стреляет только тогда,
когда ни одна другая вершина не стреляет. Когда лавина начинает
сходить, очередность выстреливания вершин может быть
различной, однако количества выстреливаний каждой вершины и
конечное распределение снега определены однозначно.
41

Конечная позиция после схода лавины называется устойчивой.
Параметры модели: топология графа, количество кратных
ребер от вершины i к вершине j характеризуют силу влияния
вершины i на вершину j; количество кратных петель характеризует
степень устойчивости вершины к внешним воздействиям; вершину s
можно рассматривать как управляющую вершину.

Комментарий к главе 1
Наш обзор не претендует на полноту охвата всего разнообразия
графовых динамических моделей. Он преследует две цели. Первая
цель – инструментальная: напомнить читателю основные положения
теории цепей Маркова, которая будет активно использоваться в этой
книге. Вторая цель – концептуальная: на примере ряда моделей из
разных классов выделить главные характеристики дискретных
динамических процессов, которые понадобятся при построении
нашей теории. Эти характеристики – следующие.
1. Дискретное
время,
в
котором
происходит
функционирование модели, т.е. смена состояний.
2. Предположение (не всегда явное) о том, что
функционирование модели заключается в распространении
(рассеянии) некоторого ресурса. Этот ресурс может быть
материальным
или
информационным,
а
также
вырожденным, т.е. иметь только два значения – есть или нет
(примеры – случайное блуждание точки на графе,
распространение эпидемий).
3. Интенсивность распространения ресурса, т.е. объем
ресурса, перемещаемого в единицу времени, - как локальная
(в окрестности отдельной вершины), так и глобальная (в
сети в целом) – измеряется величиной, называемой
потоком. Если состояние сети в текущий момент, как
правило, описывает наличие ресурса в вершинах в этот
момент, то поток можно назвать состоянием ребер между
соседними моментами.
4. В процессе рассеяния общее количество ресурса может
сохраняться (случайное блуждание, лавина в куче песка)
или изменяться (распространение мнений).
5. Правила функционирования динамической модели могут
иметь пороговый характер. Таковы, например, правила в
различных вариантах chip-firing модели.
Отмеченные характеристики образуют ядро системы понятий,
42

в терминах которой будет строиться и сравниваться с другими
динамическими моделями основная модель нашей книги –
ресурсная сеть.

43

ГЛАВА 2. РЕСУРСНАЯ СЕТЬ –
ПРЕДВАРИТЕЛЬНОЕ ЗНАКОМСТВО,
в которой:
• Вводится понятие ресурсной сети. Даются определения основных
параметров сети, ее состояний и потока в ней.
• Начинается исследование динамических свойств ресурсных сетей на
примере их простого подкласса – полных однородных ресурсных сетей.
• Вводятся две независимые классификации ресурсных сетей: по
топологии (С1) и по пропускным способностям (С2), и строится матрица
классов сетей, в которой указаны все допустимые пары из декартова
произведения С1  С2.

Здесь мы начинаем рассказ о новой графовой динамической
модели – ресурсной сети, – которая существенно отличается от всех
моделей, описанных в гл.1, и не сводится ни к одной из них.

2.1. Основные определения
Ресурсной сетью называется связный орграф G = (V, E) с
вершинами vi  V и ребрами eij = (vi, vj)  E; V = n. Ребрам орграфа
приписаны неотрицательные числа rij, постоянные во времени и
называемые пропускными способностями; они задаются матрицей
пропускных способностей R = (rij)nn. Вершинам орграфа приписаны
неотрицательные числа qi(t), изменяющиеся в дискретном времени t
и называемые ресурсами. Вершины vi могут хранить
неограниченное количество ресурса.
Состоянием Q(t) сети в момент t называется вектор Q(t) =
(q1(t), …, qn(t)), содержащий значения ресурсов в каждой вершине в
момент t.

riin =

n

 r ji
j =1

и riout =

n

 rij

– входная и выходная пропускные

j =1

способности вершины соответственно. Пропускная способность
n

n

петли, если она существует, входит в обе суммы. rsum =   rij –
i =1 j =1

суммарная пропускная способность сети.
Суммарный ресурс всех вершин обозначим через W.
В сети выполняется закон сохранения: при функционировании
ресурс не поступает извне и не расходуется: t

n

 qi (t )
i =1

44

= W.

В каждый момент t вершины vi, i = 1, …, n, передают по
выходящим ребрам некоторое количество ресурса по одному из
двух правил, выбор которых зависит от величины qi(t) (количества
ресурса в вершинах).
Правила распределения ресурса. В момент t вершина vi
отдает в ребро eik, соединяющее ее с вершиной vk:
out
rik единиц ресурса, если qi (t )  ri (правило 1);

rik
q (t ) ресурса, если qi (t )  riout (правило 2).
out i
ri
Ресурс, выходящий из вершины vi по ребру eik в момент t,
приходит в вершину vk в момент t + 1.
Смысл этих правил заключается в следующем. Правило 1
работает тогда, когда вершина содержит ресурса больше, чем может
отдать; она отдает «всё, что может», т.е. по каждому ребру отдается
ресурс, равный пропускной способности этого ребра, а всего
n

out
отдается ri =  rij ресурса. По правилу 2 вершина отдает весь свой
j =1

ресурс, причем он распределяется пропорционально пропускным
способностям ребер. Если ресурс в вершине равен выходной
пропускной способности вершины: qi (t ) = ri , то применение
правил 1 и 2 даст одинаковые результаты.
Распределение ресурса происходит параллельно: на каждом
такте все вершины, имеющие ресурс, отдают его во все исходящие
ребра по правилу 1 или 2, в зависимости от его количества;
вершины, смежные с ними, получают ресурс по входящим ребрам.
Состояние Q(t) называется устойчивым, если Q(t) = Q(t + 1) = …
Состояние Q* = (q1*, …, qn*) называется асимптотически
достижимым из состояния Q(0), если для любого  > 0 существует
t такое, что для всех t > t qi* – qi(t)  < , i = 1, …, n.
Состояние сети называется предельным, если оно либо
устойчиво и достижимо из Q(0) за конечное время, либо
асимптотически достижимо из Q(0).
Множество вершин vi, для которых qi(t) ≤ riout , назовем зоной
Z–(t). Вершины из Z–(t) функционируют по правилу 2. Зоной Z+(t)
out

45

назовем множество вершин vj, для которых

out
qj(t) > r j . Эти

вершины функционируют по правилу 1. Для предельного состояния
Q* обозначим эти зоны Z–* и Z+*.
Поток ресурса. Поскольку ресурс, выходящий из вершины vi
по ребру eij в момент t, приходит в вершину vj в момент t + 1, будем
считать, что между моментами t и t + 1 ресурс находится в ребре eij.
Этот ресурс назовем потоком fij(t). Общий поток F(t) описывается
матрицей F(t) = (fij(t))nn.
n

n

Величиной потока называется сумма: fsum(t) =   f ij (t ) .
i =1 j =1

По любому ребру не может течь ресурс, больший его
пропускной способности, откуда следует, что fij(t)  rij и fsum(t)  rsum
для любого t.
n

Обозначим через f iout (t ) величину f iout (t ) =  f ij (t ) (сумму
j =1

элементов i-й строки матрицы F(t)), которая равна ресурсу,
out
out
выходящему из вершины vi в момент t. Очевидно, что f i (t )  ri .

Величина

f jin (t + 1) =

n

 f ij (t ) (сумма

элементов j-го столбца

i =1

матрицы F(t)) равна ресурсу, входящему в вершину vj на следующем
такте; f jin (t + 1)  r jin . Кроме того, положим по определению f jin (0) = 0.
Если в ресурсной сети существует предельное состояние Q*, то
поток в этом состоянии также будем называть предельным.
Матрицу предельного потока обозначим через F* = (𝑓𝑖𝑗∗ )nn.
Задачи, которые будут решаться в этой книге, – это задачи
исследования динамики ресурсных сетей. В первую очередь нас
будет интересовать анализ поведения во времени величин Q(t) и
F(t), нахождение условий существования предельных состояний и
поиск методов их вычисления. Мы начнем с исследования
подкласса ресурсных сетей – полных однородных ресурсных сетей,
– где эти задачи решаются относительно просто.

2.2. Полные однородные ресурсные сети
Ресурсная сеть называется полной, если для любых i, j ребро eij
существует и rij > 0. Для полной ресурсной сети матрица R
положительна. Ресурсная сеть называется однородной, если
46

пропускные способности всех ее ребер равны. Обозначим их через
r. В этом параграфе мы будем рассматривать полные однородные
ресурсные сети; здесь они иногда будут называться просто сетями.
Все элементы матрицы R для такой сети одинаковы и равны r,
поэтому в этом разделе матрица R нам не понадобится.
Поскольку в таких сетях для всех вершин число входящих и
выходящих ребер (включая петлю) одинаково и равно n, то для
in

out

любого i = 1, …, n выполняется равенство ri = ri = rn.
Тогда формулировка правил 1 и 2 упрощается:
в момент t вершина vi по каждому из своих n выходящих ребер
отдает:
− r единиц ресурса, если qi(t) > rn (правило 1);
−

qi (t )
единиц ресурса, если qi(t) ≤ rn (правило 2).
n

Соответственно, упрощается определение зон Z–(t) и Z+(t): зона
Z (t) – это множество вершин vi, для которых qi(t) ≤ rn; зона Z+(t) –
это множество вершин vj, для которых qj(t) > rn.
Полные однородные сети с петлями обладают следующими
пятью свойствами:
Свойство 2.1. Если для некоторого t выполняется равенство
qi(t) = qj(t), то для всех t' > t также выполняется qi(t') = qj(t').
Это следует из того, что с момента t обе вершины получают и
отдают одинаковое количество ресурса.
Свойство 2.2. Если для некоторого t выполняется
неравенство qi(t)  rn, то для всех t' > t справедливо qi(t')  rn.
Это следует из того, что vi в момент t отдает весь свой ресурс,
а получить от других n – 1 вершин может не более чем rn. Поэтому
вершина, попавшая в зону Z–, из нее уже никогда не выйдет, и,
следовательно, зона Z– с течением времени может только
увеличиваться.
Свойство 2.3. Если qi(t)  rn, i = 1, …, n, то состояние Q(t)
устойчиво.
Это следует из того, что все вершины получают и отдают rn
единиц ресурса.
Свойство 2.4. Для любых t входные потоки всех вершин
совпадают: f iin (t) = f jin (t), i, j = 1, …, n.
–

47

Это следует из того, что каждая вершина по всем выходящим
ребрам отдает одинаковый ресурс. Поэтому для любого t все
столбцы матрицы потока F(t) одинаковы.
Пример 2.1. Рассмотрим сеть с пятью вершинами, для
которой r = 2, суммарный ресурс W = 60, начальное состояние
Q(0) = (20, 17, 9, 8, 6). Тогда rn = 10, зона Z+(0) – первые две
вершины; остальные вершины входят в зону Z–(0).
 2

 2
F(0) =  1,8

1,6
1,2


2
2 2 2

2
2 2 2
1,8 1,8 1,8 1,8  .

1,6 1,6 1,6 1,6 
1,2 1,2 1,2 1,2 

Свойство 2.5. Если в момент t вершины vi1 , …, vim (m  n)
находятся в зоне Z−, то qi1 (t + 1) = ... = qim (t + 1) .
Поскольку все вершины зоны Z− в момент t отдают весь свой
ресурс, то их ресурс в момент t + 1 равен поступающему к ним
входному потоку. Тогда свойство 5 выполняется в силу свойства 4.
Из свойства 5 следует, что если все вершины находятся в зоне
Z–(0), то в момент t = 1 q1(1) = … = qn(1) и в последующие моменты
это равенство ресурсов в вершинах будет сохраняться.
Следовательно,
состояние
Q(1)
будет
устойчивым
и,
соответственно, предельным. Поэтому в дальнейшем будем считать,
что зона Z+(0) непуста.
Пронумеруем вершины так, что
q1(0)  …  qk(0) > qk+1(0)  … qn(0),

(2.1)

где qk(0) > rn, а qk+1(0)  rn.
Тогда зона Z+(0) содержит первые k вершин, зона Z–(0) −
остальные вершины. В общем случае k – величина переменная, так
как мощность Z+(t) может меняться (из свойства 2 видно, что со
временем она может только убывать). Поэтому под обозначением k
будем подразумевать k(t), но писать k(t) не будем, чтобы не
загромождать обозначений.

48

Отрезок вектора Q(t), содержащий только состояния вершин
из Z+(t), обозначим Q+(t); отрезок Q(t), соответствующий Z− (t),
обозначим Q−(t).
Представим эти отрезки в следующем виде:
Q+(t) = (rn + c1(t), …, rn + ck(t)),
Q−(t) = (rn − dk+1(t), …, rn − dn(t),

(2.2)

где все ci > 0, dj  0.
k

Введем обозначения С(t) =  ci (t ) ; D(t) =
i =1

n

 d j (t ) . Так как D(t)

j = k +1

– это ресурс, которого зоне Z− не хватает до rn(n – k), то назовем
величину D(t) дефицитом зоны Z−(t), а величину С(t) − профицитом
зоны Z+(t) .
Просуммировав компоненты Q(0), получим:
n

 qi ( 0 )

= W = rn2 + С(0) − D(0),

(2.3)

i =1

откуда заключаем, что
С(t) – D(t) = const = p и W = rn2 + p.

(2.4)

Для примера 2.1 имеем k = 2, c1(0) = 10, c2(0) = 7, С(0) = 17,
d3(0) = 1, d4(0) = 2, d5(0) = 4, D(0) = 7, р = 10.
Введем теперь следующие величины:

f +out (t) =

f −out (t) =

k

n

  f ij (t ) – суммарный выходной поток из Z+(t).
i =1 j =1
n

n

  fij (t ) – суммарный выходной поток из Z−(t).

i = k +1 j =1

out
out
fout (t) = f + (t) + f − (t) – общий выходной поток.

49

f +in (t + 1),

Соответствующие входные потоки обозначим

f −in (t + 1), f in (t + 1).
Из определения потока (п.2.1.4) следует, что f out (t) = f in (t + 1).
Имеем:

f +out (t) = rkn (для всех вершин из Z+(t) выходной поток равен
rn).

f −out (t) = rn(n – k) – D(t) (все вершины из Z− (t) отдают весь
свой ресурс).
fout (t) = rkn + rn(n – k) – D(t) = rn2 – D(t).
В силу свойства 4 общий входной поток делится между всеми
вершинами поровну. Поэтому

f +in ( t + 1) =

k out
k
k
f (t) = ( rn2 – D(t)) = rkn − D(t).
n
n
n

f −in ( t + 1) =

n − k out
n−k
f (t) =
( rn2 – D(t)).
n
n

Для
Z+(t + 1)
назовем
дивергенцией
out
in
Div Z+(t + 1) = f + (t + 1) − f + (t). Получим:
Div Z+(t + 1) = rkn −

величину

k
k
D(t) – rkn = − D(t).
n
n

k
D(t).
n
Это означает, что в течение интервала (t, t + 1) из Z+ в Z–
k
перетекает ресурс D(t).
n
Если в момент t + 1 зона Z+ не меняется, то
Соответственно, Div Z−(t + 1) =

Q+(t + 1) = (rn + c1(t) −
50

D (t )
D (t )
, …, rn + ck(t) −
),
n
n

Q−(t + 1) = (

D (t )
D (t )
f in (t + 1)
f in (t + 1)
, ….,
) = (rn−
, …, rn−
),
n
n
n
n

откуда
D(t + 1) =

n−k
k
k
D(t) = D(t)(1 − ) = D(0)(1 − )t,
n
n
n

(2.5)

f +out (t + 1) = rkn;
f −out (t + 1) = rn(n – k) –
f out (t + 1) = rn2 –

n−k
D(t).
n

n−k
D(t).
n

Тогда приращение потока:
f out (t + 1) = f out (t + 1) − f out (t) =

k
D(t) = Div Z−(t + 1).
n

Перейдем теперь к анализу поведения ресурсных сетей во
времени. Конкретная полная однородная ресурсная сеть однозначно
определяется двумя параметрами – числом вершин n и пропускной
способностью r. Поэтому, когда n и r зафиксированы, поведение
сети может зависеть только от суммарного ресурса W и его
распределения по вершинам в момент t = 0, т.е. от начального
состояния Q(0).
Рассмотрим эту зависимость сначала на примере.
Пример 2.2. Рассмотрим полную однородную сеть с n = 7 и r =
1. Её суммарная пропускная способность rsum равна rsum = rn2 = 49.
Пусть W = 54 и Q(0) = (30, 15, 9, 0, 0, 0, 0). Первые три вершины
находятся в зоне Z+(0): k = 3.
Протокол функционирования сети при данных W и Q(0), т.е.
последовательность состояний имеет следующий вид (табл. 2.1).
Таблица 2.1
ti
0

Протокол для Q(0) = (30, 15, 9, 0, 0, 0, 0)
v1
v2
v3
v4
v5
v6
30
15
9
0
0
0

v7
0
51

1
2
3
4
5
6
7
8
9
10
…
50
51
52
53
54
55
56
…

26
23,429
21,592
20,222
19,047
18,04
17,177
16,438
15,804
15,26
…
12,007
12,006
12,005
12,004
12,004
12,003
12,000
…

11
8,429
6,592
5,63
5,825
5,993
6,137
6,26
6,366
6,457
…
6,999
6,999
6,999
6,999
6,999
6,999
7
…

5
4,429
5,163
5,63
5,825
5,993
6,137
6,26
6,366
6,457
…
6,999
6,999
6,999
6,999
6,999
6,999
7
…

3
4,429
5,163
5,63
5,825
5,993
6,137
6,26
6,366
6,457
…
6,999
6,999
6,999
6,999
6,999
6,999
7
…

3
4,429
5,163
5,63
5,825
5,993
6,137
6,26
6,366
6,457
…
6,999
6,999
6,999
6,999
6,999
6,999
7
…

3
4,429
5,163
5,63
5,825
5,993
6,137
6,26
6,366
6,457
…
6,999
6,999
6,999
6,999
6,999
6,999
7
…

3
4,429
5,163
5,63
5,825
5,993
6,137
6,26
6,366
6,457
…
6,999
6,999
6,999
6,999
6,999
6,999
7
…

В силу закона сохранения сумма элементов в каждой строке
должна быть равна 54. Но, поскольку распределение ресурса
происходит в бесконечном времени, во всех таблицах протоколов
представлены такты до стабилизации в третьем знаке. Небольшие
отклонения от суммы во многих строках возникают в результате
округления.

52

Рис. 2.1. Динамика распределения ресурса в полной однородной сети
с семью вершинами и r = 1 с начальным состоянием Q(0) = (30, 15, 9, 0, 0, 0, 0).
Разные ломаные соответствуют разным моментам времени.

В дальнейшем мы, как правило, будем пользоваться
графическими представлениями протокола в двух вариантах.
Первый вариант представлен на рис. 2.1. В этом варианте Q(t)
представлено ломаными линиями для моментов t, причем каждому t
соответствует свой цвет. Ось Ox соответствует вершинам сети, ось
Oy – количеству ресурса в вершинах. Горизонтальная темная линия
– это граница между зонами Z–(t) и Z+(t). При t = 0 (красная линия)
зона Z+(0) содержит три вершины. При функционировании сети
ломаная левее k = 3 начинает опускаться параллельно самой себе,
поскольку вершины из зоны Z+ отдают по полной выходной
пропускной способности, т.е. отдают одинаковое количество
ресурса, равное 7. На такте вершина t = 1 (зеленая линия) v3
переходит в зону Z–(1). На такте t = 3 (синяя линия) к ней
присоединяется вершина v2 и в зоне Z+* остается всего одна
вершина. На такте t = 4 все вершины v2, …, v7, оказавшиеся в зоне Z–
, получают одинаковый ресурс, близкий к максимальному для зоны
Z– значению rn = 7 (напомним, что по свойству 2 эти вершины уже
не могут выйти из Z–). Заметим, что рис. 2.1 наглядно
демонстрирует выполнение свойств 1 и 5: как только вершина
попадает в Z–, на следующем такте ее ресурс становится равным
53

ресурсу других вершин из Z–, а в последующих тактах это равенство
сохраняется. Этот процесс будем называть выравниванием.
Другой вариант графического представления протокола
показан на рис. 2.2, на котором изображена динамика количества
ресурса в каждой вершине. Здесь ось Ox соответствует времени t;
как и на рис. 2.1, ось Oy соответствует количеству ресурса в
вершинах, а горизонтальная темная линия – граница между зонами
Z– и Z+. Состояние Q(t) изображается пучком из 7 вертикальных
цветных линий в точке t, в котором каждой вершинесоответствует
свой цвет. Переходы вершин в зону Z– на этом рисунке выглядят как
опускание вертикальных линий соответствующего цвета ниже
границы зон Z– и Z+.
Рассмотрим теперь динамику той же сети при W = 45 и
начальном состоянии
Q(0) = (15, 12, 9, 5, 3, 1, 0). Здесь W < rsum.
Протокол приведен в табл. 2.2.

Ti
0
1
2
3
4
5
6
7
8
9
…

Таблица 2.2
Протокол для Q(0) = (15, 12, 9, 5, 3, 1, 0)
v1
v2
v3
v4
v5
v6
v7
15
12
9
5
3
1
0
12,286 9,286 6,286 4,286 4,286 4,286 4,286
10,633 7,633 5,347 5,347 5,347 5,347 5,347
9,452 6,452 5,819 5,819 5,819 5,819 5,819
8,53 6,078 6,078 6,078 6,078 6,078 6,078
7,74
6,21
6,21
6,21
6,21
6,21
6,21
7,063 6,323 6,323 6,323 6,323 6,323 6,323
6,483
6,42
6,42
6,42
6,42
6,42
6,42
6,429 6,429 6,429 6,429 6,429 6,429 6,429
6,429 6,429 6,429 6,429 6,429 6,429 6,429
…
…
…
…
…
…
…

Второй вариант графического представления этого протокола
приведен на рис. 2.3.

54

v1
v2
v3

v1

55

Рис. 2.2. Другой вариант представления динамики распределения ресурса в полной однородной сети с семью
вершинами и r = 1 с начальным состоянием Q(0) = (30, 15, 9, 0, 0, 0, 0). Разные столбики соответствуют разным
вершинам

56

Рис. 2.3. Динамика распределения ресурса в полной однородной сети с семью вершинами и r = 1 с начальным
состоянием Q(0) = (15, 12, 9, 5, 3, 1, 0). Разными оттенками, как и на рис. 2.2,
обозначено количество ресурса в разных вершинах.

57

Видно, что все вершины за конечное число тактов переходят в
зону Z–(t), где на такте t = 7 происходит полное выравнивание.
Эти два примера иллюстрируют два основных типа динамики
полных однородных ресурсных сетей, которые различаются
положением W относительно rsum = rn2. Они описываются двумя
приводимыми ниже теоремами.
Теорема 2.1. Для полной однородной сети с петлями с числом
вершин n > 2:
1) если суммарный ресурс W сети не превосходит T = rn2, то
при любом начальном состоянии сети ее предельным состоянием
W
W
является вектор  ,...,  ;
n
n
2
2) если W > rn , то при любом начальном состоянии сети, в
котором хотя бы в двух вершинах ресурсы не равны, выравнивание
не происходит.
Рассмотрим 4 случая.
1. Зона Z+(0) пуста.
2. Зона Z+(0) непуста, W < rn2
3. Зона Z+(0) непуста, W = rn2.
4. W > rn2.
Случай, когда зона Z–(0) пуста, не рассматривается: в этом
случае все потоки равны и начальное состояние устойчиво.
Случай 1. Зона Z+(0) пуста. Тогда в силу свойства 5
выравнивание происходит за один такт.
Случай 2. Зона Z+(0) непуста, W < rn2.
Из (2.5) следует, что при неизменном k lim D(t) = 0. Но при
t →

W < T из (2.3) и (2.4) видно, что p < 0, и D(t) = 0 не достигается.
Поскольку в силу (2.4) с уменьшением D(t) уменьшается и С(t), то
наступит такой момент t', где впервые C(t') настолько мало, что хотя
бы одна вершина из Z+(t') перейдет в Z−(t') и по свойству 5 в момент
t' + 1 выровняет свой ресурс со всеми остальными вершинами Z−.
Дальше пойдет тот же процесс с уменьшенным k. Поскольку при W
< rn2 С(t) < D(t), то наступит момент t'', когда С(t'') = 0, все вершины
перейдут в Z−, в момент t'' + 1 произойдет выравнивание и
предельное состояние будет достигнуто.
Случай 3. Зона Z+(0) непуста, W = rn2. В этом случае p = 0, D(t)
и С(t) одновременно стремятся к нулю и, как видно из (2.2), lim Q(t)
t →

= (rn, …, rn). Но при этом в любой конечный момент времени
58

D(t)  0, следовательно, C(t)  0; поэтому по крайней мере одна
вершина будет оставаться в Z+ и предельное состояние будет
достигнуто асимптотически.
Случай 4. W > rn2. В силу свойства 2 вершины, попавшие в
зону Z-, выйти из нее не могут. Так как lim D(t) = 0, то lim Q−(t) =
t →

t →

(rn, …, rn), W − rn = p и lim С(t) = p. Величина p распределится
2

t →

между вершинами из Z , в каждой из которых ресурс будет
оставаться больше, чем rn, на конечную величину, т.е.
выравнивания не произойдет. 
Следствие. Если суммарный ресурс W сети не превосходит
T = rn2, то при любом начальном состоянии сети предельный
W
поток f ij* в любом ребре eij равен 2 .
n
Поскольку в предельном состоянии ресурсы всех вершин
равны и все вершины функционируют по правилу 2, то поток во
всех ребрах одинаков. Так как в полных сетях с n вершинами число
W
ребер всегда равно n2, то получаем f ij* = 2 . 
n
Конкретная характеристика предельных состояний для случая
4 описывается теоремой 2.2.
Теорема 2.2. Если W > rn2, то предельным состоянием сети
является вектор
+

Q* = (q1(0) − w*, …, ql (0) − w*, rn, …, rn),

(2.6)

где
l = k и w* =

D (0)
D (0)
, если ck(0) 
;
k
k

(2.7)

в противном случае l < k – наибольшее целое число, такое, что
cl(0)  w*,
w* =

где Cl(0) =

C l ( 0) − p
,
l

(2.8)
(2.9)

l

 ci (0) .
i =1

59

Формулировка теоремы выглядит довольно громоздкой. Тем
не менее её «физический смысл» хорошо иллюстрируется рис. 2.1 из
примера 2.2. Напомним, что k – это число вершин в Z+(0). Введенная
здесь величина l – это число вершин зоны Z+ в предельном
состоянии Q*. Если все k величин в предельном состоянии остаются
в Z+, то имеем l = k, т.е. случай (2.7). В противном случае l
вычисляется по формулам (2.8), (2.9). К моменту t каждая из вершин
в Z+(t) отдаст в Z−(t) одно и то же количество ресурса w(t) = qi(0) –
qi(t). Величина w* – это значение w(t) в предельном состоянии.
Доказательство теоремы 2.2.
D (0)
Случай 1. ck(0) 
. В доказательстве случая 4 теоремы 1
k
было отмечено, что lim Q−(t) = (rn, …, rn). Поэтому суммарный
t →

ресурс зоны Z−(t) в пределе возрастет на величину D(0), и по закону
сохранения на эту же величину уменьшится суммарный ресурс зоны
D (0)
Z+(t). Так как ck(0) 
, то из каждой вершины Z+ в пределе
k
D (0)
будет вычтена величина w* = lim w(t) =
и при этом
t →
k
наименьшая из величин ck останется положительной, а, значит,
мощность Z+ не изменится, т.е. l = k.
D (0)
Случай 2. ck(0) <
. Тогда в некоторый момент t
k
выполнится условие ck(0) – w(t)  0, вершина vk (и, может быть,
некоторые другие вершины из Z+) перейдет в зону Z–, и начнется
процесс уменьшения мощности Z+(t), который в некоторый момент
t' закончится возникновением заключительной зоны Z l+ . Состояние
Q(t') сети можно рассматривать как новое начальное состояние сети
с зонами Z l+ , Z l− и с начальным дефицитом Dl(t). Так как l с
момента t' не уменьшается, то выполняются условия случая 1 с
заменой k на l. Поэтому равенство (2.6) выполняется. Величины l и
w* определятся следующим образом. Из (2.2) с заменой k на l
l

следует, что

 q (0) = rln + С(0). Поэтому, просуммировав в (2.6)
i =1

i

компоненты Q*, по закону сохранения получим W = rn2 + Cl(0) – w*l.
Используя (2.4), получим уравнение rn2 + p = rn2 + Cl(0) – w*l,
60

откуда получим (2.9). Условие (2.8) необходимо для того, чтобы cl
осталась в зоне Z l+ . 
Следствие. Если W > rn2, то при любом начальном состоянии
сети предельный поток f ij* в любом ребре eij равен r.
Каждая из вершин зоны Z+(t) при любом t функционирует по
правилу 1 и, следовательно, отдает по каждому ребру r единиц
ресурса. Любая вершина зоны Z− в предельном состоянии содержит
rn единиц ресурса (формула (2.6)), которые согласно правилу 2
распределяет поровну по всем n выходящим ребрам. 

2.3. Классификация ресурсных сетей
по топологии
В зависимости от топологии графов ресурсные сети делятся на
классы, демонстрирующие принципиально различное поведение.
В разделе 1.2.3 было показано, что каждый граф, в котором
происходит рассеяние ресурса, порождает некоторую однородную
цепь Маркова, и, наоборот: каждой цепи Маркова со стохастической
матрицей P соответствует граф переходов G(P).
Графам с различной топологией соответствуют различные
классы цепей Маркова, описанные в разделе 1.2.2. Если граф
является сильно связным, ему соответствует эргодическая цепь
Маркова. Соответственно, ресурсную сеть, граф которой сильно
связен, будем называть эргодической сетью. Эргодическая цепь
является регулярной, если НОД длин всех циклов d ее графа
переходов равен единице. Заметим, что достаточным условием
регулярности является наличие в графе хотя бы одной петли. Если
d > 1, граф описывает циклическую цепь Маркова. Граф со
стоковыми вершинами (вершинами, не имеющими исходящих
ребер) соответствует поглощающей цепи. Количество стоков равно
количеству поглощающих состояний цепи.
Эргодическая нерегулярная сеть, например, цикл любой
длины, имеет матрицу пропускных способностей, никакая степень
которой не будет строго положительной. Поэтому не существует
такого количества шагов k, за которое малый ресурс распределится
по всем вершинам, – в сети возникают незатухающие колебания.
На рис. 2.4 вершины v1, …, v5 образуют эргодическую, но не
регулярную компоненту.

61

v1

v6

v5

v2

v1

v7

0

v4

v3

v9

v8

Рис. 2.4. Сеть с эргодической, но не регулярной
компонентой (цикл длины 5)

Компоненты графа, отличные от эргодических, называются
переходными. Переходная компонента на рис. 2.4 представлена
подграфом с вершинами v6, …, v10. Ресурс, покинувший переходную
компоненту, уже не сможет туда вернуться. Исследование
процессов поглощения ресурса эргодическими компонентами
можно свести к исследованию сетей, эргодические множества
которых состоят из единственной вершины, как это делается при
описании цепей Маркова.
Вершина, не имеющая исходящих ребер, образует
эргодическое множество. В сети она будет являться стоком: ресурс,
попавший в нее, уже ее не покидает. Ресурсные сети со стоковыми
вершинами будем называть поглощающими ресурсными сетями.
Сети с эргодической компонентой, представленной на рис. 2.4,
будет соответствовать поглощающая сеть с одной стоковой
вершиной (рис. 2.5).

62

v2

v1

v6

v3

v5

v4

Рис. 2.5. Поглощающая ресурсная сеть с одним стоком

На рис. 2.6 представлено вложение классов.
Ресурсные сети

Эргодические

Регулярные

Неэргодические

Циклические

Поглощающие

«Смешанные» – с
эргодическими и
переходной компонентами

Рис. 2.6. Топологическая классификация ресурсных сетей

Обозначим эту классификацию через С1.
Пунктирная стрелка показывает, что изучение неэргодических
сетей общего вида сводится к изучению соответствующих
поглощающих сетей.

2.4. Классификация ресурсных сетей
по пропускным способностям
Классификация ресурсных сетей, приведенная в предыдущем
разделе, задает разбиение множества сетей на классы в зависимости
63

от спектральных свойств их матриц пропускных способностей. Так,
будет доказано, что устойчивые состояния каждого из классов
обладают различными свойствами (а эргодические нерегулярные
сети могут не обладать устойчивостью). Однако эта классификация
недостаточна. В зависимости от пропускных способностей ребер
сети проявляют различные особенности функционирования; методы
их исследования тоже различны. Введем еще одну классификацию,
ортогональную первой.
Напомним (см. п. 2.2), что ресурсная сеть называется
однородной1, если пропускные способности всех ребер одинаковы.
В противном случае сеть называется неоднородной.
Неоднородная сеть, в свою очередь, делится на несколько
подклассов.
Неоднородная ресурсная сеть называется симметричной, если
симметрична ее матрица пропускной способности: R = RT.
В симметричных сетях у каждой вершины входная и выходная
пропускные способности совпадают. Однако конфигурации,
обеспечивающие совпадение входов и выходов, не исчерпываются
только симметричными сетями.
Ресурсная сеть называется квазисимметричной, если
i riin = riout .

(2.10)

Если сеть не квазисимметрична, в ней существует хотя бы
пара вершин, для которых riin − riout  0 . Для вершины vi обозначим
эту разность через ri: ri = riin – riout . Тогда все вершины сети
можно разделить на три класса:
1) вершины-приемники, для которых ri > 0;
2) вершины-источники, для которых ri < 0;
3) нейтральные вершины, для которых ri = 0.
В квазисимметричных сетях все вершины нейтральны.
Сеть будем называть несимметричной, если она не
удовлетворяет
условию
квазисимметричности
(2.10).
Несимметричная сеть обладает как минимум одним источником и
одним приемником. Вершины сети можно характеризовать
кортежем
Термин «однородная ресурсная сеть» не связан с понятием однородности
цепи Маркова (см. разделы 1.2.1, 1.2.2).
64
1

((

)(

) (

))

 = r1in ; r1out , r2in ; r2out ,... rnin ; rnout .
(2.11)
Представим классификацию в виде следующей схемы (рис. 2.7).
Ресурсные сети

Однородные

Неоднородные

Неполные

Квазисимметричные

Полные

Симметричные

Несимметричные

Собственно квазисимметричные

Эйлеровы
Рис. 2.7. Классификация ресурсных сетей по пропускным способностям

Из схемы видно, что три класса: полные однородные,
симметричные и квазисимметричные сети объединены в общий
класс эйлеровых сетей.
Все эти сети имеют общую особенность: у каждой вершины
входная и выходная пропускные способности совпадают. В случае
когда пропускные способности целочисленны, такую сеть можно
представить графом с кратными ребрами (единичной пропускной
способности), в каждой вершине которого полустепень захода равна
полустепени исхода. Сильно связный граф, обладающий таким
свойством, является эйлеровым [58]. Ресурсная сеть, у которой
входная и выходная пропускные способности в каждой вершине
совпадают, в таком случае представляет собой обобщение эйлерова
графа. Поэтому далее будем называть такие сети эйлеровыми
ресурсными сетями.

65

З а м е ч а н и е. Связная эйлерова сеть всегда эргодическая: в
ней не может существовать невозвратных множеств вершин
(переходной компоненты).
Д о к а з а т е л ь с т в о.
Рассмотрим эйлерову сеть G c n вершинами и предположим,
что в ней есть переходная компонента. Тогда она имеет структуру,
указанную на рис. 2.8, где для простоты указано только одно ребро
из переходной компоненты в эргодическую. В общем случае ребер,
выходящих из переходной компоненты, может быть много;
существенно то, что не может быть ребер из эргодической
компоненты в переходную.

Переходная
компонента

Эргодическая
компонента

Рис. 2.8. «Неэргодическая эйлерова сеть»

Выделим в G произвольную подсеть G’ с m вершинами, m < n.
Для удобства обозначений будем считать, что это вершины v1, …,
vm.
В силу эйлеровости сети для любой вершины vi подсети G’
имеет место равенство
(2.12)
riin = riout .
𝑛
Раскроем эти величины. riin = ∑𝑚
𝑙=1 𝑟𝑙𝑖 + ∑𝑝=𝑚+1 𝑟𝑝𝑖 . Первая
сумма – это сумма весов «внутренних» ребер, входящих в vi, т.е.
ребер, обе вершины которых принадлежат G’ (rij = 0, если
соответствующего ребра не существует); вторая сумма - это сумма
весов ребер, входящих в vi извне, т.е. ребер, у которых только vi
принадлежит G’.
𝑛
riout = ∑𝑚
𝑗=1 𝑟𝑖𝑗 + ∑𝑘=𝑚+1 𝑟𝑖𝑘 .

Первая сумма – это сумма весов «внутренних» ребер,
выходящих из vi; вторая сумма - это сумма весов ребер, выходящих
из vi вовне, т.е. ребер, у которых только vi принадлежит G’.
Подставив эти значения в (2.12), получим:
66

𝑚
𝑛
𝑛
∑𝑚
𝑙=1 𝑟𝑙𝑖 + ∑𝑝=𝑚+1 𝑟𝑝𝑖 = ∑𝑗=1 𝑟𝑖𝑗 + ∑𝑘=𝑚+1 𝑟𝑖𝑘 .

(2.13)

Просуммируем равенство (2.13) по всем вершинам G’.
Получим
𝑚
𝑚
𝑛
∑𝑚
𝑖=1( ∑𝑙=1 𝑟𝑙𝑖 ) + ∑𝑖=1(∑𝑝=𝑚+1 𝑟𝑝𝑖 ) =
𝑚
𝑚
𝑛
= ∑𝑚
𝑖=1( ∑𝑗=1 𝑟𝑖𝑗 ) + ∑𝑖=1(∑𝑘=𝑚+1 𝑟𝑖𝑘 ).

(2.14)

Первая сумма в левой части (2.14) – это сумма весов всех
внутренних ребер G’, рассматриваемых как входящие; первая сумма
в правой части – это тоже сумма весов всех внутренних ребер G’, но
рассматриваемых как выходящие. Очевидно, эти суммы равны, и
после их сокращения получаем:
𝑚
𝑛
𝑛
∑𝑚
𝑖=1(∑𝑝=𝑚+1 𝑟𝑝𝑖 ) = ∑𝑖=1(∑𝑘=𝑚+1 𝑟𝑖𝑘 ),

что означает справедливость следующего утверждения:
Для любой подсети связной эйлеровой сети сумма весов
входящих в нее ребер равна сумме весов выходящих из нее ребер.
Но в переходной компоненте нет входящих ребер;
следовательно, нет и выходящих. Поэтому структура на рис. 2.8 для
связной эйлеровой сети невозможна. 
На схеме рис. 2.7 присутствуют стрелки двух типов.
Сплошные стрелки задают древовидную структуру, однако она не
отражает всех связей между классами. В результате произошло
укрупненное разделение на два класса: несимметричные и эйлеровы
сети. (Полные однородные сети с петлями были исследованы в п.
2.2.) Эту классификацию будем обозначать С2.
Любой класс сетей, для которого можно сформулировать ряд
утверждений, верных для всех представителей этого класса, и не
выполняющихся для сетей из остальных классов, однозначно
задается парой признаков из декартова произведения С1  С2.
Классификацию сетей, используемую в настоящей работе,
представим в виде матрицы (табл. 2.3).

67

Таблица 2.3
Классы ресурсных сетей и структура книги
С2

Однородные

Несимметричные

Эйлеровы

Глава 2
(полные)
Глава 6
–

Главы 3, 4, 8

Глава 2, 5

Глава 6
Глава 7

Глава 6
–

С1
Регулярные
Циклические
Поглощающие

Комментарий к главе 2
Выбор класса полных однородных сетей для первого знакомства с
ресурсными сетями не случаен. Этот класс прост и нагляден:
результаты его исследования получены элементарными методами
без привлечения матричного аппарата, который будет активно
использоваться в последующих главах. Графические представления
функционирования полных однородных сетей весьма прозрачны. В
то же время, при всей своей простоте сети этого класса хорошо
иллюстрируют базовые понятия модели (предельное состояние,
поток, два разных правила функционирования вершин – правило 1 и
правило 2, – процессы переключения с одного правила на другое,
зоны Z+ и Z–) и характер основных утверждений теории,
формулируемых в терминах этих понятий.
Краткий итог исследований гл.2 выглядит следующим
образом.
При описании динамики функционирования важную роль
играет разбиение вершин на зоны Z–(t) и Z+(t). Зона Z–(t) – это
множество вершин, которые в момент t функционируют по правилу
2; вершины зоны Z+(t) в момент t функционируют по правилу 1. Для
полных однородных сетей эти зоны разделены величиной rn: vi  Z–
(t), если и только если qi(t) ≤ rn. Вершины, попавшие в зону Z–(t),
выйти из нее не могут, поэтому зона Z–(t) с течением времени не
убывает.
Предельное состояние в полной однородной сети всегда
существует и может быть вычислено. При этом, если суммарный
ресурс W сети достаточно мал, т.е. не превосходит порог T = rn2, то
предельное состояние не зависит от начального состояния: все
вершины в конечном счете окажутся в зоне Z–(t), в которой ресурс
всегда будет распределен равномерно по всем вершинам;
предельный поток также одинаков во всех ребрах.
68

Если же W выше порога, то ситуация резко меняется, и
предельное состояние целиком зависит от начального. Если в Q(0)
все вершины находятся в Z+(0), то Q(0) устойчиво (свойство 2.3) и,
следовательно, является предельным. Если же в Q(0) хотя бы одна
вершина находится в Z-(0), то вершины зоны Z- начинают забирать
ресурс у вершин из Z+ (поровну у всех), увеличивая свой ресурс до
rn. При этом некоторые вершины из Z+ переходят в Z-. На рис.2.1
хорошо видно, как ломаная опускается вниз: отрезок, лежащий в Z+,
опускается параллельно себе, а отрезок, попавший в Z-,
выравнивается. В предельном состоянии все вершины из Z- будут
иметь ресурс, равный rn.
Уникальной особенностью полных однородных сетей является
абсолютное равноправие (однородность) их вершин: у всех вершин
– одинаковое количество входящих и выходящих ребер, и у всех
ребер – одинаковая пропускная способность. Поэтому их поведение
зависит только от внешних причин, не связанных со структурой
сети: общего количества ресурса и его начального распределения по
вершинам.
В последующих главах основной задачей будет исследование
процессов функционирования ресурсных сетей разных классов.
Схема исследования везде остается той же, что и в этой главе:
главная цель – решение проблемы существования и вычисления
предельного состояния и предельного потока; параметры, в
терминах которых формулируются решения – те же: пороговая
величина T количества ресурса W, при переходе через который
поведение сети меняется; динамика зон Z+ и Z-; зависимость от
начального состояния. Однако во всех других классах ресурсных
сетей мы встретимся с тем или иным видом неоднородности вершин
и ребер, которое и лежит в основе двух классификаций ресурсных
сетей, приведенных в п. 2.3. Поэтому динамика функционирования
будет существенно зависеть от внутренних свойств сети,
определяющих ее вхождение в тот или иной класс. Это сильно
усложняет динамику процессов и ее исследование, что потребует
введения новых параметров и привлечения существенно более
серьезного математического аппарата.

69

ГЛАВА 3. РЕГУЛЯРНЫЕ СЕТИ –
ФУНКЦИОНИРОВАНИЕ ПРИ МАЛЫХ
РЕСУРСАХ. СТРУКТУРНЫЕ СВОЙСТВА
НЕСИММЕТРИЧНЫХ СЕТЕЙ,
в которой:
• Регулярные сети исследуются на сходимость при малом ресурсе.
Ресурс считается «малым», если, начиная с некоторого конечного
момента t', все вершины функционируют по правилу 2. В следующей
главе понятие малого ресурса будет уточнено.
• Показывается, что при малых ресурсах поведение всех подклассов
регулярных сетей описывается регулярной цепью Маркова.
• Указывается на то, что матрица предельных вероятностей этой цепи
Маркова R' является собственным проектором лапласовской матрицы
L = Е – R' и совпадает с нормированной матрицей максимальных
исходящих лесов орграфа, полученного из исходного орграфа сети
изменением ориентации ребер.
• Рассматриваются свойства несимметричных регулярных ресурсных
сетей и особенности их функционирования.
• Доказывается, что все вершины-источники и многие нейтральные
вершины за конечное число тактов переходят в зону Z–(t); объясняется,
какие именно нейтральные вершины в несимметричной сети
потенциально могут остаться в зоне Z+* (t) при любых значениях t.
• Вводится понятие порогового значения ресурса Т, в правой
полуокрестности которого хотя бы одна вершина изменяет правило
функционирования, и процесс распределения ресурса перестает
описываться
однородной
цепью
Маркова.
Доказывается
единственность Т для каждой регулярной сети.
• Вводится
характеристика
сети,
названная
коэффициентом
симметричности. Этот показатель, изменяющийся на полуинтервале
(0, 1], тем ближе к единице, чем меньше различаются суммарная
входная и выходная пропускная способности всех вершин сети.
• Вводится понятие аттрактора – вершины, способной перейти в зону
Z+(t) при достаточном суммарном ресурсе в сети и удержаться в ней;
производится классификация аттракторов. Показывается, что не
каждый приемник может быть аттрактором.
• Показывается, что данных о пропускных способностях недостаточно
для определения является ли данный приемник аттрактором.

В этой главе мы начинаем рассматривать функционирование
регулярных сетей. Поскольку ресурсная сеть является пороговой
моделью, естественно рассматривать отдельно случаи, когда все
вершины функционируют по правилу 2, и случаи, когда одна или
несколько вершин функционируют по правилу 1. В первой части
70

главы будет рассмотрен случай, когда все вершины регулярной сети
функционируют по правилу 2; будут рассмотрены регулярные
несимметричные сети и исследованы переходные процессы,
происходящие при увеличении суммарного ресурса вплоть до
смены правил функционирования. Здесь же мы опишем свойства
вершин, способных оказаться в предельном состоянии в зоне Z+*, и
определим пороговое значение ресурса, при котором эта зона
непуста.

3.1. Предельное состояние регулярной сети
при единичном ресурсе
Пусть в сети с регулярной матрицей R циркулирует единичный
ресурс W = 1, а матрица пропускной способности R удовлетворяет
условию: для любой вершины vi riout  1 . Это – достаточное (и
чрезмерно строгое) условие для функционирования всех вершин по
правилу 2: на каждом такте t вершины отдают весь свой ресурс, и их
новый ресурс будет состоять только из вновь пришедшего.
Необходимое условие можно будет сформулировать лишь после
введения некоторых дополнительных определений и понятий. Тем
не менее, будем считать, что все рассматриваемые сети
удовлетворяют таким ограничениям.
Для вектора распределения единичного ресурса введем
обозначение Q1(t). Каждая вершина получает ресурс из всех
остальных вершин и ресурс из своей петли (если она есть),
отданный на предыдущем такте t. Процесс функционирования сети
можно записать в следующем виде:
Q1(t + 1) = Q1(t)R',
матрица R' описывает функционирование сети по правилу 2.
 r11 r12
 out out
r1
 r1
R ' =  ...
...
 rn1 rn 2
 out out
rn
 rn

(

r1n 

r1out 
... ...  .
rnn 
... out

rn 

...

)

R' = D–1R, где D = diag r1out ,..., rnout . R' – матрица, стохастическая по
строкам.
71

Матрица пропускной способности R задает регулярную
ресурсную сеть. Таким образом, регулярная стохастическая матрица
R', описывающая изменение ресурса по правилу 2, с начальным
вектором
распределения
единичного
ресурса
Q1(0) =
(q11 (0), q12 (0),..., q1n (0)) задает регулярную цепь Маркова.
Непосредственно из результатов, полученных для цепей
Маркова, следует ряд утверждений для ресурсных сетей с ресурсом
W = 1 [11, 38]:
1) для любой регулярной сети существует lim ( R ' ) h = R';
h→

2) для любого начального распределения единичного ресурса
(W = 1) вектор предельного распределения Q1* существует,
единственен и находится по формуле
Q1* = Q1(0)R';
2') кроме того, для любого t > 0 верно равенство
Q1* = Q1(t)R';
3) матрица R' состоит из n строк Q1*:
R' = 1  Q1*,

(3.1)

где 1 – вектор-столбец, состоящий из единиц;
4) вектор Q1* является левым собственным вектором матрицы
R', соответствующим собственному числу  = 1:
Q1* R' = Q1*;
5) любой столбец матрицы R' (3.1) является правым
собственным вектором матрицы R';
6) Q1* является левым собственным вектором матрицы R':
1*
Q  R' = Q1*.
Из п. 2) следует, что предельное состояние сети с единичным
ресурсом не зависит от начального.
З а м е ч а н и е. В разделе 1.2.4 первой главы описана связь
матрицы R' с лапласовской матрицей графа, построенного по
стохастической матрице R': L = E – R'. Матрица R' является
собственным проектором матрицы L. Для этих матриц выполняется
72

[107, 114, 3]:

R'L = LR' = 0, rank R'=, rank L=n–.

Также этот проектор совпадает с нормированной матрицей
максимальных исходящих лесов орграфа, полученного из исходного
орграфа сети изменением ориентации ребер [1]. Лесная размерность
орграфа регулярной сети равна единице, и, соответственно,
rank R' = 1, что согласуется с формулой (3.1). Матрица R' может
быть найдена с помощью любого аннулирующего многочлена для
лапласовской матрицы L [62].

3.2. Предельное состояние регулярной сети
при малых ресурсах
Пусть значение W таково, что, начиная с некоторого момента t', все
вершины сети функционируют по правилу 2, т.е. находятся в зоне Z–
(t). Такая величина W всегда существует: например, при W < min riout
i

, ни одна вершина заведомо не может оказаться в Z+(t).
Т е о р е м а 3.1. В регулярной сети для любого ресурса W, при
котором  t' >0:  t > t' vi  Z–(t), i = 1, … n, для любого начального
состояния Q(0) вектор предельного состояния Q*:
1) существует;
2) единственен;
3) является левым собственным вектором стохастической
матрицы R' и предельной матрицы R' с собственным
числом  = 1: Q* = Q*R' и Q* = Q*R'.
Д о к а з а т е л ь с т в о. Поскольку в начальном состоянии
ресурс распределен по вершинам произвольно, то некоторое
конечное число тактов часть вершин может функционировать по
правилу 1. Но по условию теоремы существует момент времени t',
начиная с которого все вершины окажутся в зоне Z–(t) и начнут
функционировать по правилу 2. Тогда для любого t  t'
функционирование сети описывается формулой:
Q(t+1) = Q(t)R',
где R' – стохастическая матрица.
Для любого k верно:
Q(t+k) = Q(t)R'k.

(3.2)

73

Поскольку для регулярной сети R' существует, то при k → 
для правой части (3.2) имеет место равенство:
Q(t ) lim ( R' ) k = Q(t ) R' .
k →

Тогда и левая часть (3.2) сходится к некоторому предельному
вектору:
Q* = Q(t)R'.
(3.3)
Таким образом, вектор предельного состояния существует и
может быть найден из любого промежуточного состояния Q(t) (t 
t'). Так как (3.3) верно для любого t  t', то, осуществив еще один
предельный переход, получим:
Q* = Q* R'.

(3.4)

Отсюда следует, что Q* – левый собственный вектор матрицы
R' с собственным числом  = 1.
Из (3.4) следует, что
Q* R' = (Q* R')R' = Q* (R'R') = Q* R' = Q*.
Q* – левый собственный вектор матрицы R', соответствующий
 = 1. По теореме Фробениуса этот вектор единственен. Таким
образом, доказаны все утверждения теоремы.
При функционировании сети по правилу 2 вектор предельного
состояния является собственным вектором матрицы R'. Но
поскольку положительный собственный вектор матрицы R'
единственен с точностью до скалярного множителя, все векторы
предельного состояния линейно зависимы. Для двух значений
ресурса W1 и W2 справедливо равенство:
Q1* Q2*
=
.
W1 W2
Тогда для каждого значения W, при котором сеть
функционирует по правилу 2, координаты вектора предельного
состояния Q* можно выразить через вектор Q1* :
(3.5)
74

Q* = Q1*W.

Таким образом, предельное состояние при малых ресурсах
(таких ресурсах, при которых все вершины за конечное время
переходят в зону Z–(t)) существует и единственно, независимо от
вида матрицы пропускной способности сети. Достаточно того,
чтобы она была регулярной.
При
малых
ресурсах
однородные,
симметричные,
квазисимметричные и несимметричные сети демонстрируют
одинаковое поведение. Однако, если количество ресурса в сети
велико, – так, что при больших t существует, по крайней мере, одна
вершина, принадлежащая зоне Z+(t), – функционирование сетей
разных классов начинает сильно отличаться. Рассмотрим
функционирование несимметричных сетей при больших ресурсах.

3.3. Регулярные несимметричные сети
и их свойства
Несимметричные сети обязательно содержат вершины двух типов:
вершины-источники, у которых суммарная выходная пропускная
способность превосходит входную, и вершины-приемники, у
которых большей является входная пропускная способность. Кроме
того, несимметричные сети могут иметь нейтральные вершины, у
которых оба эти значения совпадают. Количества приемников и
источников не обязательно совпадают.
Рассмотрим сеть, представленную графом с точкой
сочленения vi, которая является вершиной-приемником (рис. 3.1).
При этом, vi соединяет две компоненты, в одной из которых все
вершины являются нейтральными (т.е. эта компонента является
эйлеровой).

Эйлерова
компонента

Несимметричная
компонента

vi

Рис. 3.1. Несимметричная сеть с эйлеровой компонентой

75

Такую сеть будем называть несимметричной сетью с
эйлеровой компонентой. О дополнительных ограничениях на
приемники будет сказано в разделе 3.6.
Эйлеровых компонент в несимметричной сети может быть
много – главное, чтобы точкой сочленения для каждой из них
выступала вершина-приемник. Кроме того, точек сочленения у
одной компоненты тоже может быть много. Однако в настоящей
главе нас в первую очередь интересуют особенности
функционирования и предельные состояния несимметричной
компоненты регулярной сети. Будем считать, что несимметричная
компонента всегда одна.
Пусть среди n вершин сети имеется l вершин-приемников, k
источников и n – l – k нейтральных вершин. Будем считать, что
приемники имеют номера от 1 до l, источники – от l + 1 до l + k,
нейтральные вершины – от l + k + 1 до n.
Множество вершин, у которых qi(t)  riout , как и раньше, будем
называть зоной Z–(t), а множество вершин с qi(t) > riout – зоной Z+(t).
Вершины из Z–(t) функционируют по правилу 2, а вершины из Z+(t)
– по правилу 1.
Несимметричные сети благодаря наличию вершин разных
типов – приемников и источников – обладают рядом свойств, не
присущих другим классам сетей, таким как эйлеровы сети. Эти
свойства проявляются только при достаточно большом суммарном
ресурсе, так как в предыдущих разделах было показано, что при
малых ресурсах процесс перераспределения ресурса описывается
регулярной цепью Маркова при любой регулярной матрице
пропускных способностей и сходится к единственному предельному
состоянию.
В дальнейшем мы увидим, что в несимметричных сетях лишь
некоторые вершины при t →  могут получить или сохранить
большое количество ресурса. Все остальные вершины имеют
ресурс, меньший своей выходной пропускной способности.
С в о й с т в о 3.1. Если для некоторого момента времени t'
ресурс в вершине vi, не являющейся приемником (i > l), не
превосходит ее суммарную входную пропускную способность: qi(t')
 riin , то для всех t > t' также выполнится неравенство qi(t)  riin ,
(i > l).
Д о к а з а т е л ь с т в о этого свойства состоит в том, что у
вершин-источников и нейтральных вершин входная пропускная
76

способность не превосходит выходную, а следовательно, если в
какой-то момент времени qi(t')  riin , то следовательно, qi(t')  riout , а
значит, вершина функционирует по правилу 2 и отдает весь свой
ресурс, а принять она на каждом такте не может больше чем riin . 
Для вершин-источников условие qi(t)  riin сильнее условия
vi(t)  Z–(t), для нейтральных вершин эти условия равносильны.
Поэтому из свойства 3.1 следует, что при переходе в зону Z–(t)
вершина vi уже никогда не покинет эту зону.
Свойства 3.2 и 3.3 описывают функционирование сетей при
некоторых ограничениях на их топологию.
С в о й с т в о 3.2. Если в матрице R имеются одинаковые
столбцы с номерами i, j > l, и вершины vi, vj принадлежат
несимметричной компоненте, то существует такой момент t', что
для всех t > t' qi(t) = qj(t) (i, j > l).
При таких условиях, как будет доказано в теореме 3.2, с
некоторого момента t' обе вершины перейдут на правило 2 и будут
отдавать весь свой ресурс, а получают они одинаковое количество
ресурса по условию.
С в о й с т в о 3.3.
В
процессе
функционирования
несимметричной сети ресурс в некоторых вершинах может
временно стабилизироваться, а затем снова изменяться.
Это происходит, когда ресурс в сети намного превосходит ее
суммарную пропускную способность, и в начальном состоянии он
расположен в источнике или нейтральной вершине. Тогда при
перераспределении ресурса от источника (нейтральной вершины) к
приемнику во всех остальных вершинах происходит насыщение, и
ресурс в них временно стабилизируется на значении их входной
пропускной способности.
Проиллюстрируем все три свойства следующим примером.
П р и м е р 3.1. Пусть сеть с пятью вершинами задана
матрицей пропускной способности:

1

1
R = 3

4
5


1
1
1
1
1

1
1
1
1
1

1
1
1
1
1

1

1
1 .

1
1
77

Эта сеть обладает одним приемником v1, одной нейтральной
вершиной v2 и тремя источниками v3, v4, v5. Все вершины v2, …, v5
имеют разные выходные пропускные способности, но входные
пропускные способности у них совпадают.
Суммарный ресурс W = 40 находится в нейтральной вершине
v2.
Начальное
состояние
Q(0) = (0, 40, 0, 0, 0).
Протокол
функционирования сети представлен в табл. 3.1 и на гистограмме
(рис. 3.1).
Пример иллюстрирует все три свойства: ресурс вершин,
попавших в зону Z–(t), не превышает значения riin (свойство 3.1), в
вершинах v2, …, v5 в процессе функционирования ресурс
выравнивается (свойство 3.2) и временно стабилизируется (свойство
3.3).

t
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
…
29
30
31
78

Таблица 3.1
Распределение ресурса – протокол работы сети
v1
v2
v3
v4
v5
0,000
1,000
2,684
3,880
4,945
5,826
7,232
8,870
10,596
12,355
14,127
15,903
17,682
19,461
21,240
23,020
24,799
26,579
28,110
29,116
29,699

40,000
36,000
32,579
29,714
27,299
25,268
23,393
21,577
19,784
17,999
16,218
14,438
12,658
10,878
9,099
7,319
5,539
3,760
2,972
2,721
2,575

0,000
1,000
1,579
2,135
2,585
2,969
3,125
3,184
3,207
3,215
3,218
3,220
3,220
3,220
3,220
3,220
3,220
3,220
2,972
2,721
2,575

0,000
1,000
1,579
2,135
2,585
2,969
3,125
3,184
3,207
3,215
3,218
3,220
3,220
3,220
3,220
3,220
3,220
3,220
2,972
2,721
2,575

0,000
1,000
1,579
2,135
2,585
2,969
3,125
3,184
3,207
3,215
3,218
3,220
3,220
3,220
3,220
3,220
3,220
3,220
2,972
2,721
2,575

30,494
30,496
30,498

2,377
2,376
2,376

2,377
2,376
2,376

2,377
2,376
2,376

2,377
2,376
2,376

32
33
…

30,498
30,499
…

2,375
2,375
…

2,375
2,375
…

2,375
2,375
…

2,375
2,375
…

Процесс распределения делится на три этапа. На первом
этапе (такты 0–10) вершины v3, v4, v5 набирают ресурс до
некоторого максимального значения. На втором этапе (такты 11–
17) в этих вершинах происходит стабилизация, а перераспределение
идет между нейтральной вершиной v2 и приемником v1. На третьем
этапе (такты с 18-го) ресурс вершины v2 становится меньше ее
выходной пропускной способности, и ресурсы в четырех вершинах
выравниваются.

79

q(t)
40

v2

v1

35
30
v1

25

v2
v3

20

v4

15

v5

10
5
0
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33

Рис. 3.2. Протокол работы сети с интервалом стабилизации ресурса
80

t

Т е о р е м а 3.2. В регулярной несимметричной сети для всех
источников и нейтральных вершин, не принадлежащих эйлеровым
компонентам, для любого суммарного ресурса W и его начального
распределения Q(0) = (q1(0), q2(0), … qn(0)) существует такой
момент времени t', что для любого t > t' выполнится неравенство:
qi (t) ≤ riin , i > l.

(3.6)

Д о к а з а т е л ь с т в о. Из свойства 3.1 следует, что
источники и нейтральные вершины, находящиеся в начальном
распределении в зоне Z–(0), останутся в этой зоне. Для таких вершин
неравенство (3.6) выполнится автоматически.
1. Докажем, что любой источник из зоны Z+(0) всегда за
конечное число тактов перейдет в зону Z–(t), т.е. начнет
функционировать по правилу 2. Пусть vi – вершина-источник,
i = l+1, …, l+k; для нее выполняется неравенство riin < riout . Так как
ресурс этой вершины больше

riout , то эта вершина будет

функционировать по правилу 1, т.е. отдавать за каждый такт по riout
единиц ресурса. Принять же эта вершина может только riin < riout .
Тогда за каждый такт ресурс вершины-источника будет
уменьшаться на некоторую ограниченную снизу величину r': r' 
ri = riout − riin . Таким образом, как бы ни был велик начальный
ресурс в этой вершине, за конечное число тактов ti вершинаисточник перейдет на правило 2 и будет получать ресурс, не
превосходящий riin , а это означает, что неравенство (3.6) доказано
для всех источников. Величину ti можно оценить сверху:
qi (0) − riout
ti 
.
ri
2. Докажем, что (3.6) с некоторого такта выполняется также
для нейтральных вершин, не принадлежащих эйлеровым
компонентам. Поскольку сеть регулярна, для каждой нейтральной
вершины vj существует по крайней мере один путь из каждого
источника. А поскольку вершины не принадлежат эйлеровым
компонентам, существует по крайней мере один путь от некоторого
источника до vj, не содержащий приемника. Пусть t* – такт времени,
81

на котором все источники перешли в зону Z–(t). Существование
такого такта для любого начального состояния следует из п.1. Пусть
существует ребро eij из источника vi в нейтральную вершину vj.
Тогда как только vi переходит на правило 2, он начинает отдавать в
каждое выходное ребро ресурс, строго меньший его пропускной
способности, и для вершины vj автоматически выполнится (3.6).
Если путь из источника к некоторой нейтральной вершине содержит
k промежуточных нейтральных вершин, применим последовательно
это рассуждение k раз, начиная от ближайшей к источнику
вершины.
Таким образом, за конечное число тактов для всех
нейтральных вершин и вершин-источников выполнится неравенство
(3.6). 
Если в сети существует эйлерова компонента, то
принадлежащие ей вершины, имея в начальном распределении
излишек ресурса, остаются в зоне Z+(t). Рассмотрим пример.
П р и м е р 3.2. Сеть с шестью вершинами задана матрицей:

1

5
1
R= 
1
2

2


1
1
1
1
0
0

1
1
1
1
0
0

1
1
1
1
0
0

2
0
0
0
1
0

2

0
0
,
0
0 
1 

W = 50, Q(0) = (0, 0, 0, 0, 50, 0).
Матрица пропускной
представленной на рис. 3.3.

82

способности

соответствует

сети,

v6
v5
v1

v2

v3

v4

Рис. 3.3. Сеть с эйлеровой компонентой – вершины v5 и v6

Нейтральные вершины v5 и v6 соединены с приемником v1 и
не имеют связи с остальной сетью. Протокол работы сети
представлен в табл. 3.2.
Таблица 3.2
Протокол работы сети
t
0
1
2
3
4
5
…
102
103
104
105
106
…

v2

v3

v4

v5

v6

0,000
2,000
2,250
2,896
3,340
3,777

v1

0,000
0,000
0,250
0,438
0,635
0,815

0,000
0,000
0,250
0,438
0,635
0,815

0,000
0,000
0,250
0,438
0,635
0,815

50,000
48,000
46,500
45,063
43,786
42,622

0,000
0,000
0,500
0,729
0,967
1,157

8,000
8,000
8,000
8,000
8,000

2,666
2,667
2,667
2,667
2,667

2,666
2,667
2,667
2,667
2,667

2,666
2,667
2,667
2,667
2,667

31,001
31,001
31,001
31,000
31,000

3,000
3,000
3,000
3,000
3,000

На рис. 3.4 отражено начало процесса перераспределения
ресурса.

83

q(t)
50

v5
45
40

v1
35

v1
v2

30

v3

25

v4

20

v5
v6

15
10

v6

5

0
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33

Рис. 3.4. Динамика ресурса в сети с эйлеровой компонентой
84

t

Из табл. 3.2 и рис. 3.4 видно, что приемник v1 и нейтральная
вершина v6, пустые в начальном состоянии, добрали ресурс до своей
выходной пропускной способности, а весь излишек ресурса остался
в нейтральной вершине v5. Нейтральные вершины v3 и v4 имеют
пути к источнику, минующие приемник, поэтому их ресурс оказался
ниже их входной и выходной пропускных способностей, как и
ресурс источника v2.
Объяснение такого поведения сети заключается в следующем.
Вершина v1, через которую эта подсеть соединена с остальной
сетью, – приемник1. Она получает не меньше, чем отдает, и является
барьером между двумя компонентами, препятствуя перетеканию
ресурса. Таким образом, при больших ресурсах, когда каждая
вершина получила некоторое пороговое значение, эйлерова
компонента функционирует изолированно от остальной сети, и ее
свойства совпадают со свойствами эйлеровой сети. В эйлеровых
сетях, поскольку все вершины нейтральны, каждая из них способна
удержать ресурс выше своей пропускной способности при
достаточно большом начальном ресурсе. Для полных однородных
сетей это было показано во второй главе; другие виды сетей,
обладающих только нейтральными вершинами, будут рассмотрены
в главе 5.

3.4. Пороговое значение Т
В теореме 3.1 доказаны существование и единственность
предельного состояния при условии, что все вершины за конечное
число тактов переходят в зону Z–(t). Возникает вопрос, можно ли
заранее определить по начальному состоянию, перейдут ли все
вершины на правило 2 (или, что то же самое, окажутся ли они в зоне
Z–(t)). Если да, то не производя вычислений, можно будет
определить, описывается ли сеть цепью Маркова, и можно ли найти
ее предельное состояние по формуле (3.5). Ответ на этот вопрос для
несимметричных сетей дает теорема 3.3.
Т е о р е м а 3.3. В регулярной несимметричной сети
существует пороговое значение суммарного ресурса Т, такое, что:
при W  Т все вершины, начиная с некоторого t', переходят в
зону Z–(t);
1
Некоторые условия, налагаемые на вершины, нельзя выразить только в
терминах пропускных способностей. Если в сети более одного приемника, то
условие того, что точка сочленения должна быть приемником, не является
достаточным. Достаточное условие будет приведено в п. 3.6.
85

при W > T зона Z+(t) непуста, начиная с некоторого t''.
Т единственно и не зависит от начального состояния Q(0).
Д о к а з а т е л ь с т в о. Из доказательства теоремы 3.2
следует, что через конечное число тактов все источники и
нейтральные вершины, не принадлежащие эйлеровым компонентам,
оказываются в зоне Z–(t). Тогда при достаточно большом суммарном
ресурсе в зоне Z+(t) могут оказаться лишь приемники и нейтральные
вершины из эйлеровых компонент. При W > rsum хотя бы одна из
таких вершин гарантированно окажется в Z+(t).
Рассмотрим вектор предельного состояния как функцию от W:
Q*=Q*(W). Пусть значение W таково, что все вершины, начиная с
некоторого такта, перешли в зону Z–(t). Из равенства
Q*(W) = Q1* W
следует, что координаты Q*(W) растут пропорционально W, пока все
вершины остаются в зоне Z–(t). Как только при увеличении W ресурс
в одной из вершин достигает значения riout , эта вершина переходит
на правило 1 и при дальнейшем росте W соотношение (3.5)
перестает выполняться. Обозначим величину суммарного ресурса,
при котором первая из вершин в предельном состоянии получает
ресурс, равный riout , через Т. Поскольку Q*(W) единственно для
каждого W  Т и не зависит от Q(0), то Т – единственно. 
З а м е ч а н и е 3.1. Очевидно, что Т  rsum. Для однородных
сетей
выполняется
равенство
Т = rsum
(раздел 2.2);
для
несимметричных сетей Т < rsum. Это следует непосредственно из
теоремы 3.2.

3.5. Коэффициент симметричности сети
Определим еще одну характеристику сети – коэффициент
симметричности.
Как следует из замечания 3.1, в однородной сети Т = rsum.
Тогда с пропорциональным увеличением пропускных способностей
значение Т также возрастает. Однако увеличение Т при увеличении
rsum происходит далеко не всегда. Рассмотрим следующие примеры.

86

П р и м е р 3.3. Пусть сеть задана матрицей пропускной
способности:
 1 100 1 1 1 


 1 1 70 1 2 
1 0 1
R = 3 1


1 5 1
1 2
 1 1 10 1 1 


Для этой сети кортеж , определенный формулой (2.11), имеет
вид:  = ((7,104), (105,75), (83,6), (8,10), (6,14)). Сеть имеет два
приемника – это вершины v2 и v3. rsum = 209.
Рассчитаем характеристики этой сети.
1. Вектор предельного состояния при W = 1 имеет вид:
Q1* = (0.212, 0.284, 0.396, 0.024, 0.084).
2. Экспериментально получено, что Т  15.16.
3. При W = T вектор предельного состояния равен:
Q* = (3.215, 4.312, 6.000, 0.359, 1.273).
При увеличении ресурса в предельном состоянии наблюдается
рост только третьей компоненты вектора: при W = 100 получим
Q* = (3.215, 4.312, 90.841, 0.359, 1.273).
П р и м е р 3.4. Сеть задана матрицей пропускной способности:

 1 10 1

1 1 7
R = 3 1 1

1 2 1
 1 1 10


1
1
0
5
1

1

2
1,

1
1 

То есть две самые большие пропускные способности r12 и r23
из прошлого примера уменьшены в 10 раз. Определим те же самые
характеристики для полученной сети.

 = ((7,14), (15,12), (20,6), (8,10), (6,14)).
87

Сеть имеет те же самые два приемника – вершины v2 и v3.
rsum = 56.
1. Вектор предельного состояния при W = 1 имеет вид:
Q1* = (0.212, 0.253, 0.316, 0.091, 0.128).
2. Т  19.
3. При W = T предельное состояние
Q* = (4.034, 4.800, 6.007, 1.724, 2.434).
При увеличении ресурса в предельном состоянии рост
происходит, как и в предыдущем примере, только в третьей
компоненте вектора предельного состояния. При W = 100
предельное состояние будет: Q* = (4.034, 4.800, 87.007, 1.724, 2.434).
Эти два примера позволяют увидеть, что между суммарной
пропускной способностью сети и пороговым значением может быть
не только очевидная прямая зависимость: чем больше rsum, тем
больше Т, – но и обратная зависимость. В первом примере величине
rsum = 209 соответствовало значение Т  15.16; во втором примере
при уменьшении пропускных способностей двух ребер и,
соответственно, уменьшении суммарной пропускной способности
до величины rsum = 56, пороговое значение увеличилось: Т  19.
Чем более разнятся суммарные входные и выходные
пропускные способности вершин сети, тем меньше становится
пороговое значение Т. В однородной сети, как уже было отмечено,
Т = rsum. Чем больше проявляется несимметричность, тем дальше
значение T от rsum.
Коэффициентом симметричности сети назовем отношение
T
=
. Очевидно, что   (0, 1]. Как будет показано в главе 7,
rsum
левый конец интервала  = 0 достигается при Т = 0 в сетях
определенного вида. Таким образом,   [0, 1]. Чем ближе  к
единице, тем сеть «более симметрична».

3.6. Аттракторы и их классификация
3.6.1. Определение потенциальных аттракторов
Эксперименты показывают, что некоторые приемники не могут
перейти в зону Z+(t) при любом сколь угодно большом значении
88

ресурса W и начальном состоянии Q(0). Рассмотрим пример
функционирования сети с двумя приемниками, обладающими
различными входными пропускными способностями.
П р и м е р 3.5. Пусть сеть задана матрицей пропускной
способности:
 1 1 1 1 1


 1 1 1 1 1
R =  3 1 1 1 1


 1 2 1 1 1
 1 1 1 1 1


W =100; в начальном состоянии ресурс находится в первом
приемнике: Q(0)=(100, 0, 0, 0, 0).
Для этой сети кортеж  имеет вид:  = ((7,5), (6,5), (5,7), (5,6),
(5,5)), таким образом, сеть имеет два приемника {v1, v2}, два
источника {v3, v4} и одну нейтральную вершину {v5}. Поскольку
граф полный, то эйлеровых компонент нет. Протокол
функционирования сети представлен в табл. 3.3.
Таблица 3.3
t
0
1
2
…
31
32
33
34
…

Протокол функционирования сети
v1
v2
v3
v4

v5

100,000
96,000
92,995

0,000
1,000
1,876

0,000
1,000
1,710

0,000
1,000
1,710

0,000
1,000
1,710

83,799
83,798
83,797
83,797

4,536
4,536
4,537
4,537

3,888
3,888
3,889
3,889

3,888
3,888
3,889
3,889

3,888
3,888
3,889
3,889

Дальнейшие эксперименты показывают, что любое
начальное распределение ресурса W = 100 приведет к одному и тому
же предельному состоянию Q* = (83,797, 4,537, 3,889, 3,889, 3,889).
Таким образом, из двух приемников в сети только один оказался
способным в предельном состоянии удержаться в Z+, и, более того,
аккумулировать весь ресурс, превышающий Т. (Непосредственно из
89

вектора предельного состояния можно найти величину Т: Т  5 +
4,537 + 3,889 + 3,889 + 3,889 = 21,204.)
Рассмотрим несколько примеров работы сети с двумя
одинаковыми приемниками.

1

1
R = 2

1
1


1
1
1
2
1

1
1
1
1
1

1
1
1
1
1

1

1
1 ,  = ((7,5), (7,5), (5,7), (5,7), (5,5)).

1
1

П р и м е р 3.6. Ресурс в первом приемнике: Q(0) = (30, 0, 0, 0, 0).
Таблица 3.4
t
0
1
2
3
4
…
29
30
31
…

Протокол функционирования сети
v1
v2
v3
v4

v5

30,000
26,000
22,900
20,493
18,625

0,000
1,000
1,900
2,593
3,132

0,000
1,000
1,733
2,304
2,748

0,000
1,000
1,733
2,304
2,748

0,000
1,000
1,733
2,304
2,748

12,144
12,143
12,143

5,000
5,000
5,000

4,285
4,286
4,286

4,285
4,286
4,286

4,285
4,286
4,286

Из примера видно, что первый приемник оставил себе
большую часть ресурса, второй взял лишь количество, равное r2out ,
все остальные вершины получили ресурс, меньший riin (что и
утверждается в теореме 3.2). Q* = (32,143, 5,000, 4,286, 4,286, 4,286).

90

q(t)
35

v1
30

25
v1
v2

20

v3
15

v4

v2

v5

10

5

0
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25

t

Рис. 3.5. Функционирование сети с двумя равными приемниками (ресурс в первом приемнике)
91

Если перенести ресурс из первого приемника во второй, то в
силу их симметричности ресурс распределится аналогично: за такое
же количество шагов при той же точности получится симметричный
результат: Q* = (5,000, 12,143, 4,286, 4,286, 4,286).
В той же сети поместим ресурс в один из источников.
П р и м е р 3.7. Ресурс в первом источнике (вершина v3):
Q(0) = (0, 0, 30, 0, 0).
Для такого начального состояния предельное состояние
описывается вектором Q* = (9,291, 7,852, 4,286, 4,286, 4,286). Таким
образом, оба источника оказались в зоне Z+*, но поскольку первый
источник связан ребром с большей пропускной способностью с
первым приемником, первый приемник имеет ресурс выше, чем
второй (рис. 3.6).
При помещении ресурса во второй источник (вершина v4),
получим симметричное распределение: Q* = (7,852, 9,291, 4,286,
4,286, 4,286).
Если в той же сети поместить ресурс в нейтральную вершину,
оба приемника получают поровну: Q* = (8,571, 8,571, 4,286, 4,286,
4,286).
На рис. 3.6 представлена гистограмма, отражающая динамику
ресурса при начальном состоянии Q(0) = (0, 0, 0, 0, 30). Ресурсы в
двух приемниках растут одинаково, так же, как и в двух источниках.
Нейтральная вершина постепенно отдает излишки ресурса, и
ресурсы в вершинах v3, v4, v5 выравниваются.

92

q(t)
35

30

v3

25
v1
v2

20

v3
v4

15

v5

v1
10

v2
5

0
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24

t

Рис. 3.6. Функционирование сети с двумя равными приемниками (ресурс в первом источнике (вершина v3))
93

q(t)
35

30

v5

25
v1
v2

20

v3
v4

15

v1

v5

v2

10

5

0

0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30

t

Рис. 3.7. Функционирование сети с двумя равными приемниками (ресурс в нейтральной вершине v5)
94

Из примеров видно, что величина ресурса приемников в
предельном состоянии зависит от начального состояния (заметим,
кроме того, что три последние координаты остаются неизменными
для любого начального состояния). Сеть с двумя равными
приемниками имеет некоторое сечение (рис. 3.8), такое, что
приемники находятся по разные его стороны, и суммарные входные
пропускные способности вершин по обе стороны от этого сечения
равны.
Приемник, по чью сторону от сечения находится больше
ресурса в начальном состоянии, в предельном состоянии получит
больше. Если ресурс разделен симметрично относительно сечения,
приемники получают поровну. В предельных случаях, когда весь
ресурс находится в одном из приемников, другой может получить
лишь ресурс, равный своей суммарной выходной пропускной
способности. Ресурс в этом приемнике стремится к его выходной
пропускной способности снизу, т.е. этот приемник не переходит в
зону Z+(t) ни при каком t.

v5

v3

v4

v1

v2

Рис. 3.8. Сечение сети, относительно которого приёмники симметричны

Вершины, для которых при W > T существует начальное
состояние Q(0), из которого они переходят в зону Z+*, назовем
аттракторами. Как было показано в примерах 3.6, 3.7, если в сети
более одного аттрактора, не обязательно все они окажутся в зоне
Z+*. Поэтому будем называть такие вершины потенциальными
95

аттракторами. Из примера 3.2 видно, что потенциальным
аттрактором в сети может быть не только приемник, но и любая
нейтральная вершина из эйлеровой компоненты.
После введения определения аттрактора становится понятным,
что эйлерова компонента, в которой присутствуют вершиныаттракторы, должна быть связана с остальной сетью только через
вершину-аттрактор. В самом деле, если точка сочленения –
приемник, не являющийся аттрактором, он не может накопить
ресурс, даже равный своей выходной пропускной способности и,
соответственно, не может служить барьером между эйлеровой
компонентой и остальной сетью. Ее вершины не смогут оставить у
себя излишки ресурса и перейдут в зону Z*– при любом его
начальном распределении. Если у одной эйлеровой компоненты –
несколько точек сочленения, это означает, что в такой сети имеется
несколько аттракторов.
3.6.2. Классификация аттракторов
Как видно из примера 3.5, не всякий приемник может стать
аттрактором. С другой стороны, аттракторами могут быть и
нейтральные вершины.
Однако между аттракторами-приемниками и аттрактораминейтральными вершинами есть принципиальное различие.
Вершина-приемник стягивает на себя ресурс, циркулирующий в
сети. При большом ресурсе она способна перейти в зону Z+(t),
находясь в начальном состоянии в зоне Z–(t). Нейтральная вершина
способна лишь остаться в зоне Z+(t), находясь в ней в начальном
состоянии. Перейти туда из зоны Z–(t) она не может.
Таким образом, аттракторы в сети делятся на два
непересекающихся класса:
− активные аттракторы – это вершины-приемники;
− пассивные аттракторы – нейтральные вершины из
эйлеровой компоненты.
3.6.3. Признаки аттрактивности вершины
Узнать, какая из вершин в несимметричной сети является
аттрактором, по матрице пропускной способности невозможно.
Рассмотрим следующий пример.

96

П р и м е р 3.8.
матрицей:

Сеть

с

 1

 1
R = 100

 1
 1


пятью

2
1
1
1
1

1
1
1
1
1

вершинами

1
1
1
1
1

представлена

1

1
1

1
1

Кортеж  для нее имеет вид:  = ((104, 6), (6, 5), (5, 104),
(5, 5), (5, 5)). В качестве начального состояния возьмем вектор
Q(0) = (0, 0, 0, 0, 100). Ресурс W = 100 помещен в нейтральную
вершину. Протокол распределения ресурса представлен в табл. 3.5.
Таблица 3.5
t
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
…
76
77
78
79
80
81
82

Протокол функционирования сети
v1
v2
v3
v4

v5

0,000
1,000
2,528
3,601
4,544
5,342
6,017
6,604
7,575
8,725
9,948
11,200
12,466
13,736
15,008
16,281

0,000
1,000
1,743
2,522
3,145
3,677
4,128
4,504
4,635
4,689
4,711
4,720
4,724
4,725
4,726
4,726

0,000
1,000
1,576
2,100
2,545
2,920
3,238
3,504
3,635
3,689
3,711
3,720
3,724
3,725
3,726
3,726

0,000
1,000
1,576
2,100
2,545
2,920
3,238
3,504
3,635
3,689
3,711
3,720
3,724
3,725
3,726
3,726

100,000
96,000
92,576
89,677
87,221
85,141
83,379
81,883
80,519
79,208
77,919
76,639
75,363
74,088
72,814
71,540

86,647
86,669
86,683
86,691
86,696
86,704
86,704

4,088
4,083
4,079
4,077
4,076
4,075
4,075

3,088
3,083
3,079
3,077
3,076
3,075
3,075

3,088
3,083
3,079
3,077
3,076
3,075
3,075

3,088
3,083
3,079
3,077
3,076
3,075
3,075
97

…

Как видно из протокола, вершины v2, …, v5 получили
некоторый ресурс, меньший своей входной и выходной
способности, а весь остальной ресурс аккумулировался в вершине
v1, которая и является аттрактором.
Предельное состояние Q* = (86,704, 4,075, 3,075, 3,075, 3,075).
Заметим, что в сети два приемника. Это вершина v1 и вершина
v2. Однако входная пропускная способность вершины v1 сильно
превышает входную пропускную способность вершины v2, и то, что
аттрактором оказалась вершина v1, соответствует ожиданиям.
Функционирование сети на рис. 3.9 представлено в виде
графика, так как процесс сходится за относительно большое
количество тактов и гистограмма утрачивает информативность.
100
90
80

q(t)
v5

v1

70

v1

60

v2

50

v3

40

v4

30

v5

20
10
0
0 3 6 9 121518212427303336394245485154576063666972757881

t

Рис. 3.9. Функционирование сети с двумя неравными приемниками
(ресурс в нейтральной вершине v5)

Из рисунка видно, что на протяжении функционирования
происходит обмен ресурсом между вершинами v5 и v1, в то время
как в остальных вершинах наблюдается стабилизация.
Изменим в матрице R единственный элемент: пусть теперь
r12 = 3.
98

П р и м е р 3.9.
матрицей:

Сеть

с

пятью

 1

 1
R = 100

 1
 1


3
1
1
1
1

вершинами

1
1
1
1
1

1
1
1
1
1

представлена

1

1
1

1
1

Кортеж  для нее имеет вид:  = ((104, 7), (7, 5), (5, 104),
(5, 5), (5, 5)). Начальное состояние оставим неизменным: Q(0) = (0,
0, 0, 0, 100). Протокол распределения ресурса представлен в табл.
3.6.
Таблица 3.6
t
0
1
2
3
4
5
6
7
8
9
10
…
157
158
159
160
161
162
…

Протокол функционирования сети
v1
v2
v3
v4

v5

0,000
1,000
2,504
3,529
4,439
5,222
5,886
6,454
6,915
7,219
7,576

0,000
1,000
1,838
2,766
3,495
4,123
4,661
5,119
5,606
6,333
7,119

0,000
1,000
1,552
2,051
2,487
2,855
3,169
3,437
3,643
3,751
3,786

0,000
1,000
1,552
2,051
2,487
2,855
3,169
3,437
3,643
3,751
3,786

100,000
96,000
92,552
89,603
87,091
84,945
83,114
81,552
80,194
78,946
77,732

6,268
6,268
6,267
6,267
6,266
6,266

84,098
84,100
84,101
84,103
84,104
84,104

3,211
3,211
3,211
3,210
3,210
3,210

3,211
3,211
3,211
3,210
3,210
3,210

3,211
3,211
3,211
3,210
3,210
3,210

Предельное состояние Q* = (6,266, 84,104, 3,210, 3,210, 3,210).
Как видно, вершины v1 и v2 поменялись местами. Теперь
аттрактором стала вершина v2, а v1 имеет в предельном состоянии
ресурс, меньший своей выходной способности. Это случилось
потому, что ребро e12, имеющее пропускную способность, равную 3,
позволило вершине v2 «паразитировать» на v1 и получать излишки
99

ресурса не напрямую из v5, а через посредничество приемника v1.
Когда пропускная способность r12 была равна 2, ее было
недостаточно для «перекачки» ресурса, и он накапливался в
вершине v1.
Из рис. 3.10 хорошо видно, что вершина v1 сначала тоже
переходит в зону Z+(t), но затем теряет накопленный ресурс.
100
90
80

q(t)
v5

v2

70

v1

60

v2

50

v3

40

v1

v4
v5

30
20
10

0
7
14
21
28
35
42
49
56
63
70
77
84
91
98
105
112
119
126
133
140
147
154

0

t

Рис. 3.10. Функционирование сети с двумя неравными приемниками
(ресурс в нейтральной вершине v5)

Возникает естественный вопрос: существует ли такое значение
пропускной способности r12, при котором получается сеть, где оба
приемника стали бы потенциальными аттракторами, как это было в
примерах 3.6, 3.7?
Общая задача заключается в нахождении критерия
аттрактивности. Сформулировать ее можно следующим образом:
можно ли априорно, не рассчитывая предельное состояние, узнать,
какие из вершин являются аттракторами. Можно ли найти
необходимые и достаточные условия аттрактивности вершины?
Кроме того, во всех рассмотренных примерах предельное
состояние существует, и определения аттракторов даны в
предположении, что процесс функционирования несимметричной
регулярной сети всегда сходится.
100

Исследованию поведения несимметричных регулярных сетей,
в том числе доказательству существования предельного состояния
при больших ресурсах, определению критерия аттрактивности и
нахождению условия существования нескольких аттракторов
посвящена глава 4.

Комментарий к главе 3
Глава 3, как и последующая глава 4, посвящена регулярным
несимметричным сетям. В отличие от однородных сетей вершины
здесь неравноправны, что проявляется в различиях их входных и
выходных пропускных способностей. Эти различия порождают три
типа вершин: источники (отдают больше, чем получают),
приемники (получают больше, чем отдают) и нейтральные вершины
(получают и отдают одинаково). Такие типы вершин можно назвать
статическими, поскольку они определяются непосредственно из
матрицы пропускных способностей и не зависят от начальных
состояний и величины ресурса. Более сложным для определения –
но крайне важным для описания динамики процессов и предельного
состояния – оказывается свойство вершины, названное
аттрактивностью. Аттрактор – это вершина, способная при
подходящем начальном состоянии и достаточном суммарном
ресурсе в сети оказаться в зоне Z+*.
Что касается динамики функционирования регулярных
несимметричных сетей, то она окончательно прояснится в гл. 4,
однако общие ее контуры видны уже здесь.
Общая схема динамики похожа на динамику однородных
сетей: по-прежнему существуют зоны Z– и Z+, а также порог ресурса
T. В зоне Z– все вершины функционируют по правилу 2; при
превышении порога хотя бы одна вершина переходит на правило 1.
При малом ресурсе1 поведение регулярных сетей описывается
регулярной цепью Маркова (теорема 3.1). Заметим, что п.1 теоремы
2.1 – это частный случай теоремы 3.1, поскольку для полной
однородной сети с n вершинами все элементы матрицы R'
1
одинаковы и равны 𝑛.
Однако содержание этой схемы для несимметричных сетей
радикально отличается. Принципиальные отличия от однородных
сетей – следующие.
1. В однородных сетях все вершины нейтральны и имеют
1

Это понятие будет окончательно уточнено в гл. 4.
101

одинаковые шансы оказаться в зоне Z+* – всё зависит от начального
состояния и величины ресурса. В несимметричных сетях источники
не имеют этого шанса ни при каких обстоятельствах: даже если в
Q(0) все вершины находятся в Z+(0) (в однородных сетях такое
состояние было бы устойчивым), источники, начиная с некоторого t,
навсегда перейдут в Z–. Таким образом, судьба источников
однозначно определена их внутренними свойствами; от внешних
обстоятельств зависит разве что время t перехода в Z–(t). Судьба
других вершин может сложиться по-разному. Нейтральные
вершины, находящиеся в эйлеровой компоненте, могут быть
пассивными аттракторами (они остаются в Z+, только если они были
в ней в начальном состоянии). Активными аттракторами, т.е.
вершинами, способными перейти из Z– в Z+*, могут быть только
приемники, и притом не все и не всегда. Узнать, является ли
вершина аттрактором, по матрице пропускных способностей,
нельзя. Встает задача нахождения признаков аттрактивности
вершины, которая будет решаться в последующих главах.
2. Для несимметричных сетей Т < rsum; при этом его величина
для разных несимметричных сетей разная, и через пропускные
способности она не выражается. Определенное представление о
величине Т дает коэффициент  симметричности сети (п. 3.5): чем
сильнее разница в пропускных способностях вершин, тем меньше ,
т.е. тем дальше Т от rsum.
Отдельно следует сказать вот о чем. Ресурсная сеть – это
детерминированная модель, поэтому использование для ее
исследования аппарата цепей Маркова, который прочно
ассоциируется с вероятностными задачами, может показаться
неестественным. Однако применение этого аппарата при решении
детерминированных задач в литературе давно известно (см.,
например, п. 5.8 в книге [52]). Естественность его применения для
анализа ресурсных сетей особенно ясно видна при рассмотрении
случая W = 1 (п. 3.1), в котором доли ресурса, распределяемые по
вершинам в каждом состоянии Q1(t), математически можно
интерпретировать как вероятности получения всего ресурса каждой
вершиной в этот момент.

102

ГЛАВА 4. ПОТОКИ И ПРЕДЕЛЬНЫЕ
СОСТОЯНИЯ В РЕГУЛЯРНЫХ
НЕСИММЕТРИЧНЫХ СЕТЯХ,
в которой:
• Находится поток в регулярных сетях при W  T. Доказывается теорема
о существовании и единственности предельного потока в
несимметричных сетях при W > T; находятся матрица и векторы
предельного потока при любом суммарном ресурсе сети. Как следствие
из существования предельного потока, доказывается существование
предельного состояния.
• Показывается, что все потенциальные аттракторы при W = T в
предельном состоянии имеют ресурс, равный своей выходной
пропускной способности. Остальные вершины в предельном состоянии
имеют ресурс, строго меньший выходной пропускной способности при
любом W > T, даже если это вершины-приемники.
• Формулируется и доказывается критерий аттрактивности вершины.
• Пороговое значение Т выражается через компоненты вектора
предельных вероятностей соответствующей цепи Маркова Q1* и
выходные пропускные способности вершины-аттрактора.
• Доказывается, что в сети с одним аттрактором предельное состояние
при любом значении суммарного ресурса определяется единственным
образом и не зависит от начального состояния. В сетях с несколькими
аттракторами предельное состояние определено с точностью до
распределения излишка ресурса W – T между аттракторами.
• Вводятся классы эквивалентности на множестве матриц пропускной
способности размера n  n. Показывается, что в любом классе
эквивалентности [Ri'] существует матрица, задающая сеть с любым
произвольно заданным множеством аттракторов. Предлагается метод
построения таких матриц по стохастической матрице Ri'.
• Для полной сети с одним приемником, одним источником и
однородными пропускными способностями всех ребер, кроме ребра,
соединяющего источник с приемником, выводятся формулы компонент
вектора предельного состояния и порогового значения Т. Для таких
сетей все их предельные характеристики находятся в явном виде, как
это было в случае полных однородных сетей.

4.1. Поток ресурса
При больших ресурсах для доказательства сходимости в общем
случае недостаточно рассмотрения последовательности векторов
состояний сети, как это было сделано при малых ресурсах, –
система перестает описываться однородной цепью Маркова. Так как
количество ресурса превышает пороговое значение Т, в сети
появляются вершины, функционирующие по разным правилам. При
этом вершины, функционирующие по правилу 1, отдают на каждом
103

такте постоянное количество ресурса; ресурс, исходящий из
остальных вершин, изменяется. Для исследования поведения сетей
при
больших
ресурсах
необходимы
дополнительные
характеристики.
4.1.1. Поток при малых ресурсах
Если W  Т, вся сеть при достаточно больших t (t > t')
функционирует по правилу 2, и ресурс в вершинах состоит только
из вновь пришедшего, т.е. входного потока: Q(t) = F in (t ) .
С другой стороны, по правилу 2 вершины отдают весь свой
ресурс, значит, на этом же такте t выходной поток совпадет с
вектором состояния: F out (t ) = Q(t). Из теорем 3.1 и 3.3 следует, что
предел Q(t) при W  Т существует и равен Q*. Тогда пределы
lim F in (t ) и lim F out (t ) тоже существуют. Таким образом, при
t →

t →

функционировании всей сети по правилу 2 выполняется:
Fin* = Fout* = Q*.
*
= W.
f sum

Вектор предельного состояния для W = Т обозначим через
~ ~
~
~
Q = (q1, ..., q~n ) , потоки через F in и F out . Тогда
~ ~
~
~
F in = F out = Q ; f sum = Т.

4.1.2. Поток при больших ресурсах
Рассмотрим функционирование сети при W > Т. В зависимости от
начального состояния поток в сети может изменяться как
монотонно, так и немонотонно. Приведенные ниже примеры
иллюстрируют различное изменение потока для одной и той же
матрицы пропускных способностей R из примера 3.5 (глава 3) в
зависимости от начального состояния.

104

П р и м е р 4.1.

1

1
R = 3

1
1


1
1
1
2
1

1
1
1
1
1

1
1
1
1
1

1

1
1 .

1
1

Для этой матрицы Т  21,204.
Рассмотрим динамику суммарного потока сети для
Q(0) = (100, 0, 0, 0, 0) (рис. 4.1). Он монотонно возрастает. (Поток
считается, как сумма входных потоков, поэтому график начинается
с первого такта, а не с нулевого).

Рис. 4.1. Динамика суммарного потока в сети.
Начальное состояние Q(0)=(100, 0, 0, 0, 0)

Горизонтальной линией обозначена асимптота – предельная
величина потока.
Если переместить ресурс в любую другую вершину, поток
начнет изменяться немонотонно. Так, при начальном состоянии
Q(0) = (0, 100, 0, 0, 0) поток будет возрастать, затем следует фаза
стабилизации, после которой поток уменьшается и продолжает
убывать, стремясь к предельному значению сверху (рис. 4.2).
105

Рис. 4.2. Динамика суммарного потока в сети.
Начальное состояние Q(0)=(0, 100, 0, 0, 0)

Длинное плато соответствует процессу перераспределения
ресурса между первой и второй вершиной. В это время и вершина
v1, и вершина v2 функционируют по правилу 1. Резкое уменьшение
потока происходит в момент перехода вершины v2 с правила 1 на
правило 2. После чего наступает окончательная стабилизация
потока.
Если ресурс поместить в вершину v3, поведение сети будет
еще сложнее – у потока окажется две зоны стабилизации (рис. 4.3).

106

Рис. 4.3. Динамика суммарного потока в сети. Начальное состояние
Q(0) = (0, 0, 100, 0, 0). (Ось Ох сдвинута на 5 единиц вверх)

Рассмотрим невозрастающий поток для той же сети. В
начальном состоянии каждая вершина имеет ресурс, больший ее
выходной пропускной способности.

Рис. 4.4. Динамика потока в сети. Начальное состояние
Q(0) = (20, 20, 20, 20, 20). (Ось Ох сдвинута на 15 единиц вверх)
107

Первые семь тактов поток равен пропускной способности сети
rsum, затем он начинает убывать, проходя еще три промежуточных
зоны стабилизации. Первая стабилизация (fsum = rsum) соответствует
периоду, когда каждая вершина функционирует по правилу 1.
Начиная с восьмого такта, вершина v3, отдавая больше остальных,
первая переходит на правило 2, и поток уменьшается. Самое
длинное плато соответствует периоду, когда ресурс вершин v3, …, v5
стабилизировался, и перераспределение происходит только между
двумя приемниками: первый забирает излишки ресурса у второго.
Потоки в каждой вершине представлены на рис. 4.5.

Рис. 4.5. Динамика входного потока в вершинах сети. Начальное
состояние Q(0)=(20, 20, 20, 20, 20). (Ось Ох сдвинута на 3 единицы вверх)

Изменение ресурса в вершинах, соответствующее потокам на
рис. 4.4, 4.5, представлено на рис. 4.6.

108

v1

v2

Рис. 4.6. Динамика ресурса в вершинах. Начальное состояние
Q(0) = (20, 20, 20, 20, 20)

Векторы предельного потока в вершинах равны:
Fin* = Fout* = (5, 4,537, 3,889, 3,889, 3,889),
а
суммарный
~
поток f sum = 21.204.
Рассмотренные примеры показывают, что поведение потока
при W > T зависит от начального состояния и может сильно
различаться. Однако некоторые закономерности очевидны.
1. Если поток возрастает, то только с начальной фазы. Переход
с убывания на возрастание невозможен. В самом деле, если поток
убывает, это означает, что некоторый поток на каждом такте остается
в вершинах-аттракторах в виде накапливаемого ресурса. Аттракторы
же накапливают ресурс, только находясь в зоне Z+(t), т.е., отдавая на
каждом такте по полной выходной пропускной способности. Таким
образом, поток из аттракторов увеличиться уже не может; а ресурс в
других вершинах не возрастает. При этом суммарный поток тоже не
может возрастать.
2. При функционировании сети возможна промежуточная
стабилизация потока.
3. Поток уменьшается всякий раз, когда очередная вершина
не-аттрактор переходит в зону Z–(t).
4. При t →  поток стремится к предельному состоянию.
109

5. Предельный поток во всех примерах одинаков, причем,
~
f sum = T.
Протоколы работы сети показывают, что в первой вершине,
являющейся аттрактором, выходной поток стремится к выходной
пропускной способности: f1out* → 5 = r1out (см. рис. 4.5).
Из доказательства теоремы 3.3 о существовании порогового
значения Т следует, что при W = Т хотя бы одна вершина будет
иметь ресурс, равный своей выходной пропускной способности:
~
q~i = riout . Пусть, как и прежде, Q = (q~1, q~2 ,..., q~n ) – вектор
предельного состояния для W = Т. Введем в сети такую нумерацию
вершин, при которой q~i = riout выполняется для первых l вершин (l
~
≥ 1). Тогда: Q = (r out ,..., r out , q~ ,..., q~ ) .
1

l

l +1

n

Т е о р е м а 4.1. В регулярной несимметричной сети для
W > T и любого начального состояния предельный поток
существует, причем существует такая нумерация вершин, что
матрица предельного потока F* имеет вид:
 r11

...

 r
 ~ l1
*
F =  ql +1 r
 r out l +1,1
 l +1
 ~ ...
 qn rn1
 r out
 n

r12

...

...
rl 2

...
...

q~l +1
rl +1, 2
rlout
+1
...
q~n
rn 2
rnout

...
...
...



...


rl n

q~l +1
rl +1,n  ,

rlout
+1

...

q~n
rnn 
rnout

r1n

где первые l вершин имеют при W = T ресурс, равный своей
выходной пропускной способности.
Д о к а з а т е л ь с т в о. Из теорем 3.1 и 3.3 следует, что при
W = T предельное состояние существует. Тогда существует и
предельный поток, и матрица потока при W = T в предельном
состоянии будет следующей:

110

 r11

...

 r
l1

~  q~l +1
F=
r
 r out l +1,1
l +1

 ~ ...
 qn rn1
 r out
 n

r12

...

...
rl 2

...
...

q~l +1
rl +1, 2
rlout
+1
...
q~n
rn 2
rnout

...
...
...



...

rl n 

q~l +1
rl +1,n 

rlout
+1

...

q~n
rn 2 
rnout

r1n

(4.1)

Поскольку у каждой вершины в предельном состоянии
входной поток равен выходному, для каждого i сумма i-й строки
матрицы (4.1) равна сумме i-го столбца. Вектор-столбец выходного
потока равен:

(

~
F out = r1out ,..., rlout , q~l +1 ,..., q~n

)

T

(4.2)

Пусть ресурс W > T в начальный момент времени имеет
распределение Q(0) = (q1(0), q2(0), …, qn(0)). Введем коэффициент
пропорциональности:
T
α=
< 1,
W
и
рассмотрим
вектор
начального
состояния
QT(0) = (αq1(0), αq2(0), …, αqn(0)) для суммарного ресурса W = Т. Для
такого начального состояния предельное состояние существует и
~
единственно. Предельный поток описывается матрицей F ,
определенной в (4.1). Векторы входного и выходного потоков
совпадают с вектором предельного состояния (4.2):

( )

~
~
F in = F out

T

~
= Q = (r1out ,..., rlout , q~l +1 ,..., q~n ) .

По построению вектора QT(0) поток FT(t) на каждом такте не
может превосходить поток F(t) для Q(0) (W > T):
F(t) ≥ FT(t).

(4.3)

111

Докажем, что в (4.3) при t → ∞ достигается равенство, и
предельные потоки при W > T и при W = T совпадают.
Для первых l вершин доказательство очевидно: поток
максимален – он равен суммарной выходной пропускной
способности этих вершин.
Предположим, что при t → ∞ и W > T выходной поток
вершины vi (i > l) больше q~i на величину f(t). Тогда матрица потока
будет иметь вид:

r11


r21


...

rl1


f l +1,1 (t )

F (t ) = 
...

  q~i

  out + f (t ) ri1

  ri

...


f n1 (t )


r12
r22
...
rl 2

...
...
...
...

f l +1, 2 (t )

...

...
...
 q~i

 out + f (t ) ri 2 ...
r

 i

...
...
f n 2 (t )

...








f l +1, n (t )

...

...

 q~i
 
 out + f (t ) rin 
r

 i
 

...

...

f nn (t )

r1n
r2 n
...
rl n

Поскольку сеть связна и регулярна, в строке с номером i
найдется по крайней мере один элемент, не равный нулю (помимо
диагонального).
Если среди ненулевых элементов i-й строки есть элемент с
номером k ≤ l, рассмотрим входной и выходной потоки вершины
vk. Суммарный выходной ее поток равен rkout , а входной поток
строго больше, так как эта вершина получает из вершины vi ресурс
 q~i

 out + f (t ) rik , больший, чем при W = T, а из остальных – не
r

 i

меньший. Таким образом, вершина vk получает больше ресурса, чем
отдает, и в ней происходит накопление. Величина приращения
ресурса в ней не менее, чем f(t)rik. Если это значение ограничено
снизу, накопление в вершине vk будет происходить бесконечно, что
противоречит конечности ресурса W. Поэтому, f(t)rik → 0 при
112

t → ∞, а следовательно и f(t) → 0, и все элементы i-й строки
~
матрицы F(t) стремятся к соответствующим элементом матрицы F .
Таким образом, если вершина vi имеет исходящее ребро хотя бы в
одну из l первых вершин, ее суммарный выходной поток при t → ∞
не сможет превысить поток при W = Т, т.е. величину q~i .
Пусть вершина vi не имеет исходящих ребер ни в одну из l
первых вершин. Тогда i-я строка матрицы потока имеет l первых
нулей.
 r11


 ...

 rl1
 f (t )
 l +1,1
F (t ) =  ...


 0



 ...
 f (t )
 n1

r12

...

r1l

r1,l +1

...

...
...
f l +1, 2 (t ) ...
...
...

...
rll

...

...
...
...
...

...
rl 2

f l +1,l (t )
...

0

...

0

...
f n 2 (t )

...
...

...
f nl (t )

rl ,l +1
f l +1,l +1 (t )
...

 q~i



 r out + f (t ) ri ,l +1 ...
 i

...
f n,l +1 (t )

...
...





...

rl n


f l +1,n (t )


...

~
 qi
 

rin 
+

f
(
t
)
 r out
 
 i



...


f nn (t )

r1n

Пусть rim > 0, m > l. Рассмотрим вершину vm. Ее входной поток
строго больше, чем при W = Т, так как поток в ребре (vi, vm):
 q~i

q~

rim > i rim . Поскольку m > l, вершина vm при W = Т в
+

f
(
t
)
 r out

riout
 i

предельном состоянии имеет ресурс, меньший своей выходной
пропускной способности, и функционирует по правилу 2, т.е. отдает
весь приходящий к ней ресурс, а это означает, что ее выходной
поток также увеличится. Если вершина vm имеет исходящее ребро
хотя бы в одну вершину vk (k ≤ l), то, применяя предыдущие
рассуждения, легко показать, что vk будет получать из нее больше,
чем отдавать, до тех пор, пока ее ресурс и, соответственно,
выходной поток, не достигнет величины q~m . Ресурс (и поток)
вершины vi в этом случае будет стремиться сверху к величине q~ .
i

113

Поскольку сеть регулярна, ее граф сильно связен; поэтому из
вершины vi всегда существует путь до вершины vk (k ≤ l). Если этот
путь длиннее, чем 2, и равен J, применим аналогичные рассуждения
J – 1 раз. Получим, что потоки из всех вершин, принадлежащих
этому пути, при t → ∞ не могут превысить потоков при W = Т: q~i1 ,
q~ , …, q~ . С другой стороны, поскольку W > T, потоки ограничены
i2

iJ

этими величинами снизу. Таким образом, доказаны все утверждения
теоремы. Матрица предельного потока при любом значении ресурса
W > T и его начальном распределении совпадает с матрицей
предельного потока при W = Т. 
Непосредственно из теоремы 4.1 и ее доказательства следует
справедливость ряда важных утверждений.
С л е д с т в и е 4.1. В регулярной несимметричной сети при
любой величине и начальном распределении ресурса W > T
предельное состояние существует.
С л е д с т в и е 4.2. В регулярной несимметричной сети при
любой величине и начальном распределении ресурса W > T величина
суммарного предельного потока равна пороговому значению Т:
*
= Т.
f sum
С л е д с т в и е 4.3. В регулярной несимметричной сети для
любого W > T вектор предельного потока совпадает с вектором
предельного состояния при W = T:
T
~
F in* = F out* = Q = (r out ,..., r out , q~ ,..., q~ ) .

(

)

1

l

l +1

n

С л е д с т в и е 4.4. В регулярной несимметричной сети
вершина является потенциальным аттрактором тогда и только
тогда, когда в предельном состоянии при W = T она имеет ресурс,
равный своей выходной пропускной способности: q~k = rkout .
С л е д с т в и е 4.5. В регулярной несимметричной сети
вершины, имеющие при W = T ресурс, меньший своей выходной
пропускной способности: q~ j  r jout , при любом W > T имеют в
предельном состоянии ресурс, равный q~ , и вектор предельного
j

*

состояния имеет вид: Q

= (r1out

+ q1* ,..., rlout

+ ql* , q~l +1,..., q~n ) , где

qi*  0 – излишки ресурса, распределенные между потенциальными
аттракторами.

l

 qi* = W − T .
i =1

114

С л е д с т в и е 4.6. В регулярной несимметричной сети,
имеющей один аттрактор, при любом W > T предельное состояние
единственно и не зависит от начального распределения ресурса.
С л е д с т в и е 4.7. В предельном случае, когда все вершины
являются потенциальными аттракторами и l = n, предельный

(

)

T

поток существует и F in* = F out* = (r1out ,..., rnout ) .
Если сеть имеет более одного аттрактора, ее предельное
состояние
не
единственно.
Распределение
ресурса
по
потенциальным аттракторам зависит от начального состояния сети.
Ресурс в остальных вершинах в предельном состоянии одинаков для
любого W > T.
Исследование динамики потоков позволяет установить
соответствие между предельным потоком в ресурсных сетях и
максимальным потоком в классической модели Форда –
Фалкерсона, в которой максимальный поток между источником и
стоком равен пропускной способности минимального разреза.
Поскольку в ресурсной сети каждая вершина является и
источником, и стоком, аналогом пропускной способности
n

минимального разреза здесь может служить величина r min =  r jmin ,

(

)

j =1

где для каждой вершины vj величина r jmin = min r jin , r jout является её
пропускной способностью. Из теоремы 4.1 следует, что для
несимметричной сети предельный поток строго меньше
*
минимального разреза: f sum
= Т < rmin, что является более точной
оценкой, нежели полученная ранее оценка Т < rsum. Однако с другой
стороны, поскольку каждая вершина способна хранить любое
количество ресурса, неустойчивые (промежуточные) потоки могут
превышать rmin и даже достигать значения rsum.

115

4.2. Семейство сетей, соответствующих одной
стохастической матрице
Любой матрице пропускной
единственная матрица R':
 r11 r12

r
r
R =  21 22
... ...

r
 n1 rn 2

способности

 r11
... r1n 
 out

 r1
... r2 n 
 ...
,
R
'
=
... ... 
 rn1

 out

... rnn 
 rn

r12
r1out
...
rn 2
rnout

R

соответствует

r1n 

r1out 
... ...  .
rnn 
... out

rn 

...

С другой стороны, одной стохастической матрице R'
соответствует бесконечное множество матриц пропускных
способностей R, поскольку пропорциональное изменение строк
матрицы R инвариантно относительно R'.
Заметим, что пропорциональное изменение i-й строки
матрицы R соответствует изменению пропускных способностей всех
выходных ребер i-й вершины сети.
Инвариантность
относительно
R'
задает
отношение
эквивалентности на множестве матриц пропускной способности.
Семейство матриц пропускной способности, имеющих одну и ту же
стохастическую матрицу R', обозначим через [R']; [Ri'] , i = 1, 2,… –
классы эквивалентности на множестве матриц пропускной
способности.
Rk ~ Rm  Rk [Ri'] & Rm [Ri'].
Исследуем предельные состояния для различных матриц
пропускной способности, соответствующих одной и той же
стохастической матрице Ri', и влияние изменения суммарной
пропускной способности на пороговое значение Т.
Сначала приведем несколько примеров функционирования
сетей с различными матрицами пропускной способности,
соответствующими одной стохастической матрице. Эти примеры
иллюстрируют влияние выбора матрицы пропускной способности
Rm из заданного семейства [Ri'], на компоненты вектора предельного
состояния, величину порогового значения Т, а также на способность
вершины быть потенциальным аттрактором.
116

Все примеры рассматриваются для семейства
соответствующих стохастической матрице 33:

матриц,

1 1 1


3 3 3
1 4 5
Ri' = 
.
 10 10 10 
1 1 1


3 3 3
П р и м е р 4.2. Матрица пропускной способности:

1 1 1


R1 =  1 4 5  .
 4 4 4



(4.4)

Суммарный ресурс W = 1. Q(0) = (1, 0, 0).

t
0
1
2
3
4
…

Таблица 4.1
Протокол работы сети
v1
v2
v3
1,000
0,333
0,256
0,250
0,250

0,000
0,333
0,356
0,357
0,357

0,000
0,333
0,389
0,393
0,393

Полученное предельное состояние Q1* позволяет построить
матрицу Ri', состоящую из трех одинаковых строк Q1*:

Ri'

 0,25 0,357 0,393 


=  0,25 0,357 0,393 
 0,25 0,357 0,393 



Кортеж  (формула (2.11)) для этой сети будет следующим:
 = ((6, 3), (9, 10), (10, 12)}. Сеть обладает одним приемником и
двумя источниками. Из формулы (3.8) следует, что при увеличении
117

W ресурс будет расти в вершинах пропорционально, пока W не
достигнет порогового значения Т. Далее ресурс во всех неаттракторах стабилизируется, и накопление происходит только в
аттракторе. По теоремам 3.2–3.3 пороговое значение Т достигается,
когда одна из вершин в предельном состоянии получает ресурс,
равный своей выходной пропускной способности. В данном случае
компоненты
вектора
предельного
состояния
растут
пропорционально, пока суммарный ресурс не достигнет значения
W = 12. Рассмотрим функционирование сети при W = 12.
П р и м е р 4.3. Та же матрица пропускной способности (4.4);
Q(0) = (12, 0, 0).
Таблица 4.2
Протокол работы сети
t
v1
v2
v3
0
1
2
3
4
…
38
39
40
…

12,000
10,000
8,433
7,218
6,274

0,000
1,000
1,733
2,304
2,748

0,000
1,000
1,833
2,478
2,978

3,001
3,000
3,000

4,285
4,286
4,286

4,714
4,714
4,714

Как видно из протокола, ресурс в вершине-приемнике в
предельном состоянии достиг значения r1out , равного 3.
При дальнейшем увеличении ресурса приемник переходит на
функционирование по правилу 1, т.е. отдает по полной пропускной
способности в каждое выходное ребро, оставляя излишки себе. Так,
например, для суммарного ресурса W = 100 в этой сети предельное
состояние (с точностью до трех знаков) будет: Q* = (91, 4,286,
4,714).
Таким образом, пороговое значение Т находится как сумма:
Т  3 + 4,286 + 4,714 =12.
4.2.1. Матрицы с большей выходной пропускной
способностью вершин-источников
Исследуем изменение вектора предельного состояния для матрицы
R2 из того же семейства [Ri'], которая отличается от R1
118

пропорциональным увеличением всех пропускных способностей
одного из источников.
П р и м е р 4.4. Третья строка матрицы R2 отличается от
третьей строки матрицы (4.4) в пять раз:

1 1 1


R2 =  1 4 5  .
 20 20 20 


Суммарный ресурс W = 1. Q(0) = (1, 0, 0).
Протокол работы программы для суммарного ресурса W = 1
полностью совпадает с протоколом примера 4.2.

t
0
1
2
3
4
…

Таблица 4.3
Протокол работы сети
v1
v2
v3
1,000
0,333
0,256
0,250
0,250

0,000
0,333
0,356
0,357
0,357

0,000
0,333
0,389
0,393
0,393

Пороговое значение T для такой сети также равно 12.
Таким образом, видно, что
в семействе [Ri'] при
пропорциональном
увеличении
выходных
пропускных
способностей источников: 1) вектор предельного состояния Q1* ,
соответствующий W = 1, остается неизменным, 2) пороговое
значение Т остается постоянным, и при его превышении ресурс во
всех вершинах не-аттракторах в предельном состоянии не
изменяется для любого W > T.
Доказательство этого утверждения для произвольного
семейства будет представлено в разделе 4.3.
4.2.2. Матрицы с большей выходной пропускной
способностью вершин-приемников
Рассмотрим матрицу R3[Ri'], которая отличается от R3 большей
пропускной способностью приемника. Для этого в матрице (4.4)
начнем пропорционально увеличивать пропускные способности
119

первой вершины. Однако при увеличении выходной пропускной
способности приемника следует обозначить границу, при переходе
которой эта вершина перестанет быть приемником, т.е. начнет
отдавать больше, чем получать.
П р и м е р 4.5.
Выходные
пропускные
способности
приемника матрицы (4.4) увеличены вдвое.

 2 2 2


R3 =  1 4 5  .
 4 4 4


Суммарный ресурс W = 1. Q(0) = (1, 0, 0).
Кортеж  имеет вид:  = ((7, 6), (10, 10), (11, 12)). Первая
вершина осталась приемником, а вторая вершина из источника
превратилась в нейтральную.

t
0
1
2
3
4
…

Таблица 4.4
Протокол работы сети
v1
v2
v3
1,000
0,333
0,256
0,250
0,250

0,000
0,333
0,356
0,357
0,357

0,000
0,333
0,389
0,393
0,393

Как видно, протокол полностью совпал с протоколом из
примеров 4.2, 4.4. Предельное распределение единичного ресурса
оказалось тем же.
Однако пороговое значение, при котором в приемнике
начинает происходить накопление ресурса, и он переходит на
правило 1, изменяется. Суммарная выходная пропускная
способность вершины-приемника увеличилась вдвое. При этом
вдвое увеличивается и пороговое значение Т, и значения ресурсов,
на которых происходит стабилизация остальных вершин.
П р и м е р 4.6. Матрица R3 из примера 4.5; суммарный ресурс
W = 24  Т. Q(0) = (24, 0, 0).
Таблица 4.5
Протокол работы сети
t
v1
v2
v3
120

0
1
2
3
4
…
46
47
…

24,000
20,000
16,867
14,436
12,548

0,000
2,000
3,467
4,609
5,495

0,000
2,000
3,667
4,956
5,956

6,000
6,000

8,572
8,572

9,428
9,428

Т = 6 + 8,572 + 9,428 = 24
Пороговое значение выросло в два раза. Кроме того, для
каждой вершины из примера 4 все компоненты вектора предельного
состояния при W = T возрастают вдвое: 3  2 = 6; 4,286  2 = 8,572;
4,714  2 = 9,428.
4.2.3. Смена сетью вершины-приемника
Матрицу R4[Ri'] снова сконструируем из матрицы R1 (4.4),
увеличив пропускные способности приемника втрое.
П р и м е р 4.7. Приемник в другой вершине.

 3 3 3


R = 1 4 5 .
 4 4 4


Суммарный ресурс W = 1. Q(0) = (1, 0, 0).
Для такой конфигурации сети кортеж  будет:

 =((8, 9), (11, 10), (12, 12)).
Все вершины сети изменили свой статус. Первая из приемника
превратилась в источник, вторая стала приемником, а третья –
нейтральной вершиной.

121

Таблица 4.6
Протокол работы при суммарном ресурсе, равном 1
t
v1
v2
v3
0
1
2
3
4
…

1,000
0,333
0,256
0,250
0,250

0,000
0,333
0,356
0,357
0,357

0,000
0,333
0,389
0,393
0,393

Из этого протокола видно, что вектор Q1* для данной
стохастической матрицы, несмотря на разные матрицы пропускной
способности, ей соответствующие, и на смену статуса вершин,
остается неизменным.
Исследуем поведение этой сети при увеличении суммарного
ресурса.
Увеличение ресурса вплоть до W = 28 влечет за собой
пропорциональное увеличение компонент вектора предельного
состояния. Ресурс, равный 28, оказывается пороговым значением
для такой конфигурации.
П р и м е р 4.8. Матрица пропускной способности R4;
суммарный ресурс W = 28  Т. Q(0) = (28, 0, 0).

t
0
1
2
3
4
5
6
7
8
9
…

Таблица 4.7
Протокол работы сети
v1
v2
v3
28,000
22,000
17,300
13,653
10,822
8,625
7,169
7,011
7,001
7,000

0,000
3,000
5,200
6,913
8,243
9,275
9,952
9,997
10,000
10,000

0,000
3,000
5,500
7,433
8,934
10,100
10,879
10,992
10,999
11,000

Дальнейшее увеличение суммарного ресурса отразится только
на изменении ресурса в вершине 2 (новом приемнике сети). Так, при
суммарном ресурсе, равном 100, предельное состояние будет:
Q*=(7,000, 82,000, 11,000).
122

Предельное значение Т находится из того условия, что в
аттракторе ресурс должен быть равен выходной пропускной
способности, – в данном случае, 10, – и все три ресурса в вершинах
пропорциональны компонентам вектора Q1* .
~
Вектор предельного состояния при W = Т: Q = (q~1, q~2 , q~3 ) .
Тогда имеем:
q~1 = 0,250T;
q~ = 0.357T =10;
2

q~3 =0,393T;
Из второго соотношения имеем: T  28. Тогда: q~1 = 7; q~3 = 11.
Сформулируем ряд утверждений, обобщающих полученные
результаты.

4.3. Вектор Q1* и пороговое значение Т
Т е о р е м а 4.2. Все сети семейства [Ri'] при W = 1 имеют один и
тот же вектор предельного состояния Q1*.
Д о к а з а т е л ь с т в о. Так как матрица Ri' для всех сетей
семейства одинакова, то (Ri') также одинакова. Поскольку
(Ri') = 1Q1*, где 1 – вектор-столбец, состоящий из n единиц, то и
вектор Q1* у всех таких сетей – один и тот же. 
С л е д с т в и е. Для любой матрицы Rm из семейства [Ri']
неизменным будет также определяемый по формуле (2.7) вектор Q*,
соответствующий суммарному ресурсу W, при W  T.
Сформулируем и докажем теорему, позволяющую выразить
пороговое значение Т через выходную пропускную способность
аттрактора и вектор Q1*. Рассмотрим сначала сеть с одним
аттрактором. Не нарушая общности, введем такую нумерацию
вершин, что аттрактор имеет номер 1.
Т е о р е м а 4.3. В несимметричной регулярной сети,
обладающей единственным аттрактором с номером 1:
~
1) компоненты вектора Q = (q~1 , q~2 ,..., q~n ) , соответствующего
суммарному ресурсу W = Т, находятся по формуле:

r out
q~i = 1 1* qi1* ;
q1
123

2) пороговое значение ресурса Т находится как:

T=

r1out
.
q11*

(4.5)

Д о к а з а т е л ь с т в о. При W  T вектор предельного
состояния пропорционален вектору Q1*. Когда суммарный ресурс
достигает значения Т, одна или несколько вершин в предельном
состоянии имеют ресурс, равный своей выходной пропускной
способности. Поскольку аттрактор один, то и такая вершина
единственна (следствие 4.4 из теоремы 4.1). По условию теоремы
она имеет номер 1.
Тогда
(4.6)
q~1 = q11*T = r1out ,

q~i = qi1*T  riout , (i > 1).
Из (4.6) следует: T =

r1out 1*
r1out ~
;
q
=
qi 
i
q11*
q11*

З а м е ч а н и е. Формула (4.5) объясняет пример 4.5: при
пропорциональном увеличении выходной пропускной способности
аттрактора в такой же пропорции увеличивается значение Т.

4.4. Свойство аттрактивности и предельное
состояние сети
Значение Т определяется через параметры аттрактора. По
следствию 4.4 из теоремы 4.1, вершина является потенциальным
аттрактором, если при W = T она имеет в предельном состоянии
ресурс, равный своей выходной пропускной способности. Однако
этот критерий не является конструктивным, так как аттрактор и
пороговое значение определяются друг через друга.
Сформулируем необходимое и достаточное условие того, что
вершина является аттрактором, и условие наличия в сети
нескольких аттракторов.

124

Т е о р е м а 4.4 (о б а т т р а к т о р а х).
Вершина
vj
несимметричной регулярной сети является аттрактором, если и
r out
только если j = arg min i 1* .
i{1,...,n} q
i
Д о к а з а т е л ь с т в о. Для каждой вершины рассмотрим
отношение:
r out
Ti = i 1* , i = 1, …, n.
qi
Поскольку при суммарном ресурсе, равном Т, как минимум
одна вершина в предельном состоянии получит ресурс, равный
своей выходной пропускной способности, для нее выполнится:
q~
r out
q~k = rkout . С другой стороны, q~k = q1k*T , и отсюда T = 1k* = k 1* .
qk
qk
Тогда, по крайней мере, для одной вершины верно: Тk = Т.
Значение Т определяется из того условия, что при увеличении
суммарного ресурса в сети, функционирующей по правилу 2, до
величины Т, некоторая вершина первой из всех получит ресурс,
равный своей выходной пропускной способности.
Таким образом, при W = T:

q~k = rkout ;
q~i  riout , i ≠ k.
Перепишем (4.7) в следующем виде: qi1*T  riout , или T 

(4.7)

riout
qi1*

riout
(i = 1, …, n), а это и означает, что T = min
.
i{1,...,n} q1*
i
Если это минимальное значение достигается сразу в
нескольких вершинах, все они являются потенциальными
аттракторами.

125

Докажем обратное утверждение: если в сети существует
несколько вершин, для которых выполняется равенство q~ j = r jout ,
для всех них

r jout
q1j*

riout
.
i{1,...,n} q1*
i

= T = min

Пусть вершина vl – тот из потенциальных аттракторов, для
riout rlout
которого T = min
Пусть вершина vk – также
= 1* .
i{1,...,n} q1*
ql
i
потенциальный аттрактор. Тогда для нее справедливо: q~ = r out .
k

Найдем значение отношения

rkout
q1k*

k

.

Поскольку при W = T все вершины функционируют по
r out
правилу 2, ресурс вершины vk будет: q~k = Tq1k* = l 1* q1k* .
ql
С другой стороны, как уже было сказано, q~ = r out . Тогда:
k

rkout =

out

rl
q1k* или
ql1*

rkout
q1k*

=

k

out

rl
=T . 
ql1*

З а м е ч а н и е. Непосредственно из доказательства теоремы
следует, что пороговое значение Т находится по формуле
riout
.
T = min
i{1,...,n} q1*
i
Доказанная теорема позволяет найти потенциальные
аттракторы сети по матрицам R и (R'), а также вычислить
пороговое значение Т и координаты вектора предельного состояния
всех не-аттракторов для суммарного ресурса, превышающего
значение Т. Вектор предельного состояния при малых ресурсах был
определен в главе 2.
Обобщим
результаты,
полученные
для
регулярных
несимметричных сетей, в следующую теорему.
Т е о р е м а 4.5 (о п р е д е л ь н о м с о с т о я н и и).
Значения
компонент
вектора
предельного
состояния
*
*
*
регулярной несимметричной ресурсной сети
Q = q1 , ..., qn
зависят от суммарной величины ресурса W и определяются по
следующим формулам:

(

126

)

riout
1 . При W  Т, где T = min
:
i{1, ..., n} q1*
i
о

qi* = qi1*  W
2о. При W > Т
ресурс во
рассчитывается по формуле:
qi* = qi1*  T , i  jk,

(4.8)
всех

не-аттракторах
(4.9)

где jk – номера аттракторов. jk определяются из условия:
r out
jk = arg min i 1* .
i{1, ..., n} q
i
Оставшийся ресурс распределяется между потенциальными
аттракторами.
Таким образом, вектор Q* определяется тремя параметрами:
1) суммарным ресурсом W;
2) любой строкой матрицы предельных вероятностей
стохастической матрицы R' ;
3) суммарными выходными пропускными способностями
потенциальных аттракторов riout .
При W  Т предельное состояние единственно. При W > Т
становится существенным деление вершин на потенциальные
аттракторы и множество остальных вершин. Количество ресурса в
аттракторах в предельном состоянии зависит от его начального
распределения. Все не-аттракторы получают фиксированное
количество ресурса qi* = q~i = qi1*  T .
З а м е ч а н и е . Для нахождения аттрактора, определения
порогового значения Т и координат вектора предельного состояния
Q* нужно предварительно вычислить координаты вектора Q1*, т.е.
их нельзя выразить только через элементы матрицы R. Однако
формулы (4.8)–(4.9) верны для любого ресурса, циркулирующего в
сети, и инвариантны относительно пропорционального изменения
строк матрицы пропускной способности R. Это означает, что, один
раз вычислив вектор Q1* = (q11* , q12* ,..., q1n* ) , не прибегая более к
численным методам, можно получить результаты для семейства
матриц и любого суммарного ресурса в сети.
127

Аналогично теореме о предельном состоянии можно
сформулировать теорему о предельном потоке.
Т е о р е м а 4.6 (о п р е д е л ь н о м п о т о к е).
В
регулярной несимметричной ресурсной сети предельный поток
определен однозначно при любом значении W:
riout
in*
out*
1*
о
1 . При W  Т f i = f i
;
= qi W , где T = min
i{1,...,n} q1*
i
2о. При W > Т f iin* = f iout* = qi1*T .
Теорема о предельном потоке показывает, что поток задан
однозначно для всех значений суммарного ресурса W. Что касается
теоремы о предельных состояниях – если в сети несколько
потенциальных аттракторов, распределение ресурса, равного W – Т
сверх значений r jout
в аттракторах зависит от начального состояния;
k
предельное состояние определяется во всех вершинах, кроме
аттрактивных.

4.5. Построение матрицы R с произвольным
количеством аттракторов по заданной матрице R'
Как было сказано выше, каждой стохастической матрице Ri'
соответствует семейство матриц пропускной способности [Ri'].
Пусть дана некоторая регулярная несимметричная сеть с
матрицей пропускных способностей R и пусть vj – ее аттрактор. Ей
соответствует стохастическая матрица R', задающая семейство [R'].
Пороговое значение Т выражается через параметры аттрактора:
r jout
T = 1* . Рассмотрим вершину vk, не являющуюся аттрактором.
qj
Поскольку пропорциональное изменение любой строки матрицы R
инвариантно относительно R', уменьшим выходные пропускные
способности вершины vk, с тем, чтобы она также стала аттрактором
этой сети. Для vk должно выполниться:
out
rkout r j
= 1* .
q1k*
qj

(4.10)

В (4.10) rkout – переменная величина, поскольку в строке с
номером k все значения должны пропорционально измениться.
Остальные значения – константы. Отсюда имеем:
128

rkout =

q1k* out
rj .
q1j*
(4.11)

З а м е ч а н и е. Обратное преобразование: увеличение
выходной пропускной способности вершины vj (если она являлась
единственным аттрактором), может не дать желаемого эффекта, так
как vj может утратить при этом статус аттрактора.
После преобразования k-й строки матрицы R в соответствии с
(4.11), для аттракторов vj и vk выполнится соотношение:

rkout q1k*
=
,
r jout q1j*

(4.12)

т.е. выходные пропускные способности вершин-аттракторов
должны относиться как их компоненты вектора предельного
состояния при единичном (или любом малом) ресурсе.
П р и м е р 4.9. Рассмотрим сеть с двумя приемниками, оба из
которых являются потенциальными аттракторами. Сеть содержит
пять вершин. Ее матрица пропускных способностей и
стохастическая матрица имеют вид:

1

1
R = 6

1
1


1
1
1
6
1

1
1
1
1
1

1
1
1
1
1

1
 0,2


1
 0,2

1 , R ' =  0,6


1
 0,1
 0,2

1


0,2 0,2 0,2 0,2 

0,2 0,2 0,2 0,2 
0,1 0,1 0,1 0,1  .

0,6 0,1 0,1 0,1 
0,2 0,2 0,2 0,2 

В этой сети предельное состояние для W = 1 будет:
1 1 1 1 1
Q1* =  , , , ,  ,  = ((10, 5), (10, 5), (5, 10), (5, 10), (5, 5)).
4 4 6 6 6
T = 20.
Равенства (4.10) – (4.12) выполняются для вершин v1 и v2, в
силу построения матрицы R. Однако, поскольку компоненты
вектора Q1* могут быть вычислены точно, есть возможность,
варьируя выходные пропускные способности вершин (и оставаясь в
129

рамках семейства [R']), добиться того, что в сети появится еще один
аттрактор – предположим, это будет нейтральная вершина v5. Для
этого нужно уменьшить ее выходные пропускные способности,
чтобы выполнились (4.11).
1 1
10
.
r5out = :  5 =
6 4
3
Таким образом, в сети, заданной матрицей:

1

1

R =6
1
2

3

1
1
1
6
2
3

1
1
1
1
2
3

1
1
1
1
2
3

1

1
1

1
2

3

имеется уже три потенциальных аттрактора. Продолжая эти
рассуждения, легко заметить, что для вершин-источников v3 и v4 и
коэффициент пропорциональности тот же, и сеть с матрицей (4.13)
имеет пять потенциальных аттракторов.
1

1
2

R=
1

3
 2
3

1
1
1
3
2
2
3

1
1
1
3
1
3
2
3

1
1
1
3
1
3
2
3

1

1
1
3
1

3
2

3

(4.13)

Заметим, что у матрицы (4.13) для любой вершины
rkout
выполнится:
что
и
является
критерием
= 20 = T ,
q1k*
аттрактивности. В такой сети предельное состояние полностью
зависит от начального. Чтобы привести дробные пропускные
способности к целым, каждую строку матрицы умножим на 3:

130

3

3
R =6

1
2


3
3
1
6
2

3
3
1
1
2

3
3
1
1
2

3

3
1 .

1
2 

Сеть с такой матрицей также будет
потенциальных аттракторов. Ее кортеж  имеет вид:

иметь

пять

 = ((15, 15), (15, 15), (10, 10), (10, 10), (10, 10)).
Для матрицы (4.13) этот кортеж будет, соответственно, иметь
элементы,
в
три
раза
меньшие:

 10 10   10 10   10 10  
 =  (5,5), (5,5),  , ,  , ,  ,   .
 3 3   3 3   3 3 

В сети, в которой все вершины являются аттракторами, не
может быть источников. (Источники по теореме 3.1 обязаны
перейти в зону Z–(t) при сколь угодно большом суммарном ресурсе,
циркулирующем в сети, что противоречит определению аттрактора).
Следовательно, не может быть и приемников. Поэтому все вершины
могут быть только нейтральными (что и видно из приведенного
примера). Сети, в которых для каждой вершины входная пропускная
способность равна выходной пропускной способности, как уже
было сказано (п. 2.4), называются эйлеровыми сетями. Их
рассмотрению посвящена следующая глава.

4.6. Оценка числа сетей с неединственным
аттрактором
Рассмотрим
семейство
матриц
[R']nn,
соответствующих
стохастической матрице R'. Пусть матрица R  [R'] имеет
единственный аттрактор vj. Зафиксируем все строки этой матрицы,
кроме строки с номером k  j. Будем пропорционально изменять
элементы выделенной строки, так что суммарная пропускная
 q1* out 
out
способность rk пробегает значения на полуинтервале  1k* r j ,  

 q j

131

. Из формулы (4.11) следует, что при rkout 

q1k* out
r j вершина vj
q1j*

q1k* out
r j vj
q1j*
– единственный аттрактор, и только в одной точке (в левом конце
указанного полуинтервала) сеть будет иметь два аттрактора.
Таким образом, при фиксированной строке j матрицы R,
соответствующей аттрактору, пропорциональное изменение любого
подмножества других строк даст одну сеть с произвольным
множеством вершин-аттракторов, включающим в себя вершину vj, и
континуум сетей с единственным аттрактором vj. Следовательно,
перестанет быть аттрактором. При любом значении rkout 

для фиксированной вершины vj существует

n −1

 Cni −1 = 2 n −1

матриц,

i =1

задающих сети с более чем одним потенциальным аттрактором и
континуум матриц с единственным аттрактором. Отсюда следует,
что теорема о предельном состоянии определяет предельное
состояние однозначно почти всегда за исключением указанных
случаев.
Регулярные
несимметричные
сети
с
несколькими
аттракторами функционируют наиболее сложным образом и
представляют собой отдельный объект исследования.

4.7. Полная сеть с одним приемником
и одним источником
Из теоремы о предельном состоянии следует, что в общем случае в
несимметричной сети вектор предельного состояния нельзя
выразить лишь через пропускные способности. Однако для
некоторых частных случаев такую зависимость получить возможно.
Рассмотрим полную однородную сеть с n вершинами и
пропускными способностями r. Результаты для таких сетей,
полученные в [41], были описаны во второй главе. Увеличим
пропускную способность одного ребра в  раз ( > 1). Поскольку
граф полный и однородный, выбор ребра может быть
произвольным. Пусть это ребро (v2, v1). Тогда r21 = r, rij = r (i  2,
j  1), и вершина v2 становится источником.
Для n = 5 сеть представлена на рис. 4.7.

132

r

источник

v2

r r

r

r
r

r

r

v1

приемник

r

r
r

r

v3
r r

r r
r
r

r
r

r r

r
r

v5

r

v4

r

Рис. 4.7. Полная сеть с одним источником и одним приемником

В такой сети для всех вершин, кроме вершины-источника,
n

riout =  rij = rn . Для источника выходная пропускная способность
j =1

n

будет: r1out =  rij = r (n +  − 1) .
j =1

((

)(

) (

))

Кортеж  = r1in ; r1out , r2in ; r2out ,... rnin ; rnout для этой сети будет
иметь вид:  = ((r(n +  – 1), rn), (rn, r(n +  – 1)), (rn, rn),…(rn, rn)).
Теорема 4.7 позволяет вычислить значение Т при больших
ресурсах, используя только знание о пропускных способностях сети
(для предельного состояния кроме этого необходимо знать
суммарный ресурс).
Т е о р е м а 4.7. В полной сети с пропускными способностями
r21 = r, rij = r (i  2, j  1), где  > 1:

n 2 + (n + 1)( − 1)
1) T = rn
,
n + 2( − 1)
2)
для
любого
начального
состояния
Q(0) = (q1(0), q2(0), …, qn(0)) при W > T предельное состояние имеет
вид:
Q*=(W – (n – 1)q*, q*,… q*),
133

где q* = rn

n + ( − 1)
.
n + 2( − 1)

Вектор предельного состояния при малых ресурсах находится
по теореме 4.8.
Т е о р е м а 4.8. В полной сети с пропускными способностями
r21 = r, rij = r (i  2, j  1),  > 1, для любого начального состояния
Q(0) = (q1(0), q2(0), …, qn(0)) при W  T процесс распределения
ресурса сходится, и предельное состояние Q*=(q1*, q*,…, q*)
описывается формулами:
n + ( − 1)
q* = W 2
;
(4.14)
n + (n + 1)( − 1)
q1* = W

n + 2( − 1)
.
n + (n + 1)( − 1)
2

С л е д с т в и е. При W = T предельное состояние в сети будет
Q*=(rn, q*,…, q*), где q* вычисляется по формуле (4.14).
В доказательствах теорем 4.7 и 4.8 формулы для компонент
вектора предельного состояния рассчитываются как суммы
бесконечно убывающих геометрических прогрессий: отдельно для
источника и нейтральных вершин и отдельно для вершиныприемника. Полностью доказательства этих двух теорем и
вспомогательных утверждений опубликованы в [27].

Комментарий к главе 4
В главе 4 исследовано поведение несимметричных регулярных
сетей для больших ресурсов, т.е. для случая W > T. В результате
картина их динамики окончательно проясняется. Даны ответы
практически на все вопросы для этого класса, сформулированные в
терминах базовых понятий предлагаемой теории:
• доказано существование предельного потока и предельного
состояния, причем показано, что в сети с одним
аттрактором предельное состояние при любом значении
суммарного ресурса и не зависит от начального состояния;
• найдена формула для вычисления Т (теорема 4.3);
• предложен конструктивный критерий аттрактивности
(теорема 4.4);
134

• найдены формулы для значений всех не-аттракторов в
предельном состоянии;
• найдены формулы для предельного потока.
Очень важную роль в получении этих результатов играет
исследование поведения сети при W = T, т.е. получение вектора
~ ~
~
Q = (q
1 ,..., qn ) , поскольку все описанные формулы выражаются в
конечном счете через координаты этого вектора. Пожалуй, самый
впечатляющий вывод заключается в том, что при W > T все излишки
W – T достаются аттракторам; остальные не получают ничего, их
состояния – такие же, как и при W = T.
Если в сети имеется только один аттрактор (а в п. 4.6 показано,
что это бывает почти всегда в точном математическом смысле), то,
зная значения остальных вершин в предельном состоянии, легко
вычислить и его значение. Если же аттракторов несколько, то
излишек ресурса распределится между ними. Ответ на то, как
вычислить конкретное распределение этого излишка, частично
будет дан в главе 8. Заметим, что возможен случай, когда все
вершины – аттракторы. Но в такой сети не может быть источников,
а, следовательно, и приемников, т.е. все вершины обязаны стать
нейтральными.
Среди промежуточных наблюдений отдельный интерес
представляет нетривиальная динамика суммарного потока.
Предельный суммарный поток равен Т, однако на некоторых
временных интервалах он может превышать эту величину, и вообще
изменяться немонотонно, а также временно стабилизироваться.

135

ГЛАВА 5. РЕГУЛЯРНЫЕ ЭЙЛЕРОВЫ СЕТИ,
в которой:
• Описываются свойства регулярных эйлеровых сетей, не присущие
другим классам сетей.
• Находятся формулы, выражающие пороговое значение Т и компоненты
вектора предельного состояния при W = 1 и W = T только через
элементы матрицы R.
• Доказывается существование предельного состояния при любом
суммарном ресурсе.
• Формулируется и доказывается критерий стабильности зоны Z+(t), когда
все вершины, принадлежащие зоне Z+(0), оказываются в зоне Z+*, т.е.
Z+(0) = Z+*.
• Выводятся формулы, описывающие динамику потока при произвольном
начальном состоянии и формулы предельных потоков.
• При W > T для начальных состояний, в которых вершины из Z–(0) не
содержат ресурса, и зона Z+(t) стабильна, находится предельное
состояние. Оно выражается только через элементы матрицы R и
производные от них величины.
• При W > T для любого начального состояния, сохраняющего
стабильную
зону
Z+(t),
находится
предельное
состояние,
выражающееся через предыдущее и начальные дефициты вершин,
принадлежащих зоне Z–(0).
• Задается рекурсивный алгоритм, позволяющий находить предельное
состояние по произвольному начальному состоянию при W > T.
• Формулируется и доказывается теорема о предельном состоянии в
эйлеровой сети для любого начального состояния при W > T.

По определению в эйлеровых сетях для каждой вершины
выполняется равенство riin = riout , и, следовательно, все вершины
нейтральны. Если при этом матрица пропускных способностей
симметрична, эйлерова сеть называется симметричной, если нет,
квазисимметричной. Если все ненулевые элементы матрицы
пропускных способностей одинаковы, сеть однородна. Эти сети
объединены в один класс, поскольку обладают общими свойствами,
заключающимися не только в равенстве входных и выходных
пропускных способностей в каждой вершине.
Эйлеровы сети, как показано в главе 2, могут быть только
эргодическими (регулярными или циклическими). В настоящей
главе мы будем рассматривать регулярные эйлеровы сети.
Все они демонстрируют одинаковое поведение, как при
малых, так и при больших ресурсах. В настоящей главе мы
покажем, что все основные характеристики сетей, такие как
136

предельные состояния, предельные потоки, пороговое значение Т,
для сетей этого класса одинаковы.

5.1. Существование предельного состояния
и пороговое значение Т
При доказательстве существования предельного состояния в сетях
для W  Т использовалось только свойство регулярности сети.
Поэтому при малых ресурсах предельное состояние в эйлеровых
сетях существует и единственно. Найдем пороговое значение Т и
рассмотрим функционирование эйлеровых сетей с ресурсом выше
порогового значения.
Т е о р е м а 5.1. В регулярной эйлеровой сети пороговое
значение Т равно ее суммарной пропускной способности: Т = rsum.
Д о к а з а т е л ь с т в о.
Очевидно,
что
Т ≤ rsum.
Предположим, что выполняется строгое неравенство Т < rsum. Тогда
по определению Т существует такое значение ресурса W: Т < W <
rsum, что при суммарном ресурсе в сети, равном W, в предельном
состоянии по крайней мере одна вершина будет отдавать ресурс по
правилу 1, т.е. для нее выполнится: qi*  riout , и она отдает на
каждом такте ресурс, равный riout . А поскольку в предельном
состоянии входной и выходной потоки вершин совпадают, вершина
vi на каждом такте принимает тоже riout ресурса. Так как в
эйлеровой сети riin = riout , то по каждому входному ребру в вершину
vi приходит по полной пропускной способности. Таким образом, все
смежные с ней вершины имеют ресурс, не меньший своих
выходных пропускных способностей: r jout . Сеть является связной.
Продолжая подобные рассуждения для каждой вершины, получим,
что все вершины имеют ресурс, не меньший своей выходной
пропускной способности. Отсюда следует, что общий ресурс не
может

быть

меньше

n

 r jout = rsum ,

что

противоречит

j =1

предположению. Полученное противоречие доказывает, что Т = rsum.

С л е д с т в и е 5.1. Непосредственно из доказательства
теоремы вытекает, что для регулярной эйлеровой сети

137

~
~
выполнится: Q = (r1out , ..., rnout ) , где Q – вектор предельного
состояния при W = Т.
С л е д с т в и е 5.2. Если vi  Z–(0), то  t > 0 vi  Z–(t). (Это
означает, что зона Z+(0) в процессе функционирования сети не
может расширяться.)
Д о к а з а т е л ь с т в о. Входной поток некоторой вершины в
эйлеровой сети может превышать выходной, только когда она
находится в зоне Z–(t). Как только ресурс вершины vi  Z–(t)
достигает значения riout , ее выходной поток становится не меньше
входного, и получить ресурс, больший этого значения, она не
может. 
С л е д с т в и е 5.3. В регулярной эйлеровой сети для любого
суммарного ресурса W предельное состояние существует.
Д о к а з а т е л ь с т в о.
Существование
предельного
состояния при W ≤ T следует из того, что сеть регулярна. Из
следствия 5.1 вытекает, что при W = Т предельное состояние сети
~
описывается вектором Q = (r1out , ..., rnout ) . При W > Т входной и
~
выходной потоки ресурса будут стремиться к вектору Q : Fin* = Fout*
~
= Q . Доказательство этого равенства совпадает с доказательством
аналогичного утверждения для несимметричных сетей (теорема 4.1
и следствия из нее). Поскольку существуют предельные потоки,
предельное состояние тоже существует. 
С л е д с т в и е 5.4. Если суммарный ресурс в регулярной
эйлеровой сети больше порогового значения: W > Т, то для каждой
вершины из зоны Z–(0) в предельном состоянии выполнится:
qk* = rkout .
Д о к а з а т е л ь с т в о этого следствия очевидно. Количество
ресурса в каждой вершине при W > Т, не может быть меньше, чем
при W = Т. А при W = Т по следствию 5.1 выполнится
~
Q = (r1out ,..., rnout ) . Таким образом, qk*  rkout . Но вершины из зоны
Z–(0) не могут перейти в зону Z+(t), и таким образом, их ресурс не
может превысить выходную пропускную способность. Отсюда
qk* = rkout для каждой вершины из зоны Z–(0). 

138

5.2. Свойства эйлеровых сетей
В эйлеровых сетях динамика ресурса в вершинах может быть
разнообразной: в вершинах могут возникать затухающие колебания;
ресурс в вершинах может изменяться монотонно и немонотонно.
Исследование функционирования эйлеровых сетей при
больших ресурсах позволяет сформулировать ряд свойств.
В главе 4 (конец п.4.5) было показано, что если в сети все
вершины являются потенциальными аттракторами, то сеть
эйлерова. По теореме 5.1 верно и обратное утверждение,
сформулированное в свойстве 5.1.
С в о й с т в о 5.1. Любая вершина в регулярной эйлеровой
сети является потенциальным аттрактором: при W > rsum существует
такое начальное состояние, из которого она может оказаться в зоне
Z+*.
С в о й с т в о 5.2. Все аттракторы регулярной эйлеровой сети
пассивны: вершина может удержаться в зоне Z+(t), но не может туда
перейти.
С в о й с т в о 5.3. При W > rsum некоторые из вершин,
принадлежащих зоне Z+(0) могут оказаться в
Z–(t) и,
соответственно, в Z*–.
Проиллюстрируем свойство 5.3 следующим примером.
П р и м е р 5.1. Рассмотрим сеть с пятью вершинами (пример
легко обобщается на любое количество вершин). Пусть матрица
пропускных способностей имеет вид:

 1 50 1 1 1 


 1 2 50 1 1 
R =  1 1 3 50 1  .


 1 1 1 4 50 
 50 1 1 1 5 



(5.1)

Кортеж =((54,54), (55, 55), (56, 56), (57, 57), (58,58)).
rsum = 280.
Начальное состояние: Q(0) = (205, 80, 0, 0, 0). W = 285.
Предельное состояние: Q* = (54, 60, 56, 57, 58).
Динамика ресурса представлена на рис. 5.1.

139

v1

Рис. 5.1. Первая вершина переходит из Z+(t) в Z–(t)

В зоне Z+(0) в начальном состоянии находятся первая и вторая
вершины. Из рисунка видно, что хотя первая вершина имеет гораздо
больший ресурс, чем вторая, именно она переходит в зону Z–(t) за
первые пять тактов, и затем ее ресурс стремится к значению
r1out = 54 снизу. Вторая вершина остается в зоне Z+(t), и в
предельном состоянии весь излишек ресурса W – T = 5 оказывается
в ней.
Задача определения, какие из вершин для каждого конкретного
начального состояния Q(0) способны удержаться в зоне Z+(t), будет
рассмотрена в разделе 5.5.

5.3. Предельное состояние сети при единичном
и малом ресурсе
Существование предельного состояния при малых ресурсах было
доказано для любой регулярной сети. Однако переходные процессы
в эйлеровых сетях при их функционировании могут быть весьма
разнообразными. Чаще всего ресурс, начиная с некоторого момента
времени, стремится к предельному значению монотонно. Ниже
приводятся два примера, которые показывают, что монотонность
присутствует не всегда.
140

П р и м е р 5.2. Рассмотрим функционирование сети, заданной
матрицей (5.1) при суммарном ресурсе, меньшем порогового
значения: W = 50.
Q(0) = (50, 0, 0, 0, 0).

Рис. 5.2. Затухающие колебания в квазисимметричной сети

Из рисунка видно, что при малых ресурсах, когда во всех
вершинах не может произойти быстрого насыщения, возможны
значительные колебания. Сходимость обеспечивается за счет
регулярности матрицы пропускных способностей.
Рассмотренная сеть является квазисимметричной. Однако
колебания ресурса возникают не только в квазисимметричных
сетях.
П р и м е р 5.3. В матрице (5.1) отразим все пропускные
способности, равные 50, относительно главной диагонали. Пусть попрежнему W = 50.
Q(0) = (50, 0, 0, 0, 0).

141

 1 50 1 1 50 


 50 2 50 1 1 
R =  1 50 3 50 1  .


 1 1 50 4 50 
 50 1 1 50 5 


Матрица
из
квазисимметричной
превратилась
симметричную, однако колебания ресурса вновь имеют место.

(5.2)

в

Рис. 5.2. Колебания ресурса в симметричной сети

Действуя аналогично, легко получить пример колебаний в
однородной неполной сети. Для этого достаточно, например,
обнулить все элементы, не равные 50, в матрице (5.2).
Найдем вектор предельного состояния эйлеровой сети при
малых ресурсах. Для начала рассмотрим функционирование сети с
единичным ресурсом. Вектор состояния сети в момент t при W = 1,
как и ранее, будем обозначать Q1(t), а предельное состояние – Q1*.
Для несимметричных сетей вектор Q1*находится итерационным
методом как собственный вектор стохастической матрицы R',
соответствующей матрице пропускной способности R.
Для эйлеровых сетей получены более сильные результаты.
142

У т в е р ж д е н и е 5.11. В регулярной эйлеровой сети вектор
предельного состояния при W = 1 имеет вид:
 r out r out
r out 
Q1* =  1 , 2 ,..., n  .
rsum 
 rsum rsum

(5.3)

Д о к а з а т е л ь с т в о. Так как все вершины эйлеровой
сети являются потенциальными аттракторами, для каждой из них
r out
выполнится: i 1* = T . Но по теореме 5.1, Т = rsum.
qi
Отсюда следует, что i

qi1*

riout
=
, из чего непосредственно
rsum

вытекает формула (5.3). 
З а м е ч а н и е. Для полных однородных сетей с петлями,
1
1 1
как частного случая эйлеровых сетей, получим: Q1*=  , ,...,  ,
n
n n
что согласуется с результатами, полученными для полных
однородных сетей в главе 2.
Для любого ресурса W ≤ T предельное состояние можно
найти непосредственно из матрицы R и значения ресурса W:
 r1out
rnout 
r2out

Q =
W,
W ,...,
W  .
r
r
r
sum
sum
 sum

*

5.4. Функционирование сети
при больших ресурсах
При W = T предельное состояние, как было показано выше, имеет
~
вид Q = (r1out , r2out ,..., rnout ) .
Пусть W > T и в начальном состоянии в зоне Z+(0) находятся m
вершин. Не нарушая общности, предположим, что эти вершины
имеют номера от 1 до m, m < n (если m = n, начальное состояние

Это утверждение хорошо известно (см., например, [103]), однако здесь
оно доказывается с помощью другого понятийного аппарата.
143
1

является устойчивым). Тогда вектор начального состояния Q(0)
можно представить в следующем виде:

(

)

out
Q(0) = r1out + c1 (0),..., rmout + cm (0), rmout
+1 − d m +1 (0),..., rn − d n (0) .

Числа с1(0), …, cm(0) > 0 – превышения ресурса в вершинах
относительно порогового значения (их выходной пропускной
способности) – начальный профицит. Соответственно dm+1(0), …,
dn(0) ≥ 0 – начальный дефицит в вершинах.
Обозначим суммарный начальный профицит через csum(0),
суммарный начальный дефицит – через dsum(0).
m

csum (0) =  c j (0) , d sum (0) =
j =1

На любом
соотношением:

такте

t≥0

дефицит

n

 d j (0) .

j = m +1

и

профицит

связаны

csum(t) – dsum(t) = const = W – rsum.
По следствию 4.5 из теоремы 4.1, вектор предельного
состояния при W > Т имеет вид:

(

)

out
, где c1* ,..., cm*  0 . (5.4)
Q* = r1out + c1* ,..., rmout + cm* , rmout
+1,..., rn

Как показывает пример 5.1, в процессе перераспределения
ресурса при W > Т зона Z+(t) может сокращаться. Поэтому
некоторые из значений ci* могут быть нулевыми. Тогда возникают
сразу несколько взаимосвязанных вопросов. Какому условию
должен удовлетворять профицит вершины vk, чтобы она смогла
удержаться в зоне Z+? Иначе говоря, можно ли по начальному
состоянию определить, какие из c1* ,..., cm* (формула (5.4)) будут
строго положительными? Можно ли по начальному состоянию без
протокола функционирования сети определить предельное
состояние, как это было сделано для малых ресурсов? Ответы на
поставленные вопросы будут даны в следующем разделе.

144

5.5. Предельные состояния и потоки
при больших ресурсах
5.5.1. Предельное состояние сети
при неизменной зоне Z+(t)
Для полных однородных сетей во второй главе была
сформулирована и доказана теорема, которая позволяет для любого
начального состояния при W > rsum определить, какая из вершин,
принадлежащих зоне Z+(0), способна остаться в предельном
состоянии в зоне Z+*. Более того, была найдена формула для
вычисления предельного состояния во всех вершинах по заданному
начальному состоянию. Как и в рассматриваемых сетях, в полной
однородной сети каждая вершина является потенциальным
аттрактором, и предельное состояние зависит от начального. Но
полные однородные сети достаточно сильно отличаются от всех
остальных классов сетей. Уже для неполных однородных сетей
теорема перестает выполняться. Для определения предельного
состояния в эйлеровых сетях нужны иные подходы.
Пусть по-прежнему в зоне Z+(0) находятся вершины с
номерами от 1 до m:

(

)

out
Q(0) = r1out + c1 (0),..., rmout + cm (0), rmout
− d n (0) .
+1 − d m+1 (0),..., rn

Сформулируем задачу следующим образом.
Какой минимальный профицит должна иметь каждая вершина
из Z+(0), чтобы в процессе функционирования сети не перейти в
зону Z–(t)? Иными словами, как должны быть распределены в зоне
Z+(0) излишки ресурса сверх пропускных способностей r1out , ..., rmout
(профициты вершин), чтобы вершины v1, …, vm на каждом такте
оставались в зоне Z+(t), если W = T = rsum?
Обозначим соответствующий профицит для каждой вершины
через c~1m , ..., c~mm (поскольку эти значения пороговые, такая нотация
продолжает традицию обозначения пороговых величин). Вектор
начального состояния тогда должен выглядеть следующим образом:

(

)

out
Q(0) = r1out + c~1m ,..., rmout + c~mm1, rmout
+1 − d m +1 (0),..., rn − d n (0) .

Ясно, что, поскольку W = T, выполняется соотношение:
145

m

 c~jm = d sum (0) .

(5.5)

j =1

Очевидно, что если оставить весь вектор начального
состояния неизменным, а в некоторую вершину из Z+(0) поместить
дополнительный ресурс, то при любом ci (0)  c~im (i ≤ m) в
предельном состоянии профицит этой вершины будет равен
ci* = ci (0) − c~im .
Из этих соображений c~ m , ..., c~ m можно найти как разность:
1

m

c~im = qi (0) − qi* при достаточно больших значениях qi(0). В самом
деле,
qi (0) − qi* = riout + ci (0) − (riout + ci* ) = ci (0) − ci* = c~im .
З а м е ч а н и е. Следует отметить, что если в какую-нибудь
вершину из
Z+(0) в начальном состоянии поместить
дополнительный ресурс: ck (0) = c~km + ck (0) (k ≤ m), то во всех
остальных вершинах, принадлежащих зоне Z+(0), значение c~ m
i

останется неизменным. В самом деле, все эти вершины на
протяжении всего функционирования сети отдают ресурс по
правилу 1, т.е. при любом увеличении начального ресурса,
увеличения его отдачи не происходит. Излишки остаются в
вершине.
Сформулируем ряд утверждений относительно предельного
состояния эйлеровых сетей при больших ресурсах.
Начальному состоянию Q(0), которое содержит в зоне Z+(0) m
первых
вершин,
поставим
в
соответствие
вектор
Qm(0) = Q(0) + (dsum(0), …, dsum(0), 0, …, 0), где первые m компонент
равны dsum(0).
Л е м м а 5.1. Пусть в регулярной эйлеровой сети при W > T
начальное состояние содержит в зоне Z+(0) m вершин с номерами 1,
…, m:

(

)

out
Q(0) = r1out + c1 (0), ..., rmout + cm (0), rmout
+1 − d m+1 (0), ..., rn − d n (0) ,

146

Тогда для того, чтобы каждая из них осталась в зоне Z+(t)
при t > 0 для вершин vi, i = 1, …, m, необходимо и достаточно,
чтобы выполнялось:

ci (0)  c~im ,

(5.6)

~
где c~im – компоненты вектора C m :

~
C m = Qm (0) − Qm* .

(5.7)

Д о к а з а т е л ь с т в о.
Условие того, что вершина, принадлежащая зоне Z+(0), не
покинет ее, ищется в предположении, что зона Z+(t) стационарна,
т.е. неравенство ci (t )  c~im при t ≥ 0 выполняется для всех vi, i = 1,
…, m. Чтобы добиться этого, в каждую вершину из Z+(0)
добавляется заведомо большой ресурс, равный суммарному
дефициту. Все излишки ресурса в вершинах, помимо c~im ,
нивелируются

разности

Qm (0) − Qm* ,

величина
добавляемого ресурса в вершины vi  Z+(0), не влияет на c~im , при
условии, что в этих вершинах на протяжении функционирования
сети не происходит смены правила. 
С л е д с т в и е 5.4. В эйлеровой сети при W > T для каждого
начального состояния Q(0) справедливо: vi  Z+*  ci (0)  c~im , где
~
C m находится по формуле (5.7). Обратное верно, если и только
если все вершины из Z+(0) одновременно удовлетворяют условию
(5.6).
С л е д с т в и е 5.5. Если в эйлеровой сети с начальным
состоянием

(

в

поэтому

out
Q(0) = r1out + c1 (0), ..., rmout + cm (0), rmout
+1 − d m+1 (0), ..., rn − d n (0)

)

при W > T для всех вершин vi  Z+(0) выполняется ci (0)  c~im , то
вектор предельного состояния имеет вид

147

(

)

out
Q* = r1out + c1 (0) − c~1m ,..., rmout + cm (0) − c~mm , rmout
=
+1 ,..., rn
~m
= Q(0) − C ,

(5.8)

~
где вектор C m определяется по формуле (5.7).
~
Таким образом, C m однозначно определяет предельное
состояние при выполнении условия (5.6) для всех вершин из Z+(0).
Доказательства следствий вытекают непосредственно из
леммы 5.1.
Кроме того, очевидно, что сумма (n – m) последних компонент
~
вектора C m отрицательна и равна по модулю суммарному дефициту
в начальный момент времени.
n

 c~jm = −d sum (0) .

j =m+1

Совмещая эту формулу с формулой (5.5), имеем:
n

 c~jm = 0 .
j =1

Обобщим полученные результаты на случай произвольных
значений профицитов (не обязательного выполнения условия
ck(0) ≥ c~km ). В этом случае зона Z+(t) будет сужаться в процессе
функционирования. Рассмотрим переходные процессы при таких
условиях и опишем рекурсивный алгоритм нахождения предельного
состояния.
5.5.2. Предельное состояние эйлеровой сети.
Общий случай
Пусть нумерация вершин в сети такова, что первые m вершин
c (0)
упорядочены по убыванию отношения  i = ~i m .
c
i

Если i  1, i =1, …, m, предельное состояние однозначно
определяется по формуле (5.8). Пусть существует l: 1 < l < m, такое,
что
148

c (0)

 i = ~i m  1, j = l+1, …, m.
c

(5.9)

i

Поскольку для этих вершин c j (0)  c~jm , им недостает ресурса,
чтобы удержаться в зоне Z+(t), и они за конечное число тактов
перейдут в зону Z–(t). Недостача ресурса из вершин vl+1, …, vm для
m
(c~ m − c (0)) ,
покрытия
дефицита,
равная
должна



j = l +1

j

j

перераспределиться между остальными вершинами из Z+(0).
Поэтому при условии (5.9) если для некоторой вершины vi  Z+(0)
выполняется соотношение (5.6), это не гарантирует того, что она
останется в Z+*: в процессе перераспределения ей придется отдавать
дополнительный ресурс.
Первой покинет зону Z+(t) вершина с номером m, для которой
отношение (5.9) минимально. Если для нескольких последних
вершин m – k, m – k + 1, …, m отношение (5.9) одинаково, они
покинут зону Z+(t) одновременно. Обозначим через l = m – k –1
новую мощность зоны Z+(t). Теперь для каждой вершины vi  Z+(0),
i  l, чтобы проверить, будет ли выполнено условие vi  Z+*,
~
необходимо сформировать новый вектор C l . Вектор начального
состояния для его вычисления будет:

(

Ql (0) = r1out + c1 (0) + d sum (0),..., rlout + cl (0) + d sum (0), ql +1 (0),..., qn (0)

)

Теперь дефицит dsum(0) прибавится к первым l вершинам –
только тем, для которых выполняется (5.6).
Затем, для новых значений c~il  c~im , i = 1 ,…, l, снова
проверяется условие, аналогичное (5.6): c (0)  c~l , i = 1 ,…, l.
i

i

Процесс повторяется до тех пор, пока при каком-нибудь
значении p ≤ l неравенство ci (0)  c~i p , будет истинным для всех
i = 1 ,…, p.
После этого предельное состояние найдено.

(

)

out
Q* = r1out + c1 (0) − c~1p ,..., rpout + c p (0) − c~pp , rpout
.
+1 ,..., rn

Алгоритм нахождения предельного состояния
149

~
Шаг 0. Вычислить C m по формуле (5.7).
Шаг 1. Вычислить ci (0) − c~im , i = 1, …, m. Если все разности
неотрицательны, предельное состояние найдено (формула (5.8)).
Выход.
Шаг 2. Упорядочить вершины по убыванию значения
ci (0)
i = ~ m .
c
i

Шаг 3. m := m – k –1, где k – количество вершин, для которых
c (0)
i = min ~j m ; переход на шаг 0.
j
c
j

Поскольку W > T, как минимум одна вершина останется в зоне
Z , и следовательно алгоритм остановится за число шагов, не
превышающее m – 1. В результате вектор
+*

(

out
Q* = r1out + c1 (0) − c~1m ,..., rmout + cm (0) − c~mm , rmout
+1 ,..., rn

)

будет предельным состоянием сети.
Сформулируем теорему, обобщающую теорему 2.2, в которой
был получен результат для полных однородных сетей.
Т е о р е м а 5.2. Пусть в регулярной эйлеровой сети при W > T
c
произвольным
начальным
состоянием
out
out
out
out
Q(0) = r1 + c1 (0),..., rm + cm (0), rm+1 − d m+1 (0),..., rn − d n (0) первые
c (0)
m вершин упорядочены по убыванию значения  i = ~i m . Тогда
c

(

)

i

предельное состояние находится по формуле:

(

)

out
Q* = r1out + c1 (0) − c~1p ,..., rpout + c p (0) − c~pp , rpout
,
+1 ,..., rn

~
где C p = Q p (0) − Q*p и
p = m, если ci (0)  c~i , i = 1, … m;
в противном случае p < m – наибольшее целое, такое, что
ci (0)  c~i p , i = 1, … p.
Доказательство теоремы вытекает непосредственно
алгоритма построения предельного состояния.
150

из

5.5.3. Предельные потоки при больших ресурсах и задача
~
нахождения вектора C m – случай отсутствия ресурса
в зоне Z–(0)
Теорема 5.2 позволяет исследовать начальные состояния и находить
по ним предельные, но для этого необходимо вычислять
дополнительные предельные состояния, заведомо предсказуемые.
~
Возникает вопрос, нельзя ли найти компоненты вектора C m ,
не прибегая к расчету Qm* . Для ответа на него проследим изменение
ресурса в вершине vk  Z+(0) (k  m) при неизменной зоне Z+(t). Эта
вершина функционирует по правилу 1. На каждом такте она отдает
по полной пропускной способности rkout .
Принимаемый
ресурс
равен
входному
потоку
и
рассчитывается по формуле:
f kin (t + 1) = (r1out ,..., rmout , qm+1 (t ),..., qn (t )) Rk' ,
где R k' – k-й столбец стохастической матрицы R'.
Вектор входящих потоков во все вершины, определяется как

F in (t + 1) = (r1out ,..., rmout , qm+1 (t ),..., qn (t )) R' .
Вектор, на который умножается стохастическая матрица, есть
вектор выходного потока. Отсюда
Fin(t+1) = Fout(t)R'.

(5.10)

Выразим зависимость потоков на произвольном такте от
начального состояния.

F out (t + 1) = (r1out ,..., rmout , qm +1 (t + 1),..., qn (t + 1)) =
= (r1out ,..., rmout , qm+1 (t ),..., qn (t )) P = F out (t ) P ,
где P – матрица, полученная из R' заменой первых m столбцов на
столбцы ортонормированного базиса e1, …, em. Ее можно
представить в виде блочной матрицы:
151

E
P =  m
O
нулевая

R1' 
 , где Em – единичная матрица размера mm, O –
R2' 

матрица

(n–m)m,

R1', 2 –

соответствующие

блоки

стохастической матрицы размеров m(n–m) и (n–m) (n–m)
соответственно. Блок R1' характеризует пропускные способности
ребер между зонами Z+(t) и
Z–(t), блок R2' отвечает за обмен
ресурсом внутри Z–(t).
Для любого натурального h выполнится:
Fout(t+h) = Fout(t)Ph.
Fout(t) = Fout(0)Pt.
Тогда (5.10) перепишется в виде:
Fin(t+1) = Fout(0)PtR'.
Непосредственно возводя матрицу P в степень t, получим:

( ) + ... + R (R )
(R )

E
P = m
O


R1' + R1' R2' + R1' R2'

t

2

' t −1 
2


'
1

' t
2




( ) → 0 при
(E − R ) , где Е –
 (R ) = (E − R ) .

В [38, 52] доказано, что для матриц такого вида R2'
t → , и, кроме того,

существует матрица

единичная матрица размера (n–m)(n–m), и

2



k =0

Тогда

( )

R1' + R1' R2' + R1' R2'

2

( )

+ ... + R1' R2'

k

(

t

' −1
2

2

' k
2

+ ... = R1' E2 − R2'

2

)

−1

' −1
2

,

и матрица P имеет вид:
E
P = m
O



152

(

R1' E2 − R2'
O

)

−1 

.



(5.11)

Из (5.11) и существования предельного потока следует:
in*

F

out*

=F

out

=F

(0)PR'

E
= F (0)  m
O

out

(

R1' E2 − R2'
O

)

−1 

 R'.



(5.12)

Из формулы (5.12) видно, что вектор предельного потока
зависит только от m первых компонент вектора потока в начальном
состоянии. «Физический смысл» здесь достаточно очевиден.
Суммарный предельный поток при W > T равен пороговому
значению T, которое зависит только от характеристик самой сети и
не зависит от начального состояния. Для первых m компонент
вектора Fout(0) выполняется f i out = riout , i = 1, …, m, т.е. они
выражаются через параметры сети. С их помощью рассчитываются
остальные компоненты вектора предельного потока.
Поскольку при W > T предельный поток известен и совпадает с
~
предельным состоянием при W = T: Q = (r1out ,..., rnout ) , из (5.12)
имеем:

F

out

(

E
(0) m
O


R1' E2 − R2'
O

)

−1


 R ' = (r1out ,..., rnout ) .



~
Вектор Q = (r1out ,..., rnout ) является левым собственным вектором
матрицы R' с собственным числом  = 1. Кроме того, поскольку
 = 1 – собственное значение кратности 1, соответствующий ему
собственный вектор единственен. Следовательно, справедливо
равенство
E
F out (0) m
O


(

R1' E2 − R2'
O

)

−1 

 = (r1out ,..., rnout ) .



(5.13)

При этом, как уже было отмечено, вклад вектора Fout(0) в
левую часть (5.13) состоит только из m первых компонент.
Таким образом, можно переписать (5.13) в виде:

153

(


O


R1' E2 − R2'
O

E
(r1out ,..., rmout ,0,...,0) m

)

−1 

 = (r1out ,..., rnout ) .



Отсюда для эйлеровых сетей получается следующее равенство:

(

(r1out ,..., rmout ) R1' E2 − R2'


(

)

−1 

out
out
 = (rm+1 ,..., rn ) .


(5.14)

)

 R ' E − R ' −1  – матрица связи первых m компонент вектора
2
 1 2

суммарных пропускных способностей с последними (n – m)
компонентами. Обозначим ее через Rс, а векторы пропускных
способностей с m и (n – m) компонентами через Rmout и Rnout
−m
соответственно. Тогда (5.14) перепишется в виде:

Rmout Rc = Rnout
−m .
Вклад i-й компоненты вектора Rmout (i = 1, … m) во все
компоненты

вектора

Rnout
−m

равен

n−m

riout  rijc

–

пропускная

j =1

способность i-й вершины умножается на сумму элементов i-й
строки матрицы Rс.
Пусть вершины, находящиеся в зоне Z–(0), не имели ресурса,
т.е. d sum (0) =

n

 r jout . Тогда каждая вершина vi (i = 1, … m)

должна

j =m+1

n−m

отдать ровно riout  rijc

ресурса. Отсюда первые m компонент

j =1

~
вектора C m = Qm (0) − Qm* , задающие минимальное количество
ресурса сверх пропускной способности, при котором вершина
остается в зоне Z+(t), рассчитываются по формуле:
n−m

c~im = riout  rijc , i =1, …, m.
j =1

154

Таким образом, доказана лемма, позволяющая находить
предельное состояние в случае, когда вершины из зоны Z–(0) не
содержат ресурс.
Л е м м а 5.2. В регулярной эйлеровой сети c начальным
состоянием
Q(0) = r1out + c1 (0), ..., rmout + cm (0), 0, ...,0

(

)

при W > T минимальные значения c~im , i =1, …, m, при которых
вершины из зоны Z+(0) не перейдут в зону Z–(t), рассчитываются по
формуле:
n−m
−1
c~im = riout  rijc , i =1, …, m, где R c =  R1' E2 − R2'  , (5.15)


j =1

(

)

а предельное состояние при условии, что ci(0)  c~im  i =1, …, m,
описывается вектором:

(

)

out
.
Q* = r1out + c1 (0) − c~1m ,..., rmout + cm (0) − c~mm , rmout
+1 , ..., rn

Доказательство
вытекает
непосредственно
из
вычисления предельных потоков и построения матрицы P.
Формула (5.15) позволяет оценивать начальное состояние и
находить по нему предельное состояние, не вводя вспомогательные
векторы, как это было сделано в п.п. 5.5.1–5.5.2.
Продемонстрируем на примере вычисление величин c~im .
П р и м е р 5.4. Рассмотрим симметричную сеть с пятью
вершинами. Ее матрица пропускных способностей имеет вид:

1

1
R = 6

1
1


1
1
1
1
1

6
1
1
1
1

1
1
1
1
1

1

1
1 .

1
1

Кортеж  = ((10, 10), (5, 5), (10, 10), (5, 5), (5,5)). rsum = 35.
Начальное состояние: Q(0) = (50, 50, 0, 0, 0). W = 100.
155

При таком начальном состоянии Z+(0) = {v1, v2}, Z–(0) = {v3, v4,
v5}. Ресурс в первых двух вершинах достаточно велик, чтобы ни
одна из них не перешла в зону Z–(t).
Численный эксперимент показывает, что предельное
состояние при таком начальном будет: Q* = (36, 44, 10, 5, 5).
Таким образом, c~1m = 50 – 36 = 14, c~2m = 50 – 44 = 6.
Сравним эти значения со значениями, полученными по лемме
5.2.
Стохастическая матрица R' и матрица P имеют вид:

 0.1

 0.2
R' =  0.6

 0.2
 0.2


0.1
0. 2
0.1
0. 2
0. 2

0.6
0 .2
0.1
0.2
0.2

0.1
0.2
0.1
0.2
0.2

0.1 

0.2 
0.1  , P =

0.2 
0.2 

1

0
0

0
0


0
1
0
0
0

0.6
0.2
0.1
0.2
0.2

0. 1 

0 .2 
0. 1  ,

0 .2 
0.2 

0.1
0.2
0.1
0.2
0.2

Отсюда

 0.1 0.1 0.1

 0.6 0.1 0.1  ' 
 , R2 =  0.2 0.2 0.2  .
R = 
 0.2 0.2 0.2 
 0.2 0.2 0.2 


'
1

Произведем промежуточные вычисления:

6

 0.9 − 0.1 − 0.1 
5


−
1
2
=
E2 − R2' =  − 0.2 0.8 − 0.2  , E2 − R2'
5
 − 0.2 − 0.2 0.8 
2



5

(

(

R c =  R1' E2 −


)

4 3 3 


=  5 10 10  .
 2 2 2 


5 5 5 

−1
R2' 

Проверим выполнение формулы (5.14):
156

)

1
5
7
5
2
5

1

5
2
,
5
7

5

4 3 3 


10  = (10, 5, 5) . Равенство выполняется.
(10, 5) 52 10
2 2



5 5 5 
По формуле (5.15) посчитаем пороговые значения c~1m, 2 .
3
14
4 3
c~1m = 10   + +  = 10  = 14 ;
10
 5 10 10 
6
2 2 2
c~2m = 5   + +  = 5  = 6 .
5
5 5 5

Эти значения совпадают с полученными в начале примера
численно.
Таким образом, из теоремы 5.4 следует, что при W > T, если
вершины из зоны Z–(0) в начальном состоянии не имеют ресурса, а
ресурс во всех вершинах зоны Z+(0) достаточно велик, предельное
состояние можно найти по формуле (5.15), не прибегая к
вычислениям собственного вектора стохастической матрицы.
Теорема задает достаточное условие возможности нахождения
предельного состояния: профициты вершин из зоны Z+(0) должны
превышать соответствующие пороговые значения c~im .
Полученные результаты касаются достаточно узкого класса
начальных состояний, однако, базируясь на именно этих
результатах, можно произвести обобщение на остальные классы
начальных состояний. Сначала рассмотрим начальные состояния с
произвольным ресурсом в зоне Z–(0), при стационарной зоне Z+(t)
(п. 5.5.4), а затем произвольные начальные состояния (п. 5.5.5).

~

5.5.4. Задача нахождения вектора C m –
случай стационарной зоны Z+(t)
Рассмотрим начальное состояние с ненулевым ресурсом в вершинах
из зоны Z–(0). Пусть вектор начального состояния задан в виде:

(

)

out
Q(0) = r1out + c1 (0),..., rmout + cm (0), rmout
− d n (0) ,
+1 − d m+1 (0),..., rn

157

и существует по крайней мере одна вершина vj, j = m+1, … n,
содержащая в начальном состоянии ненулевое количество ресурса:
d j (0)  r jout . Недостаток ресурса в вершинах из зоны Z–(0) уже не
так велик: вместо вектора правой части равенства (5.14)
out
(rmout
+1 , ... , rn ) , нужно получить не превышающий его вектор

(d m +1 (0), ..., d n (0)) .

Разность этих двух векторов совпадает с
компонентами вектора начального состояния вершин из зоны Z–(0):
out
rmout
+1 − d m+1 (0), ..., rn − d n (0) .
Введем для каждой вершины vj  Z–(0) коэффициент j  1:

(

)

j =

d j (0)
r jout

.

Тогда вектор дефицитов может быть представлен в виде:

(dm+1 (0), ..., dn (0)) = ( m+1rmout+1, ...,  n rnout ) = (rmout+1,..., rnout )Diag ( m+1, ...,  n )
,

Diag ( m+1 , ...,  n ) – диагональная матрица с элементами
 m+1 , ...,  n .
Отсюда, чтобы получить вектор, каждая компонента которого
равна
дефициту
данной
вершины,
выражение
(5.14)
модифицируется следующим образом:
где

(r1out ,..., rmout ) Rc Diag ( m+1 , ...,  n ) = (d m+1 (0), ..., d n (0))

(5.16)

Из (5.16) легко получить, что для случая, когда вершины
зоны Z–(0) содержат ресурс, выражение (5.15) для минимальных
излишков ресурса в вершинах из Z+(0) примет вид:
n−m

c~im = riout  rijc m+ j , i =1, …, m.

(5.17)

j =1

Формула (5.17) для каждого начального состояния эйлеровой
сети задает минимальные излишки в каждой вершине из зоны Z+(0),
158

которые позволят этой вершине остаться в зоне Z+(t) при любом
значении t. И, как и в случае с отсутствием ресурса в зоне Z–(t),
выполнение неравенства cj(0)  c~im для всех вершин из Z+(0)
является достаточным условием применимости данного метода к
вычислению предельного состояния. Если это неравенство
выполняется, вектор предельного состояния получается из
начального состояния следующим образом:

(

)

~
Q* = Q(0) − C m = Q(0) − c~1m ,..., c~mm , − d m +1 (0), ...,−d n (0) , или

(

)

out
.
Q* = r1out + c1 (0) − c~1m ,..., rmout + cm (0) − c~mm , rmout
+1 , ..., rn

Таким образом, доказана теорема о предельном состоянии при
стационарной зоне Z+(t).
Т е о р е м а 5.3. В эйлеровой сети c произвольным начальным
состоянием

(

out
Q(0) = r1out + c1 (0),..., rmout + cm (0), rmout
− d n (0)
+1 − d m+1 (0),..., rn

)

при W > T минимальные значения c~im , i =1, …, m, при которых
вершины из зоны Z+(0) не перейдут в зону Z–(t), рассчитываются по
формуле:
n−m

c~im = riout  rijc m+ j , i =1, …, m,

(5.18)

j =1

где  k =

d k (0)
, k = m+1, …, n,
rkout

а предельное состояние при условии, что ci(0)  c~im  i = 1, …, m,
описывается вектором:

(

)

out
.
Q* = r1out + c1 (0) − c~1m ,..., rmout + cm (0) − c~mm , rmout
+1 , ..., rn

З а м е ч а н и е. Нетрудно заметить, что когда вершины из
зоны Z–(0) не содержат ресурса, значения i для них равны единице,
и формула (5.18) превращается в формулу (5.15).
159

Продемонстрируем применение полученных формул на
примере.
П р и м е р 5.5.
По-прежнему
будем
рассматривать
симметричную сеть с матрицей R из примера 5.4. Пусть снова в
начальном состоянии Z+(0) = {v1, v2}, Z–(0) = {v3, v4, v5}. Однако
теперь вершины из зоны Z–(0) имеют ненулевой ресурс. Начальное
состояние: Q(0) = (50, 50, 3, 2, 1). W = 106. Теперь помимо матрицы
−1
связи R c =  R1' E2 − R2'  , которая совпадает с матрицей связи,


полученной в примере 5.4, для вычисления вектора дефицита, и,
соответственно, вектора пороговых профицитов, нужно вычислить
матрицу Diag(3, 4, 5).

(

3 =

)

10 − 3 7
5−2 3
5 −1 4
, 4 =
=
=
= , 5 =
10
5
5
10
5
5

Проверим выполнение формулы (5.16):

7

 4 3 3  10


10  0
(10, 5) 52 10
2 2 


 5 5 5  0



0
3
5
0


0

0  = (7, 3, 4 ) .

4

5

Равенство выполняется.
RcDiag(3, 4, 5) =
7

0 0

 4 3 3  10
  28 9 12 


 0,56 0,18 0,24 
3
.
0  =  50 50 50  = 
=  5 10 10  0
  14 12 16   0,28 0,24 0,32 
5
 2 2 2 


 5 5 5  0 0 4   50 50 50 


5

Пороговые значения c~1m, 2 рассчитываются как произведение
выходной пропускной способности вершины
соответствующей строки матрицы RcDiag(3, 4, 5).
160

на

сумму

c~1m = 10  (0,56 + 0,18 + 0,24) = 10  0,98 = 9,8 ;
c~2m = 5  (0,28 + 0,24 + 0,32) = 5  0,84 = 4,2 .
Предельное состояние тогда будет равно:
Q* = (40,2, 45,8, 10, 5, 5).
Протокол работы сети с этим начальным состоянием приведен
в табл. 5.1.
Таблица 5.1
t
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
…

v1
50,000
44,400
42,300
41,250
40,725
40,463
40,331
40,266
40,233
40,216
40,208
40,204
40,202
40,201
40,201
40,200

Протокол работы сети
v2
v3
50,000
47,900
46,850
46,325
46,063
45,931
45,866
45,833
45,816
45,808
45,804
45,802
45,801
45,801
45,800
45,800

3,000
7,900
8,950
9,475
9,738
9,869
9,934
9,967
9,984
9,992
9,996
9,998
9,999
9,999
10,000
10,000

v4
2,000
2,900
3,950
4,475
4,738
4,869
4,934
4,967
4,984
4,992
4,996
4,998
4,999
4,999
5,000
5,000

v5
1,000
2,900
3,950
4,475
4,738
4,869
4,934
4,967
4,984
4,992
4,996
4,998
4,999
4,999
5,000
5,000

Как видно из таблицы, значения, полученные численно,
совпадают с вектором предельного состояния, полученным
аналитически.

~

5.5.5. Задача нахождения вектора C m – общий случай
Следующий результат, который необходимо получить, – описание
вектора предельного состояния при произвольных ресурсах в зоне
Z+(0), т.е. найти предельное состояние вне зависимости от того,
остается зона Z+(t) стационарной на протяжении всего
функционирования сети или сужается. Аналогично рекурсивному
161

алгоритму из п. 5.5.2, опишем последовательность действий для
нахождения предельного состояния при условии, что не все
ci(0) превосходят пороговые значения c~im .
Алгоритм
нахождения
предельного
состояния
при
нестабильной зоне Z+(t) включает в себя следующие шаги.
1. Рассчитать пороговые значения c~im .
2. Выбрать вершину в Z+(0), которая первой покинет Z+(t).
Возможна ситуация, когда несколько вершин покидают
зону Z+(t) одновременно. Порядок действия для этого
случая аналогичен.
3. Перераспределить ее излишек сверх выходной пропускной
способности между вершинами из зоны Z–(0). Если таких
вершин несколько, перераспределить все их излишки.
4. Пропорционально уменьшить ресурс в остальных
вершинах зоны Z+(0). (Поскольку взята вершина, первой
покидающая эту зону, ни одна из вершин не окажется в Z–
(t) – как максимум, на границе вместе с рассматриваемой
вершиной).
5. Пропорционально увеличить ресурс в вершинах из зоны Z–
(0) на отданное количество ресурса.
6. Пересчитать значения c~il для нового начального состояния
с редуцированной зоной Z+(0).
7. Если для всех вершин выполнится неравенство ci (0)  c~il ,
зона Z+(0) стабилизировалась. Мы попадаем в условия
теоремы 5.5. Выход
8. Если существует по крайней мере одна вершина, для
которой ci (0)  c~il , m := l; переход на шаг 1.
Опишем один проход этого алгоритма.
Расположим вершины в таком порядке, что первые m вершин
c (0)
упорядочены по убыванию отношения  i = ~i m , причем как
c
i

минимум одно из этих отношений строго меньше единицы.
Рассмотрим вершину vm. Для нее значение

c (0)

 m = m~ m
c
m

минимально, причем  m  1 . Будем рассматривать случай, когда

162

минимум  i достигается в одной вершине. Рассуждения для случая,
когда таких вершин несколько, аналогичны.
Для всех i , i = 1, …, m – 1, выполнится:  i   m , поэтому для
любого ci(0), i = 1, …, m – 1, c (0)   c~ m , т.е. если ресурс любой
i

m i

другой вершины из vi Z (0) уменьшить на значение  mc~im , она
останется в Z+(t).
Пока вершина vm будет отдавать весь имеющийся у нее
излишек, каждая вершина vi Z+(0) отдаст количество ресурса,
равное  mc~im , и, как уже было показано, не покинет Z+(t).
+

Rc  Diag ( m +1, ...,  n ) через R c1 .
Вершина vi  Z+(0) отдает в вершину vk  Z–(0) следующую долю от
r c1
общего отдаваемого ресурса n − mik . Сам отдаваемый ресурс равен
 rijc1
Обозначим

матрицу

j =1

величине  mc~im . Таким образом, в каждую вершину vk  Z–(0) из
rikc1
rikc1 c~im
m
~
+
вершины vi  Z (0) перейдет n−m  m ci = n−m ~ m cm (0) ресурса.
c
 rijc1
 rijc1 m
j =1

Из всех вершин зоны
соответственно, перейдет:
m

r c1 c~ m

 n − mik c~im cm (0) =
i =1
 rijc1 m
j =1

j =1

Z (0)
+

в

вершину

vk  Z–(0),

cm (0) m rikc1 ~ m
ci ресурса.

c~mm i =1 n − m c1
 rij
j =1

Новый вектор начального состояния будет, соответственно,
равен:

c (0)
cm (0) ~ m
out
Qnew (0) =  r1out + c1 (0) − m~ m c~1m , ... , rmout
−1 + cm−1 (0) − ~ m cm−1 , rm ,
cm
cm


163

m
rimc1+1
n−m
i =1
rijc1
j =1

cm (0)
rmout
+1 − d m +1 (0) + ~ m 
cm



m
rinc1
n−m
i =1
rijc1
j =1

c (0)
c~im ,..., rnout − d n (0) + m~ m 
cm






m
c~i 



.
Для вектора Qnew(0), в котором зона Z+(0) будет содержать l
вершин (как максимум, m – 1 вершину), находятся новые значения
c~il , после чего либо начальное состояние удовлетворяет условию
теоремы 5.4, либо вся процедура повторяется заново.
Предложенный алгоритм позволяет обобщить все предыдущие
результаты в единую теорему о предельном состоянии.
Т е о р е м а 5.4 (о п р е д е л ь н о м с о с т о я н и и). Пусть
в регулярной эйлеровой сети c произвольным начальным состоянием
при W > T

(

out
Q(0) = r1out + c1 (0),..., rmout + cm (0), rmout
− d n (0)
+1 − d m+1 (0),..., rn

)

c (0)
первые m вершин упорядочены по убыванию отношения  i = ~i m .
ci
Минимальные значения c~ m , i = 1, …, m, при которых вершины из
i

зоны Z+(0) не перейдут в зону Z–(t), рассчитываются по формуле:
n−m
d
(0)
c~im = riout  rijc m+ j , i = 1, …, m, где  m + j = m +outj
, j = 1, …, n – m,
rm + j
j =1

а предельное состояние при условии, что ci(0)  c~im  i = 1, …, m,
описывается вектором:

(

)

out
. (5.19)
Q* = r1out + c1 (0) − c~1m ,..., rmout + cm (0) − c~mm , rmout
+1 , ..., rn

Если для вершины
vm Z+(0) cm(0) < c~mm , значение m
уменьшается на k, и за новое начальное состояние принимается
вектор:
164

(

out
out
~m
Qnew(0) = r1out + c1 (0) −  mc~1m , ... , rmout
−k + cm−k (0) −  m cm−k , rm−k +1 ,..., rm ,
(5.20)

rmout
+1 − d m +1 (0) +

r c1
 m n −imm+1
i =1
rijc1
j =1
m





m

c~im ,..., rnout − d n (0) +  m 

i =1



m
~
ci  ,
c1

 rij
j =1


rinc1
n−m

c (0)
где  m = m~ m , а значение k равно количеству вершин, для которых
cm

 m − k +1 = ... =  m .
Начальное состояние пересчитывается до тех пор, пока все
разности ci(0) – c~im не станут неотрицательными. Тогда
предельное состояние описывается формулой (5.20).
Д о к а з а т е л ь с т в о вытекает из построения нового
вектора начального состояния Qnew(0).
Для иллюстрации теоремы и алгоритма рассмотрим
следующий пример.
П р и м е р 5.6. Модифицируем матрицу из примера 5.4.

1

1
R =6

6
1


1
1
1
1
1

6
1
1
1
1

6
1
1
1
1

1

1
1 .

1
1

Теперь кортеж  = ((15, 15), (5, 5), (10, 10), (10, 10), (5,5)). rsum
= 45.
Зададим начальное состояние, в котором в зоне Z+(0) будут три
первые вершины Z+(0) = {v1, v2, v3}, а ресурсы четвертой и пятой
вершин меньше выходных пропускных способностей. Пусть они оба
равны 2: Q(0) = (15 + c1(0), 5 + c2(0), 10 + c3(0), 2, 2). Рассмотрим
случай нестабильной зоны Z+(t). Пусть для двух первых вершин
выполняется: ci(0)  c~im i = 1, 2, а для третьей вершины c3(0) < c~3m .
165

Чтобы задать такое начальное состояние, по теореме 5.4. вычислим
пороговые значения c~im .
Для этого найдем матрицу связи Rc и диагональную матрицу
Diag(4, 5).
Стохастическая матрица R' и матрица P имеют вид:
6 6 1
1 1


 15 15 15 15 15 
1 1 1 1 1
5 5 5 5 5
6 1 1 1 1
R' = 
, P =
10
10
10
10
10


6 1 1 1 1
 10 10 10 10 10 
1 1 1 1 1


5 5 5 5 5


1

0


0

0


0


0 0
1 0
0 1
0 0
0 0

6 1

15 15 
1 1
5 5
1 1
,
10 10 
1 1
10 10 
1 1

5 5

отсюда

6 1


1
 15 15 

1
1
 , R ' =  10
R1' = 
5 5 2 1

1 1
5


10
10



)

8

=7
 2
7

 10

 21
−
1
2
R c =  R1' E2 − R2'  = 

 7
1

7

1

7
2
.
7
1

7

1
 9
− 

10  , E − R '
E2 − R2' =  10
2
2
1
8
 −

 5 10 

(

(

Вычислим Diag(4, 5):
166

1

10  .
1

5

)

−1

1

7 ,
8

7

4 =

10 − 2 4
5−2 3
= , 5 =
=
10
5
5
5

 10

 21
2
c
R  Diag ( 4 ,  5 ) = 
7
1

7

1

7  4
2  5

7  0
1 

7

3
 8



35 
0   21
8
6
=
3   35 35 

3
5  4


 35 35 

Проверим, выполняется ли равенство (5.16).
3
 8


 21 35 
8
6
(15, 5, 10)
= (8, 3) . Справа получили значение
 35 35 
 4
3


 35 35 
дефицита вершин из зоны Z–(0).
По формуле (5.17) посчитаем пороговые значения c~im , i = 1, 2, 3.
3
8
c~1m = 15   +  = 7 ;
 21 35 
6 
 8
c~2m = 5   +  = 2 ;
 35 35 
3
 4
c~3m = 10   +  = 2 .
 35 35 

Теперь получены все данные, чтобы задать начальное
состояние, порождающее нестабильную зону Z+(t). Ресурс в первых
двух вершинах пусть по-прежнему будет равен 50 (т.е. величине,
заведомо большой), а ресурс в третьей вершине: q3(0)=11, поскольку
r3out + c~3m = 10 + 2 = 12 , и для нестабильной зоны Z+(t) ресурс третьей
вершины в начальном состоянии должен попасть в интервал (10,
12). Начальное состояние, таким образом, будет следующим: Q(0) =
167

c (0)
(50, 50, 11, 2, 2). По формуле  m = m~ m для третьей вершины
cm
1
имеем:  3 = . По формуле (5.21) найдем новое начальное
2
состояние, которое переходит в то же самое предельное состояние,
но зона Z+(0) в нем содержит только две вершины, а вершина v3
имеет ресурс 10, равный своей выходной пропускной способности.
Ресурс в первых трех вершинах будет равен:
q1(0) = 50 –

q2(0) = 50 –

1
7= 46,5;
2

1
2= 49;
2

q3(0) = 10.
Найдем новые значения ресурсов в вершинах из зоны Z–(0)
по формуле (5.20). Для этого нужно вычислить пропорции, в
которых вершины v1, v2, v3 распределяют ресурс в вершины v4, v5.
q4(0) = 2+

7  8  8 3   8  8 6   4  4 3 
  :  +   + 1  :  +   + 1  :  +   =
2  21  21 35    35  35 35    35  35 35  
= 2+

q5(0) = 2+

20 4 4
28
+ + = 2+
=6
7 7 7
7

 6  8
 3  4
7  3 8
3 
6 
3 
  :  +   + 1   :  +   + 1   :  +   =
2  35  21 35  
 35  35 35  
 35  35 35  
= 2+

21
9 3 3
+ + = 2 + = 3,5.
14 7 7
14

Новое начальное состояние Qnew (0) = (46,5, 49, 10, 6, 3,5).
При этом начальном состоянии зона Z+(t) уже стабильна, и
предельное состояние ищется по формуле (5.19).

168

Для его нахождения нужно заново определить матрицу Rc и
коэффициенты i, i = 3, 4, 5. Поскольку зона Z+(0) содержит уже не
три, а две вершины, новая матрица P имеет вид:

1

0


P = 0

0


0


0
1
0
0
0

6
6 1

15 15 15 
1
1
1
5
5
5
1
1
1
 , тогда
10 10 10 
1
1
1
10 10 10 
1
1
1

5
5
5

1 1 1


6 6 1
10 10 10 



1 1 1
R1' =  15 15 15  , R2' = 
.
 10 10 10 
 1 1 1 
1 1 1
5 5 5


5 5 5

 9

 10
1
E2 − R2' =  −
 10
 1
−
 5

1
10
9
10
1
−
5

−

(

1

10 
1
−  , E2 − R2'
10 
4 

5 

−

R c =  R1' E2 −


3 = 0, 4 =

(

)

5

= 9
 1

3

−1
R2' 

7

6
−1
1
=
6
1

3

)

5
9
1
3

1
6
7
6
1
3

1

6
1
,
6
4

3

2

9.
1

3

10 − 6
5 − 3 .5
= 0,4 , 5 =
= 0,3 ,
10
5

169

5

c
R Diag(3, 4, 5) =  9
1

3

5
9
1
3

2  0 0
0   0 2 1 

9  0 0,4 0  = 
9 15 

1 
2 1

 0 0 0,3   0

3
 15 10 

По формуле (5.17) посчитаем пороговые значения c~im , i = 1, 2.
 2 1  13
c~1m = 15   +  =
= 4, (3) ;
 9 15  3
2 1 7
c~2m = 5   +  = = 1,1(6) .
 15 10  6

Предельное состояние тогда будет:
Q* = (46,5 – 4,(3), 49 – 1,1(6), 10, 10, 5) = (42,1(6), 47,8(3), 10, 10, 5)
Проверим полученное значение двумя способами.
Численно получим предельное состояние для исходного
начального состояния Q(0) = (50, 50, 11, 2, 2) и для
модифицированного (со стабильной зоной Z+(t)) Qnew(0) = (46,5, 49,
10, 6, 3,5).

t
0
1
2
3
4
5
6
7
8
9
10
11
12
…
170

Таблица 5.2
Протокол работы сети Q(0) = (50, 50, 11, 2, 2)
v1
v2
v3
v4
v5
50,000
44,600
43,240
42,596
42,338
42,235
42,194
42,178
42,171
42,168
42,167
42,167
42,167

50,000
48,600
48,140
47,956
47,882
47,853
47,841
47,836
47,835
47,834
47,834
47,833
47,833

11,000
9,600
9,540
9,816
9,926
9,971
9,988
9,995
9,998
9,999
10,000
10,000
10,000

2,000
8,600
9,540
9,816
9,926
9,971
9,988
9,995
9,998
9,999
10,000
10,000
10,000

2,000
3,600
4,540
4,816
4,926
4,971
4,988
4,995
4,998
4,999
5,000
5,000
5,000

Таблица 5.3
Протокол работы сети Qnew(0) = (46,5, 49, 10, 6, 3,5)
t
v1
v2
v3
v4
v5
0
1
2
3
4
5
6
7
8
9
10
11
…

46,500
43,800
42,820
42,428
42,271
42,208
42,183
42,173
42,169
42,168
42,167
42,167

49,000
48,300
48,020
47,908
47,863
47,845
47,838
47,835
47,834
47,834
47,833
47,833

10,000
9,300
9,720
9,888
9,955
9,982
9,993
9,997
9,999
10,000
10,000
10,000

6,000
9,300
9,720
9,888
9,955
9,982
9,993
9,997
9,999
10,000
10,000
10,000

3,500
4,300
4,720
4,888
4,955
4,982
4,993
4,997
4,999
5,000
5,000
5,000

Из двух протоколов видно, что предельные состояния совпали
между собой и с найденным аналитически.

Комментарий к главе 5
Эйлеровы сети – ближайшее обобщение однородных сетей. Все
вершины нейтральны; сеть квазисимметрична: riin = riout , хотя
матрица R пропускных способностей может быть несимметричной.
Поэтому, в отличие от произвольных несимметричных сетей многие
характеристики эйлеровых сетей можно выразить через элементы
матрицы R. В частности:
• порог выражается формулой Т = rsum;
~
• для вектора Q предельного состояния при W = Т
~
справедлива формула Q = (r1out , r2out ,..., rnout ) , которая для
полных однородных сетей соответствует теореме 2.1 о
выравнивании.
При W > T предельное состояние зависит от начального
состояния Q(0) и может быть вычислено через его координаты.
Последний факт связан с тем, что все вершины эйлеровой сети
– пассивные аттракторы, и, следовательно, их поведение зависит от
начального состояния: вершина может остаться в зоне Z+*, если она
была в зоне Z+(0) (и при этом выполнены некоторые условия), но не
может перейти в Z+ из Z–. Поэтому зона Z– не уменьшается.
Вопрос о том, при каких условиях вершины из Z+(0) останутся
в Z+*, непосредственно связан с вычислением предельного
171

состояния. Для решения этого вопроса используется разложение
Q(0) по профицитам-дефицитам, описанное в гл.2. Однако само
решение оказывается гораздо более сложным, чем его аналог в гл.2.
Его поиску – и вычислению предельного состояния – посвящена
вторая половина главы 5.
Точное решение находится сразу только в том случае, когда
зона Z+ не сокращается в процессе функционирования. (Существует
критерий, позволяющий это определить по вектору Q(0)). Если же
некоторые вершины покидают зону Z+, то для вычисления
предельного
состояния
приходится
вводить
некоторые
промежуточные величины и рекурсивные процедуры для их
вычисления.

172

ГЛАВА 6. ЭРГОДИЧЕСКИЕ
ЦИКЛИЧЕСКИЕ СЕТИ,
в которой:
• Вводится понятие d-циклических ресурсных сетей.
• Исследуются элементарные циклы. Для них приводится критерий
существования равновесного состояния при малых ресурсах и вектор
равновесного состояния; исследуются колебательные процессы,
определяются предельные векторы, циклически сменяющие друг друга;
находятся формула вычисления порогового значения ресурса Т,
предельное состояние и предельный поток при W = T; доказываются
существование предельного состояния и потока при W > T; находится
вектор предельного потока. Доказывается, что предельный поток при
W > T единственен; при этом предельное состояние единственно в том
и только в том случае, когда сеть имеет один потенциальный аттрактор.
Приводятся критерий аттрактивности вершин, необходимое и
достаточное условие активности каждого аттрактора.
• Исследуется функционирование циклических ресурсных сетей общего
вида при малых ресурсах. Показывается, что при t →  состояния сети
представляют собой d чередующихся предельных векторов,
образующих предельный цикл. Показывается, что все предельные


векторы являются собственными векторами предельной матрицы R' d ,
соответствующими собственному числу  = 1 кратности d.
• Находится условие на начальное состояние, при выполнении которого
процесс перераспределения ресурса при W < T сходится к
равновесному состоянию. Показывается, что равновесный вектор
является единственным положительным собственным вектором
матрицы R'.
• Доказывается, что в циклических сетях, как и в регулярных, существует
единственное пороговое значение ресурса Т, при превышении которого
по крайней мере одна вершина сети переходит на правило 1.
Находится формула для Т.
• Формулируется и доказывается критерий аттрактивности вершины в
произвольной d-циклической эргодической сети.
• Формулируются и доказываются теоремы о предельном состоянии и
потоке при W  T.

В предыдущих главах мы рассматривали регулярные сети.
Свойство регулярности позволило доказать ряд утверждений
относительно их функционирования, главное из которых –
сходимость процесса распределения ресурса при любом начальном
состоянии, а также единственность предельного состояния во всех
регулярных сетях при малых ресурсах и в несимметричных сетях с
одним аттрактором при любом суммарном ресурсе. Получены
формулы для компонент вектора предельного состояния при любых
173

ресурсах в эйлеровых сетях и в несимметричных сетях с одним
аттрактором; если аттракторов несколько, предельные значения
ресурса найдены для всех не-аттрактивных вершин, найдено
пороговое
значение
Т,
при
превышении
которого
последовательность векторов состояний перестает описываться
однородной регулярной цепью Маркова.
В этой главе мы будем исследовать эргодические
нерегулярные ресурсные сети, которые обладают принципиально
иными свойствами. В п.2.3 такие сети определялись как сети, графы
которых сильно связны, а наибольший общий делитель (НОД) d
длин всех циклов больше единицы. Эти сети называют также dциклическими или просто циклическими, потому что их свойства во
многом определяются структурой их циклов. Рассмотрим эти
свойства более подробно.
Пусть имеется сильно связный орграф с n вершинами v1, v2, …,
vn, где в дискретном времени происходит процесс распространения
некоторой импульсной активности, т.е. активности, которая
существует в вершине только один момент и затем передается по ее
выходящим ребрам. Такой активностью может быть сообщение,
краткое возбуждение, малый ресурс и т.д. Выберем начальную
вершину vi, которая активна (возбуждена) в момент t = 0. В момент
t = 1 вершина vi передает возбуждение по своим выходящим ребрам;
в момент t = 2 вершины, бывшие активными в момент t = 1,
передают возбуждение по своим выходящим ребрам и т.д.
Обозначим через Nij множество моментов времени, в которые
возбуждение приходит в вершину vj. Очевидно, что Nii – это
множество длин всех циклов, проходящих через вершину vi.
Нетрудно показать, что для любых i и j множества Nii и Njj
совпадают с точностью до нескольких малых чисел (это возможно,
если, например, vi содержится в коротком цикле, в котором не
содержится vj). В гл.1 книги [38] доказаны утверждения, которые
можно сформулировать следующим образом.
Зафиксируем вершину vi, и пусть наибольший общий делитель
чисел из Nii равен d. Тогда
1) Для любого j = 1, 2, …, n существует число kij, 0 ≤ kij < d,
такое, что любой элемент из Nij сравним с kij по модулю d. Верно и
обратное: для любого k, 0 ≤ k < d найдется такая вершина vj, что
любой элемент из Nij сравним с k по модулю d. Множество всех
вершин с одинаковым k назовем циклическим классом Сk. Число
циклических классов равно d.
174

2) Если вершина vi активна в момент t = 0 и находится в
циклическом классе С0, то в момент t = k активными будут все
вершины циклического класса Ck и только они.
3) Разбиение вершин на циклические классы не зависит от
выбора начальной вершины vi; выбор другой вершины в качестве
начальной изменит только нумерацию циклических классов.
4) Момент, когда активны одновременно все вершины графа,
существует, если и только если d = 1 (следует непосредственно из
пп. 1 и 2).
5) Из п. 4 непосредственно следует, что при d > 1 во всех
степенях стохастической матрицы сети всегда будут нули. Для
разных ее степеней нули будут находиться в разных местах. С
увеличением степени расположение нулей начинает циклически
повторяться. Длина этого цикла равна d.
6) Проделаем своеобразную конденсацию исходного графа G
по циклическим классам, преобразовав его в граф G' следующим
образом: а) заменим все вершины циклического класса Cj, j = 0, 1,
…, d – 1, одной вершиной cj; б) ребро (cj, cl) существует, если и
только если в исходном графе G хотя бы из одной вершины класса
Cj ведет ребро в вершину класса Cl. Из п.2 следует, что из вершин
класса Cj ребра ведут только в вершины класса C(j+1) mod d. Это, в
свою очередь означает, что граф G' – элементарный цикл,
состоящий из d вершин.
Введенные понятия поясним на примере графов, приведенных
на рис. 6.1.

1

2

1

2

4

3

4

3

5

6

5

6

Ga

7

Gb
Рис. 6.1. Циклические графы

175

Рассмотрим сначала граф Ga. Для него длины всех циклов
кратны четырем, т.е. d = 4. При начальной вершине v1 активными
будут: v2 в момент t = 1, v3 в момент t = 2, v4 в момент t = 3, v1 и v5 в
момент t = 4, v2 и v6 в момент t = 5 и т.д. Поэтому циклические
классы графа Ga таковы: С0 = {v1, v5}, С1 = {v2, v6}, С2 = {v3}, С3 =
{v4}. Если в качестве начальной вершины выбрать v3, то разбиение
на классы останется прежним, но их нумерация циклически
сдвинется на 2.
Если присоединить к вершине v6 цикл длины 2 с вершиной v7,
то получим граф Gb, в котором кратность циклов d равна 2. В нем
будет только два циклических класса – все четные вершины в одном
классе, все нечетные – в другом. Заметим, что N22 = {4, 8, 10, 12,
14,…}, N66 = {2, 4, 6, 8, 10, 12, 14, …}, т.е. v2 и v6 находятся в одном
циклическом классе, но их последовательности N22 и N66 отличаются
первыми числами. Это иллюстрирует сделанную выше оговорку о
совпадении множеств Nii и Njj с точностью до нескольких малых
чисел.
По топологии циклические сети могут сильно различаться.
Самым простым и наиболее легким для исследования является
элементарный цикл из n вершин. Он содержит n циклических
классов, и при функционировании по правилу 2 на каждом такте
ресурс переходит из некоторой вершины в следующую. Пороговое
значение для таких сетей и потенциальные аттракторы могут быть
найдены, исходя лишь из пропускных способностей ребер. Более
сложный случай – простые циклы. Простой цикл состоит из
нескольких циклов, пересекающихся по вершинам, но не
пересекающихся по ребрам. Все эти циклы обязаны не быть взаимно
простыми. Если НОД длин этих циклов равен единице, сеть состоит
из одного циклического класса; она регулярна, и для нее
выполняются все результаты, полученные для регулярных сетей.
Общий случай циклической сети – сеть без петель (петля – это цикл
длины 1), состоящая из циклов, пересекающихся по вершинам и
ребрам.

6.1. Элементарные циклы и их свойства
Если сеть представляет собой элементарный цикл, ее матрица
содержит по одному ненулевому элементу в каждой строке и
каждом столбце, поскольку все вершины имеют по одному
входному и одному выходному ребру. Далее в этом разделе под
«циклом» будем подразумевать элементарный цикл. Стохастическая
176

матрица при любых пропускных способностях ребер у такой сети
одна и та же: она содержит ровно по одной единице в каждом
столбце и каждой строке.
Рассмотрим сеть из пяти вершин, образующих цикл, с
произвольной матрицей пропускных способностей

 0 r12

0 0
R = 0 0

0 0
r
 51 0

0
r23

0
0

0
0

r34
0

0

0

0

0
0 .

r45 
0 

Соответствующая ей стохастическая матрица будет иметь вид:
 0 1 0 0 0


 0 0 1 0 0
R' =  0 0 0 1 0  .


0 0 0 0 1
1 0 0 0 0


Выпишем все ее степени:

0

0
(R')2=  0

1
0


0
0
0
0
1

1
0
0
0
0

0
1
0
0
0

0

0
1 ,

0
0 

0

0
(R')3=  1

0
0


0
0
0
1
0

0
0
0
0
1

1
0
0
0
0

0

1
0 ,

0
0 

177

1

0
4 
(R') = 0

0
0


0

1
4 
(R') = 0

0
0


0
0
1
0
0

0
1
0
0
0

0

0
0  = E, (R')5= R'E= R'.

0
1 

0
0
1
0
0

0
0
0
1
0

0
0
0
1
0

0
0
0
0
1

1

0
0 ,

0
0 

Пусть суммарный ресурс и начальное состояние сети таковы,
что с первого такта все вершины функционируют по правилу 2.
Тогда на каждом такте вектор состояния сети будет циклической
перестановкой вектора начального состояния.
Q(0) = (q1(0), q2(0), q3(0), q4(0), q5(0));
Q(1) = Q(0)R' = (q5(0), q1(0), q2(0), q3(0), q4(0));
Q(2) = Q(1)R' = Q(0)(R')2 = (q4(0), q5(0), q1(0), q2(0), q3(0));
Q(3) = Q(2)R' = Q(0)(R')3 = (q3(0), q4(0), q5(0), q1(0), q2(0));
Q(4) = Q(3)R' = Q(0)(R')4 = ( q2(0), q3(0), q4(0), q5(0), q1(0));
Q(5)
=
Q(4)R'
= (q1(0), q2(0), q3(0), q4(0), q5(0)) = Q(0).

=

Q(0)(R')5

Таким образом, Q(t) = Q(ti), где ti остаток от деления t на 5:
ti < 5, ti  t (mod 5).
Нетрудно обобщить этот результат на цикл с n
вершинами. Для такого цикла при функционировании по правилу 2
вся бесконечная последовательность состояний определяется
состояниями на первых n тактах: Q(t) = Q(ti), где ti < n, ti  t (mod n).
178

Из этих соображений следует, что предельное состояние в
цикле, функционирующем по правилу 2, существует в том и только
в том случае, когда в начальном состоянии ресурс распределен
W
W W
равномерно по всем вершинам, т.е. Q(0) =  , ,...,  . Тогда
n
n n
*
tQ(t) = Q(0) и Q = Q(0). Это состояние является устойчивым. Во
всех остальных случаях в сети возникают незатухающие колебания;
предельного состояния не существует.
П р и м е р 6.1. Рассмотрим цикл с пятью вершинами и
одинаковыми пропускными способностями, равными 5.
 0 5 0 0 0


 0 0 5 0 0
R =  0 0 0 5 0 .
(6.1)


0 0 0 0 5
5 0 0 0 0


rsum = 25.
Начальное
состояние:
Q(0) = (2, 0, 0, 0, 0).
Сеть
функционирует по правилу 2. Динамика ресурса представлена на
рис. 6.2.

Рис. 6.2. Колебания малого ресурса
в нерегулярной эргодической сети
179

Протокол работы такой сети представлен в табл. 6.1.
Таблица 6.1
Протокол работы сети
t
v1
v2
v3
v4
v5
0
1
2
3
4
5
6
7
8
9
10
…

2,000
0,000
0,000
0,000
0,000
2,000
0,000
0,000
0,000
0,000
2,000

0,000
2,000
0,000
0,000
0,000
0,000
2,000
0,000
0,000
0,000
0,000

0,000
0,000
2,000
0,000
0,000
0,000
0,000
2,000
0,000
0,000
0,000

0,000
0,000
0,000
2,000
0,000
0,000
0,000
0,000
2,000
0,000
0,000

0,000
0,000
0,000
0,000
2,000
0,000
0,000
0,000
0,000
2,000
0,000

Ресурс, равный 2, оказывается последовательно в каждой из
вершин на каждый пятый такт, остальные четыре такта вершины
пусты.
Начальные состояния с равным ресурсом во всех вершинах,
вплоть до Q(0) = (5, 5, 5, 5, 5) устойчивы. Перераспределения
ресурса между вершинами не происходит. Поскольку сеть
однородна, устойчивым будет и состояние Q(0) = (W1, W2 , W3 , W4 , W5 )
при любых, W1, …, W5 > 5.
Введем понятие равновесного состояния циклической сети
при малом ресурсе. Как видно из примера 6.1, если малый ресурс
(под «малым» мы, как и прежде, понимаем ресурс, при котором,
начиная с некоторого такта, вся сеть переходит на правило 2) в
начальном состоянии распределен в вершинах неравномерно,
единственного предельного состояния не существует – вместо этого
функционирование сети сходится к устойчивому циклу –
устойчивым состояниям циклически сменяющим друг друга.
Количество различных векторов – пределов сходящихся
подпоследовательностей состояний – не превышает количества
вершин в элементарном цикле. В общем случае эти величины
совпадают. Однако, как было показано выше, если в начальном
состоянии вершины имеют одинаковое количество ресурса и (что
важно) это количество не превышает выходных пропускных
способностей вершин, в сети существует предельное состояние,
совпадающее с начальным. Это означает, что все n пределов
180

подпоследовательностей одинаковы, и, сменяя друг друга, эти
устойчивые векторы оставляют сеть в одном и том же состоянии.
Такое состояние (когда в предельном цикле все векторы
одинаковы), будем называть равновесным.
Введем понятие порогового значения в элементарном цикле.
При малых ресурсах функционирование эргодической циклической
сети зависит от начального состояния. При этом если сеть не сразу
начинает функционировать по правилу 2 целиком, а некоторые
вершины переходят на это правило за конечное число тактов,
рассуждения остаются прежними. Рассмотрим функционирование
сети при одном и том же суммарном ресурсе и разных начальных
состояниях.
В
сети
(6.1)
при
начальном
состоянии
Q(0) = (1,6, 1,6, 1,6, 1,6, 1,6), все вершины функционируют по
правилу 2, и это состояние является равновесным. Если весь
суммарный ресурс, равный 8, сконцентрировать в одной вершине,
функционирование сети изменится.
П р и м е р 6.2. Однородный цикл задан матрицей (6.1).
Начальное состояние Q(0) = (8, 0, 0, 0, 0).
Такое начальное состояние порождает два потока: первый
состоит из 5 единиц ресурса, второй – из трех (рис. 6.3, табл. 6.2).
Длина периода обоих потоков совпадает с длиной цикла и равна 5.
Каждая вершина функционирует два такта по правилу 2, а
затем три такта не имеет ресурса. При этом в один из тактов
функционирования ресурс (равный 5) находится на верхней границе
применимости правила 2.

181

Рис. 6.3. Колебания ресурса в нерегулярной
эргодической сети (два потока)

Таблица 6.2
t
0
1
2
3
4
5
6
7
8
9
10
…

v1
8,000
3,000
0,000
0,000
0,000
5,000
3,000
0,000
0,000
0,000
5,000

Протокол работы сети
v2
v3
0,000
5,000
3,000
0,000
0,000
0,000
5,000
3,000
0,000
0,000
0,000

0,000
0,000
5,000
3,000
0,000
0,000
0,000
5,000
3,000
0,000
0,000

v4
0,000
0,000
0,000
5,000
3,000
0,000
0,000
0,000
5,000
3,000
0,000

v5
0,000
0,000
0,000
0,000
5,000
3,000
0,000
0,000
0,000
5,000
3,000

Таким образом, при малом ресурсе, в отличие от регулярных
сетей, в сетях, представленных элементарным циклом, состояния
сети и потоки зависят от начального состояния, и в равновесное
состояние нельзя попасть ни из какого неравновесного состояния.
То есть при малом ресурсе равновесное состояние либо является
начальным и сеть устойчива сразу, либо оно никогда не может быть
достигнуто.
182

При больших ресурсах из любого начального состояния в
некоторых вершинах происходит накопление излишков ресурса.
Эти вершины, как и ранее, будем называть аттракторами.
Как и в регулярных сетях, если суммарный ресурс в сети мал,
то за конечное число тактов он весь становится потоком.
Следовательно, при увеличении суммарного ресурса суммарный
поток также увеличивается. Но это увеличение потока происходит
лишь при условии, что количество ресурса меньше порогового
значения Т. При этом значении происходит насыщение потока, и
при дальнейшем увеличении ресурса в сети суммарный поток
остается неизменным.
Предельный поток при больших ресурсах, как будет показано
ниже, всегда существует и не зависит от начального состояния (в
отличие от малых ресурсов) и от суммарного количества ресурса,
предельное состояние также существует, но количество ресурса в
аттракторах зависит от начального состояния. В этом элементарные
циклы полностью аналогичны регулярным сетям.
П р и м е р 6.3. Рассмотрим сеть с матрицей (6.1). Она
однородна и квазисимметрична, т.е. является эйлеровой
нерегулярной сетью. Поэтому каждая ее вершина – потенциальный
аттрактор. Нетрудно убедиться, что насыщение потока в этой сети
наступает, когда все вершины имеют по riout = 5 единиц ресурса, и,
таким образом, T = rsum = 25.
При
начальном
состоянии
Q(0) = (30, 0, 0, 0, 0),
функционирование сети представлено на рис. 6.4.

183

Рис. 6.4. Функционирование сети при W > T

t
0
1
2
3
4
5
…

Таблица 6.3
Протокол работы сети при Q(0) = (30, 0, 0, 0, 0)
v1
v2
v3
v4
v5
30,000
25,000
20,000
15,000
10,000
10,000

0,000
5,000
5,000
5,000
5,000
5,000

0,000
0,000
5,000
5,000
5,000
5,000

0,000
0,000
0,000
5,000
5,000
5,000

0,000
0,000
0,000
0,000
5,000
5,000

Из табл. 6.3 видно, что за первые пять тактов вершины
v2, …, v5 получили ресурс, равный своей пропускной способности, и
на этом изменения компонент вектора состояния завершились.
Закон изменения вектора состояний в неоднородных циклах
при функционировании всей сети по правилу 2 совпадает с
описанным функционированием однородных циклов, поскольку
стохастическая матрица у однородного и неоднородного цикла одна
и та же. Однако если малый ресурс сконцентрирован в одной
вершине, и хотя бы на нескольких первых тактах некоторые
вершины функционируют по правилу 1, начинают проявляться
отличия неоднородных циклов от однородных.
184

П р и м е р 6.4. Рассмотрим сеть, представляющую собой
неоднородный цикл, с матрицей пропускных способностей:
0 5 0 0 0


0 0 4 0 0
R =0 0 0 3 0.
(6.2)


0 0 0 0 4
5 0 0 0 0


rsum = 21. Начальное состояние: Q(0) = (7, 0, 0, 0, 0).
Поскольку суммарный ресурс превосходит пропускные
способности ребер, минимальная из которых r33 = 3, он делится на
три неравные части, и дальше в сети наблюдается три цикла длины
5: с ресурсом 3, 3 и 1 (рис. 6.5 и табл. 6.4).

Рис. 6.5. Функционирование неоднородного элементарного цикла

Таблица 6.4
t
0
1
2
3

v1
7,000
2,000
0,000
0,000

Протокол работы сети
v2
v3
0,000
5,000
3,000
0,000

0,000
0,000
4,000
4,000

v4
0,000
0,000
0,000
3,000

v5
0,000
0,000
0,000
0,000
185

4
5
6
7
8
9
10
…

0,000
3,000
3,000
1,000
0,000
0,000
3,000

0,000
0,000
3,000
3,000
1,000
0,000
0,000

1,000
0,000
0,000
3,000
3,000
1,000
0,000

3,000
1,000
0,000
0,000
3,000
3,000
1,000

3,000
3,000
1,000
0,000
0,000
3,000
3,000

Таким образом, если элементарный цикл неоднороден и ресурс
в начальном состоянии аккумулирован в одной из вершин, он
перемещается между вершинами порциями, – существует несколько
последовательных циклов движения ресурса. В каждом из них (за
исключением, возможно, одного) ресурс равен минимальной
пропускной способности цикла. В одной (заключительной) порции


W 

min r , где 
перемещаются «остатки»: ресурс, равный W −
 min rij  i , j ij
 i, j 
– целая часть числа.
Нетрудно показать, что если выполняется равенство



W 

W−
min r = min rij ,
i, j
 min rij  i , j ij
 i, j 
то W = n  min rij , и при этом по всем поток во всех ребрах
i, j

становится одинаковым.
Отсюда следует, что для любого неоднородного цикла
существует значение ресурса, при котором поток стабилизируется
за конечное число тактов и сеть приходит в устойчивое состояние из
любого начального. Поток в каждом ребре будет равен
минимальному разрезу, который в данном случае равен
минимальной пропускной способности ребер цикла. Суммарный
устойчивый поток равен пороговому значению ресурса Т; они
вычисляются по формуле:

~
~
F in = F out = (min rij ,..., min rij ) ; T = n  min rij,

186

где n – число вершин, min rij – минимальная пропускная
способность цикла.
~
~
При W > Т предельный поток существует, причем F in = F out ;
fsum = Т для любого значения суммарного ресурса, а излишки сверх Т
скапливаются лишь в вершинах vk, для которых k = arg min rij .
i{1,...,n}

Так, для сети, заданной матрицей (6.2), Т = 15.
П р и м е р 6.5. Сеть задана матрицей (6.2), начальное
состояние Q(0) = (15, 0, 0, 0, 0).
При таких условиях за первые шесть тактов происходит
выравнивание ресурса и стабилизация состояний и потока (рис. 6.6
и табл. 6.5).

Рис. 6.6. Ресурс W = Т = 15 выравнивается.
Вектор предельного состояния Q*=(3, 3, 3, 3, 3)

t
0
1
2
3
4
5
6

Таблица 6.5
Протокол работы сети при Q(0) = (15, 0, 0, 0, 0)
v1
v2
v3
v4
v5
15,000
10,000
5,000
0,000
0,000
3,000
3,000

0,000
5,000
6,000
7,000
3,000
0,000
3,000

0,000
0,000
4,000
5,000
6,000
6,000
3,000

0,000
0,000
0,000
3,000
3,000
3,000
3,000

0,000
0,000
0,000
0,000
3,000
3,000
3,000
187

7
…

3,000

3,000

3,000

3,000

3,000

В неоднородном цикле при W > Т, как уже было сказано,
ресурс скапливается в вершинах с минимальной выходной
пропускной
способностью
vk.
Такие
вершины
будут
потенциальными аттракторами цикла. Если аттрактор один,
предельное состояние единственно. Ресурс W – Т в предельном
состоянии окажется в аттракторе (рис. 6.7). Отсюда следует, что в
сети с матрицей (6.2) потенциальным аттрактором является вершина
v3.
П р и м е р 6.6. Сеть задана матрицей (6.2), начальное
состояние Q(0)=(20, 0, 0, 0, 0).

Рис. 6.7. Ресурс W =20. Вектор предельного состояния Q*=(3, 3, 8, 3, 3)

t
0
1
2
3
4
5
6
188

Таблица 6.6
Протокол работы сети при Q(0) = (20, 0, 0, 0, 0)
v1
v2
v3
v4
v5
20,000
15,000
10,000
5,000
0,000
3,000
3,000

0,000
5,000
6,000
7,000
8,000
4,000
3,000

0,000
0,000
4,000
5,000
6,000
7,000
8,000

0,000
0,000
0,000
3,000
3,000
3,000
3,000

0,000
0,000
0,000
0,000
3,000
3,000
3,000

7
…

3,000

3,000

8,000

3,000

3,000

Излишек ресурса W – T перешел в третью вершину.
Предельное состояние описывается вектором Q* = (3, 3, 8, 3, 3).
Интересно, что в последних двух примерах вершина v1,
обладая всем суммарным ресурсом сети в начальном состоянии,
сначала отдает его весь, и только затем получает часть обратно.
Если вершин с минимальной выходной пропускной
способностью несколько, предельное состояние зависит от
начального состояния и от расположения этих вершин в цикле. Если
они идут друг за другом, активным аттрактором будет только первая
из них, остальные будут пассивными аттракторами – они смогут
удержать излишек ресурса, находящийся в них в начальном
состоянии, но новые излишки будут задерживаться в первой
вершине, образующей бутылочное горлышко. Если между такими
вершинами есть другие вершины, каждая из них будет активным
потенциальным аттрактором, и количество ресурса в них в
предельном состоянии будет зависеть от начального состояния.
П р и м е р 6.7. Рассмотрим неоднородный цикл из семи
вершин с двумя потенциальными аттракторами v2 и v5 – они имеют
минимальные выходные пропускные способности.

0

0
0

R =0
0

0

7

5 0 0 0 0 0

0 2 0 0 0 0
0 0 5 0 0 0

0 0 0 4 0 0  . rsum = 31. Т = 27 = 14.
0 0 0 0 2 0 
0 0 0 0 0 6

0 0 0 0 0 0

(6.3)

W = 17 > T. Начальное состояние: Q(0) = (17, 0, 0, 0, 0, 0, 0).
Из рис. 6.8 видно, что в зону Z+* перешел тот аттрактор,
который первым успел задержать ресурс у себя, т.е. вершина v2.

189

Рис. 6.8. Цикл с двумя аттракторами.
Вектор предельного состояния Q*=(2, 5, 2, 2, 2, 2, 2)

При
начальном
состоянии
Q(0) = (0, 0, 0, 17, 0, 0, 0)
предельным состоянием будет Q*=(2, 2, 2, 2, 5, 2, 2), т.е. весь
излишек останется во втором потенциальном аттракторе v5.
Если ресурс W > T в начальном состоянии находится в
нескольких вершинах, его излишек W – T распределяется между
аттракторами в пропорции, которая зависит от пропускных
способностей всех ребер.
Так, например, для матрицы (6.3) при начальном состоянии
Q(0) = (8, 0, 0, 9, 0, 0, 0) предельное состояние будет Q*=(2, 2, 2, 2,
5, 2, 2), т.е. все излишки вновь окажутся в аттракторе v5. Чтобы
вершина v2 тоже получила излишек, ресурс в вершине v1 должен
быть больше 8. Так, при Q(0) = (9, 0, 0, 8, 0, 0, 0) предельное
состояние Q*=(2, 3, 2, 2, 4, 2, 2). Однако при перемещении ресурса,
равного 8, в начальном состоянии из вершины v4 в v3, т.е. при
Q(0) = (9, 0, 8, 0, 0, 0, 0), предельным состоянием вновь будет вектор
Q*=(2, 2, 2, 2, 5, 2, 2) – все излишки забирает аттрактор v5. Это
происходит оттого, что ресурс должен проделать более длинный
путь по циклу до возвращения в его начало: вершину v1, служащую
источником для аттрактора v2. При Q(0) = (9, 0, 8, 0, 0, 0, 0) вершина
v1 пуста три такта (со второго по четвертый), и этого достаточно,
чтобы ресурс из аттрактора v2 переместился в аттрактор v5. (рис. 6.9,
табл. 6.8).
190

Из рисунка видно, что к тому моменту (такт 5), как ресурс
вершины v1, становится вновь ненулевым, и она могла бы
поддерживать баланс в вершине v2, вершина v2 уже имеет ресурс,
равный единице, т.е. не имеет излишков.

Рис. 6.9. Цикл с двумя аттракторами.
Вектор предельного состояния Q *= (2, 2, 2, 2, 5, 2, 2)

Таблица 6.8
Протокол работы сети при Q(0) = (9, 0, 8, 0, 0, 0, 0)
t
v1
v2
v3
v4
v5
v6
v7
0
1
2
3
4
5
6
7
8
9
…

9,000
4,000
0,000
0,000
0,000
2,000
2,000
2,000
2,000
2,000

0,000
5,000
7,000
5,000
3,000
1,000
2,000
2,000
2,000
2,000

8,000
3,000
2,000
2,000
2,000
2,000
1,000
2,000
2,000
2,000

0,000
5,000
4,000
2,000
2,000
2,000
2,000
1,000
2,000
2,000

0,000
2,000
4,000
6,000
6,000
6,000
6,000
6,000
5,000
5,000

0,000
0,000
0,000
2,000
2,000
2,000
2,000
2,000
2,000
2,000

0,000
0,000
0,000
0,000
2,000
2,000
2,000
2,000
2,000
2,000

Обобщим все результаты, полученные при рассмотрении
элементарных циклов, в виде утверждений.
191

У т в е р ж д е н и е 6.1. Для циклической ресурсной сети с n
вершинами, представленной однородным элементарным циклом с
пропускной способностью ребер r, пороговое значение ресурса
равно суммарной пропускной способности сети: T = rn.
1) При W < T равновесие в сети может быть получено,
только если начальное состояние является вектором равновесного
W
W W
состояния: Q(0)= Q* =  , ,...,  ; при любом другом начальном
n
n n
состоянии равновесного состояния и потока не существует.
2) При W = T предельный поток и предельное состояние
существуют и единственны. Вектор предельного потока равен
вектору предельного состояния: Fin* = Fout* = Q* = (r, r, …, r).
3) При W > T предельное состояние и поток существуют,
причем предельный поток определяется единственным образом:
Fin* = Fout* = (r, r, …, r). Предельное состояние зависит от
начального.
У т в е р ж д е н и е 6.2. Для циклической ресурсной сети с n
вершинами, представленной неоднородным элементарным циклом,
пороговое значение ресурса Т вычисляется по формуле: T = n  rmin ,
где rmin = min rij.
1) При W < T устойчивость в сети достигается на том же
W
W W
векторе, что и в однородном цикле: Q(0) = Q* =  , ,...,  ; при
n
n n
любом другом начальном состоянии предельного состояния и
потока не существует.
2) При W = T предельный поток и предельное состояние
существуют и единственны. Вектор предельного потока равен
вектору предельного состояния: Fin* = Fout* = Q* = (rmin, rmin, …, rmin).
3) При W > T предельное состояние и поток существуют,
причем предельный поток определяется единственным образом:
Fin* = Fout* = (rmin, rmin, …, rmin). Предельное состояние единственно в
том и только в том случае, когда сеть имеет единственный
потенциальный аттрактор. В противном случае распределение
ресурса сверх порогового значения W – T зависит от начального
состояния.
4) Вершина vk является аттрактором элементарного цикла в
том и только в том случае если для нее выполняется
k = arg min rij . Если два и более потенциальных аттрактора
i{1,...,n}

расположены в цикле непосредственно друг за другом, то
192

активным аттрактором является только первый из них;
остальные аттракторы пассивны, так как вследствие условия
k = arg min rij они обязаны быть нейтральными вершинами.
i{1,...,n}

Доказательства обоих утверждений следуют непосредственно
из свойств элементарных циклов.

6.2. Функционирование произвольных
циклических сетей при малых ресурсах
Перейдем к рассмотрению произвольных циклических сетей. Любая
циклическая сеть состоит из простых циклов, пересекающихся по
вершинам и/или по ребрам.
При функционировании по правилу 2 вектор начального
состояния Q(0) умножается на последовательные степени
стохастической матрицы. Нулевые элементы в этих степенях
периодически повторяются. Циклические классы – это множества
вершин vi, которые имеют ресурс в одних и тех же тактах при
суммарном ресурсе W = 1, сосредоточенном в начальном состоянии
в одной из вершин. Количество различных расположений нулей в
степенях матрицы R' равно количеству циклических классов d.
Последовательность R'k не имеет предела. Однако ее можно
рассматривать как d подпоследовательностей с нулями в
определенных фиксированных позициях. Каждая из этих
подпоследовательностей
имеет
предел
[11],
а
вся
k
последовательность R' суммируема по Чезаро к предельной
матрице А. Обозначим каждый из таких пределов через Ri' ,
i = 0,…, d – 1.
Стохастическая матрица R' d-циклической сети имеет ровно d
собственных
значений,
равных
по
модулю
единице:
1 = |2| =…= |d| = 1, т.е. является импримитивной с индексом
импримитивности d [11].
Прежде чем формулировать общие утверждения о предельных
матрицах, предельных векторах, и возможности достижения
глобальной устойчивости в циклических сетях при малых ресурсах,
проследим на примере процессы, происходящие в сетях: изменение
векторов состояния и изменение степеней стохастической матрицы.

193

6.2.1. Функционирование циклической сети
при единичном ресурсе
П р и м е р 6.8. Пусть сеть представлена двудольным графом
(рис. 6.10).
1

3

5

2

4

Рис. 6.10. Двудольный граф с пятью вершинами, d = 2

Ее матрица пропускных способностей:

0

2
R = 0

0
0


2
0
2
0
0

0
2
0
2
0

0
0
2
0
2

0

0
0  , rsum = 16.

2
0 

(6.4)

Соответствующая ей стохастическая матрица имеет вид:

1
0
0
0 
 0


0 
 0,5 0 0,5 0
R ' =  0 0,5 0 0,5 0 


0 0,5 0 0,5 
 0
 0
0
0
1
0 

На рис. 6.11 показан процесс перераспределения ресурса,
соответствующий начальному состоянию Q(0) = (1, 0, 0, 0, 0).

194

q(t)

2.5

2
v1
1.5

v2
v3

1

v4
v5

0.5

0

t

0 1 2 3 4 5 6 7 8 9 10111213141516171819202122232425262728

Рис. 6.11. Колебания при Q(0) = (1, 0, 0, 0, 0)

Протокол функционирования сети, соответствующий рис. 6.11,
представлен в табл. 6.9.
Таблица 6.9
Протокол функционирования 2-циклической сети
с матрицей (6.4) и Q1(0) = (1, 0, 0, 0, 0)
ti
v1
v2
v3
v4
v5
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

1
0
0,5
0
0,375
0
0,313
0
0,281
0
0,266
0
0,258
0
0,254
0

0
1
0
0,75
0
0,625
0
0,563
0
0,531
0
0,516
0
0,508
0
0,504

0
0
0,5
0
0,5
0
0,5
0
0,5
0
0,5
0
0,5
0
0,5
0

0
0
0
0,25
0
0,375
0
0,438
0
0,469
0
0,484
0
0,492
0
0,496

0
0
0
0
0,125
0
0,188
0
0,219
0
0,234
0
0,242
0
0,246
0
195

16
17
18
19
20
21
22
23
…

0,252
0
0,251
0
0,25
0
0,25
0
…

0
0,502
0
0,501
0
0,5
0
0,5
…

0,5
0
0,5
0
0,5
0
0,5
0
…

0
0,498
0
0,499
0
0,5
0
0,5
…

0,248
0
0,249
0
0,25
0
0,25
0
…

Из рис. 6.11 и таблицы 6.9 видно, что на четных тактах ресурс
содержится в нечетных вершинах v1, v3 и v5, а на нечетных тактах –
в четных вершинах v2 и v4. В этой сети d = 2, циклическими
классами являются множества {v1, v3, v5} и {v2, v4}.
Протокол функционирования показывает, что в пределе
получается два вектора, последовательно сменяющие друг друга:

Q11* = (0,25, 0, 0,5, 0, 0,25) и Q21* = (0, 0,5, 0, 0,5, 0).
Помещая ресурс W = 1 в начальном состоянии поочередно в
каждую из вершин, получим те же два предельных вектора Q11* и

Q21* , одинаковые для всех начальных состояний: Q(0) = (1, 0, 0, 0, 0),
Q(0) = (0, 1, 0, 0, 0),
Q(0) = (0, 0, 1, 0, 0),
Q(0) = (0, 0, 0, 1, 0),
Q(0) = (0, 0, 0, 0, 1).
Поскольку d = 2, последовательность степеней стохастической
матрицы R' состоит из двух сходящихся подпоследовательностей:

196

R1'

0,5 0 0,5
0 
 0


 0,25 0 0,5 0 0,25 
= 0
0,5 0 0,5
0 ,


 0,25 0 0,5 0 0,25 
 0
0,5 0 0,5
0 


R2'

0,5
0 0,25 
 0,25 0


0,5
0
0,5
0 
 0
=  0,25 0
0,5
0 0,25  .


0,5
0
0,5
0 
 0
 0,25 0 0,25 0 0,25 



Матрицы R1' и R2' состоят из чередующихся векторов Q11* и

Q21* , причем R2' представляет собой инверсию R1' : в ней каждый
вектор Q11* заменен вектором Q21* , и наоборот. Строки 1, 3, 5,
соответствующие вершинам первого циклического класса, равны; то
же самое относится и к строкам 2, 4, соответствующим вершинам
второго циклического класса.
Оба вектора Q11* и Q21* являются собственными векторами
матрицы R2' , а матрица R1' переводит вектор Q11* в Q21* , Q21* – в

Q11* . То же самое происходит и при умножении этих векторов на
матрицу R':
Q11* R ' = Q21* , Q21* R ' = Q11* .
Умножение на стохастическую матрицу R' переводит матрицу
в R2' и наоборот.
Заметим, что сумма двух предельных матриц дает матрицу с
одинаковыми строками:

R1'

R1'  + R2' 

 0,25

 0,25
=  0,25

 0,25
 0,25


0,5
0,5
0,5
0,5
0,5

0,5
0,5
0,5
0,5
0,5

0,5
0,5
0,5
0,5
0,5

0,25 

0,25 
0,25 

0,25 
0,25 

Вектор, образующий строки этой матрицы, является левым
собственным вектором обеих матриц R1' и R2' , а также
стохастической матрицы R'; более того, если в матрице R1' + R2'
нормировать строки, получится предельная матрица А, к которой
суммируется по Чезаро последовательность R'k:

1 k 'j
R .
k →  k j =1

A = lim

(6.5)

197

A=

R1'  + R2' 
2

 0,125

 0,125
=  0,125

 0,125
 0,125


0,25
0,25
0,25
0,25
0,25

0,25
0,25
0,25
0,25
0,25

0,25
0,25
0,25
0,25
0,25

0,125 

0,125 
0,125  .

0,125 
0,125 

Матрица R' неразложима по построению. Неразложимая
неотрицательная матрица имеет единственный неотрицательный
собственный вектор (с точностью до скалярного множителя) [11].
Собственный вектор стохастической матрицы сети определяется как
сумма векторов Q11* и Q21* . Для доказательства этого факта
достаточно сложить равенства Q11* R ' = Q21* и Q21* R ' = Q11* .
Вектор абсолютных предельных вероятностей находится по
1
формуле: Q1* = (Q11* + Q21* ) .
2
6.2.2. Предельные векторы и циклы d-циклической сети
Введем некоторые дополнительные обозначения и приведем
результаты, полученные для d-циклических эргодических цепей
Маркова.
В [38] доказано, что предельная матрица А, к которой
суммируется по Чезаро последовательность R'k (формула (6.5)),
имеет вид:
A = 1,
где 1 – вектор-столбец, состоящий из единиц, а  является
единственным неотрицательным левым собственным вектором
матрицы R', соответствующим собственному числу  = 1:

R' = .

(6.6)

Также выполняется
АR' = R'А= А.
Пусть R' – стохастическая матрица эргодической dциклической ресурсной сети. Рассмотрим последовательность ее
198

степеней: R', …, R'd, R'd+1, … Она состоит из d сходящихся
подпоследовательностей:
1) R', R'dR', R'2dR', R'3dR',…
2) R'2, R'dR'2, R'2dR'2, R'3dR'2,…
…
d) R'd, R'dR'd, R'2dR'd, R'3dR'd,…
Таким образом, видно, что все пределы

R1' , …, Rd'

выражаются через одну предельную матрицу Rd' :

R1' = Rd' R ' ;
R2' = Rd' R '2 ;
…

Rd'−1 = Rd' R'd −1 .
Сумма матриц R1' , …, Rd' строго положительна. В [11]
доказано, что предельная матрица А (6.5) определяется по формуле:
A=

1
1
( E + R ' + ... + R ' d −1 ) Rd'  = Rd'  ( E + R ' + ... + R ' d −1 )
d
d

(6.7)

Для любого начального распределения единичного ресурса
выполнится:
 = Q1 (0) A .
(6.8)
Формула (6.8) означает, что каждая строка матрицы А
соответствует предельным вероятностям цепи Маркова в смысле
среднего арифметического. Далее при описании ресурсных сетей
вместо символа , обозначающего предельный вероятностный
вектор, будем использовать обозначение Q1* – вектор предельного
199

состояния при единичном ресурсе: Q1* = Q1(0)A; матрица А состоит
из n одинаковых вектор-строк, равных Q1*.
Рассмотрим процесс функционирования сети по правилу 2.
Последовательность векторов состояний делится на d сходящихся
подпоследовательностей, так же, как и последовательность степеней
стохастической матрицы.
Q(kd+1)= Q(0)R'kd R',
Q(kd+2)= Q(0)R'kd R'2,
…
Q(kd)= Q(0)R'kd R'd = Q(0)R'(k+1)d
k = 0, 1, …
Переходя к пределу, получим:

Q1* = Q(0) Rd' R' , Q2* = Q(0) Rd' R'2 , …, Qd* = Q(0) Rd' .

(6.9)

Непосредственно из выражений (6.9) следует, что:

Qi*+1 = Qi* R ' , i = 1, …, d – 1, Q1* = Qd* R ' .
Векторы Q1* , ..., Qd* будем называть предельными векторами.
Последовательность, в которой они сменяют друг друга, будем
называть предельным циклом эргодической сети.
Таким образом, доказано следующее утверждение.
У т в е р ж д е н и е 6.3. В эргодической d-циклической
ресурсной сети, функционирующей по правилу 2, существует
предельный цикл длины d, состоящий из предельных векторов
Q1* , ..., Qd* , определяемых по формуле (6.9).
Выразим через предельные векторы Q1* , ..., Qd* собственный
вектор стохастической матрицы R'.
У т в е р ж д е н и е 6.4. Для эргодической d-циклической
ресурсной сети единственным положительным собственным
200

вектором матрицы R' является вектор Q1*, определяемый по
формуле:

Q1* =

Q1* + ... + Qd*
,
d W

(6.10)

где Q1* , ..., Qd* – предельные векторы сети, функционирующей по
правилу 2, с суммарным ресурсом W и начальным состоянием Q(0).
Д о к а з а т е л ь с т в о.
Суммируя выражения (6.9), имеем:

Q1* + ... + Qd* = Q(0) Rd' ( E + R' + ... + R' d −1 ) .
Преобразуя правую часть по формуле (6.7), получим:
Q1* + ... + Qd* = dQ(0) A . (Это известные результаты теории
матриц [11]).
Но любой вектор Q(0) при условии, что сеть с нулевого такта
функционирует по правилу 2, можно представить в виде:
Q(0)=WQ1(0). Отсюда

Q1* + ... + Qd* = dWQ1 (0) A или
Q1* + ... + Qd*
= Q1 (0) A
dW

Q1* + ... + Qd*
Из формулы (6.8) имеем: Q =
. То есть матрица А
dW
состоит из n вектор-строк, определяемых формулой (6.10). А из (6.6)
следует, что Q1*R' = Q1*. 
При умножении на матрицу R', каждый вектор Qi* переходит в
1*

вектор Qi*+1 (сложение индексов происходит по модулю d). Но
существует матрица, которая оставляет все эти векторы
неподвижными.
У т в е р ж д е н и е 6.5. Предельные векторы эргодической dциклической сети Q1* , ..., Qd* являются собственными векторами
201

матрицы Rd' , соответствующими собственному числу  = 1
кратности d.
Д о к а з а т е л ь с т в о. Запишем равенства (6.9) в виде:

Qi* = Q(0) Rd' R'i , i = 1, …, d.

(6.11)

Умножим обе части (6.11) на матрицу Rd' справа.

Qi* Rd' = Q(0) Rd' R'i Rd' , но по формуле (6.7) это можно
переписать в виде:
Qi* Rd' = Q(0) Rd' Rd' R'i = Q(0) Rd' R'i

(

)

По формуле (6.11) правая часть равенства равна Qi* . Тогда

Qi* Rd' = Qi* . 
З а м е ч а н и е. В предельном случае, когда НОД всех циклов
сети равен единице, и соответственно, сеть представляет собой один
циклический класс (является регулярной), доказанные утверждения
остаются верными. В сети, функционирующей по правилу 2,
существует единственный вектор предельного состояния Q*. Он
является собственным вектором стохастической матрицы R'
Q*
(утверждение 6.3), для него верно равенство (6.10): Q1* =
W
(утверждение 6.4), и он является собственным вектором
единственной предельной матрицы R', соответствующим простому
собственному числу  = 1 (утверждение 6.5). Справедливость всех
этих утверждений следует непосредственно из свойств регулярных
цепей Маркова. Для ресурсных сетей они сформулированы в главе
3.
6.2.3. Достижение глобального равновесия
при малых ресурсах
Рассмотрим задачу нахождения начального состояния, при котором
в сети достигается глобальное равновесие, т.е. все векторы
Q1* , ..., Qd* совпадают.
202

Докажем несколько вспомогательных утверждений о
свойствах предельных векторов и предельных степеней матриц.
Л е м м а 6.1. В эргодической d-циклической ресурсной сети,
функционирующей по правилу 2, предельные векторы Q1* , ..., Qd*
при одинаковом суммарном ресурсе в циклических классах не
зависят от распределения ресурса по вершинам внутри классов в
начальном состоянии.
Д о к а з а т е л ь с т в о. Матрица R' импримитивна с
индексом импримитивности d. В [11] доказано, что ее степень R'd
разлагается на d примитивных матриц, которые имеют одно и то же
максимальное характеристическое число. Это означает, что
существует такая нумерация вершин, при которой R'd блочнодиагональна. Блоки соответствуют циклическим классам.
'd
 R11

 0
R 'd = 

 0


0
'd
R22
0

... 0 

... 0 
.


'd 
... Rdd


Каждая матрица Rii' d неразложима и примитивна по
определению, кроме того, все эти матрицы являются
стохастическими. Каждая из них задает регулярную цепь Маркова.

( ) также является блочной с блоками (R ) .
Каждая пара блоков R и (R ) имеет один и тот же единственный
Матрица Rd'  = lim R'd

'd 
ii

k

k →

'd
ii

'd 
ii

положительный собственный вектор i, соответствующий
максимальному собственному числу  = 1, i = 1, …, d.
Поскольку сеть с первого такта функционирует по правилу 2,
т.е. вершины отдают весь свой ресурс, на каждом такте ресурс из
каждого циклического класса полностью переходит в следующий
класс.
Вектор состояния Q(0) можно разложить в сумму векторов
Qi(0), каждый из которых соответствует одному циклическому
классу. Тогда поскольку матрицы Rii' d регулярны, при Wi = 1 для
*
любого Qi(0) имеют место равенства Qi (0) Rii' = Qdi
= i .
Для произвольного суммарного ресурса W при условии, что

203

сеть с первого такта функционирует по правилу 2, для любого Qi(0)
выполнится:
*
Qi (0) Rii' = Qdi
= Wi i , где Wi – суммарный ресурс в i-м
циклическом классе.
*
Прямая сумма векторов Qdi
даст единственный вектор Qd* .
Остальные векторы предельного цикла получаются из Qd*
умножением на соответствующие степени матрицы R' и тоже
определяются единственным образом. 
Л е м м а 6.2. Пусть эргодическая d-циклическая ресурсная
сеть функционирует по правилу 2, причем ее суммарный ресурс
W = 1 сосредоточен в начальном состоянии в m-м циклическом
классе. Тогда предельные матрицы R 'j = Rd'  R ' j , j = 1, …, d – 1,
содержат
d
различных
строк,
причем
на
строках,
соответствующих номерам вершин из i-го циклического класса,
находится вектор Qk* , где k  [1, d] находится по формуле
k  m + j + i – 3 (mod d) + 1 , i, j = 1, …, d.

(6.12)

Д о к а з а т е л ь с т в о. Рассмотрим начальное состояние, в
котором ресурс находится в первом циклическом классе (m = 1). Не
нарушая общности, предположим, что этому классу принадлежит
вершина v1. Пусть Q(0) = (1, 0, …, 0). Обозначим этот вектор
начального состояния через Q1(0).
Имеем:
Q1* = Q1 (0) R1' = ( R1' )1 ,

Q2* = Q1 (0) R2' = ( R2' )1 ,
…

Qd* = ( Rd' )1 ,
где ( R 'j )1 – первая строка матрицы R 'j .
По лемме 1, вместо вершины v1 может быть взята любая
вершина из первого циклического класса. Таким образом, в
204

матрицах R 'j в строках, соответствующих номерам вершин из
первого циклического класса, стоят векторы Q*j .
Для каждого вектора

Qi*+1

(i = 1, …, d – 1) справедливо

Qi*+1 = Qi* R ' , Q1* = Qd* R' ; для предельных матриц выполняется:
R 'j+1 = R 'j R ' . Это означает, что каждая матрица R 'j в строках,
соответствующих номерам вершин из i-го циклического класса,
содержит векторы с номером j + i – 1 при j + i – 1  d, и с номером
j + i – 1 – d при j + i – 1 > d. Индекс k вектора Qk* , удовлетворяющий
этим условиям, находится по формуле: k  j + i – 2 (mod d) + 1.
Обобщая эту формулу на произвольный класс с номером m,
получим:
k  m + j + i – 3 (mod d) + 1. 
С помощью полученных результатов докажем лемму о
существовании равновесного состояния в циклических сетях.
Л е м м а 6.3. В эргодической d-циклической ресурсной сети,
функционирующей по правилу 2, предельные векторы Q1* , ..., Qd*
совпадают, если в каждом из циклических классов в начальном
W
состоянии находится одинаковое количество ресурса
и для
d
каждой вершины выполнено qi(0)  riout . Вектор предельного
состояния равен WQ1* , где Q1* – любая строка матрицы А,
определяемой по формуле (6.7).
Д о к а з а т е л ь с т в о. Рассмотрим d векторов начального
состояния с единичным ресурсом, сосредоточенным в некоторой
вершине каждого из циклических классов: Qm(0), где m – номер
циклического класса, m = 1, …, d.
Обозначим их предельные векторы через Q *jm , где j – номер
предельного вектора при заданном начальном состоянии. Получим
следующие равенства:

Q*j m = Qm (0) Rd' R ' j = Q1 (0) Rd' R ' j + m = Qk* ,

205

где Qk* = Qk*1 – предельные векторы при ресурсе, находящемся в
первом классе, индекс k  [1, d] вычисляется по формуле (9) при
m = 1.
Сложим векторы Qi(0) и найдем первый предельный вектор.

(Q1 (0) + ... + Qd (0)) Rd' R ' = Q1*1 + ... + Qd*1 = Q1* + ... + Qd* .
Для второго предельного вектора имеем:

(Q1 (0) + ... + Qd (0)) Rd' R '2 = Q1*2 + ... + Qd*2 = Q2* + ... + Qd* + Q1* .
В общем случае m-й предельный вектор будет суммой
векторов Q1* + ... + Qd* с циклически переставленными слагаемыми.
Таким образом, если в начальном состоянии в каждом
циклическом классе находится единичный ресурс, все d предельных
векторов совпадают.
Если ресурс в каждом классе пропорционально увеличить в
W
раз, предельные векторы будут равны при условии, что все
d
вершины сети функционируют по правилу 2. 
Условие на начальное состояние в лемме 6.3 можно ослабить.
Если ресурс в начальном состоянии распределен между
циклическими классами неравномерно, и при этом некоторые
вершины первые несколько тактов функционируют по правилу 1, то
за эти такты может произойти выравнивание ресурса в циклических
классах. Таким образом, справедливо более общее утверждение.
Т е о р е м а 6.1. В эргодической d-циклической ресурсной
сети, функционирующей по правилу 2, начиная с некоторого
момента t', предельные векторы Q1* , ..., Qd* совпадают тогда и
только тогда, когда в каждом из циклических классов при t = t'
W
находится одинаковое количество ресурса
. Вектор предельного
d
состояния равен WQ1* , где Q1* – любая строка матрицы А,
определяемой по формуле (6.7).
Д о к а з а т е л ь с т в о.
1. Пусть при t = t' вся сеть функционирует по правилу 2 и в
каждом циклическом классе находится одинаковое количество
206

ресурса. Приняв Q(t') за новое начальное состояние, получим
условие леммы 6.3.
2. Пусть в сети, функционирующей по правилу 2, векторы
*
Q1 , ..., Qd* совпадают. По определению для предельного цикла
выполняются соотношения: Qi*+1 = Qi* R' , i = 1, …, d – 1, Q1* = Qd* R' .
Тогда имеем: Qi* = Qi*R' , i = 1, …, d . Умножение на матрицу R'
переводит весь суммарный ресурс каждого класса в следующий
циклический класс. Совпадение векторов происходит только при
одинаковых суммарных ресурсах в каждом циклическом классе. 
Проиллюстрируем теорему 6.1 примером.
П р и м е р 6.9. Пусть в сети с матрицей пропускных
способностей (6.4) начальное состояние Q(0) = (4, 0, 0, 0, 0).
Функционирование сети представлено на рис. 6.12, построенном на
основании табл. 6.10.

Рис. 6.12. Функционирование сети, заданной графом
с матрицей (6.4), Q(0) = (4, 0, 0, 0, 0)

Таблица 6.10
t
0
1

v1
4,000
2,000

Протокол работы сети
v2
v3
v4
0,000
2,000

0,000
0,000

0,000
0,000

v5
0,000
0,000
207

2
3
4
5
…
20
21
22
23
…

1,000
1,000
0,750
0,750

2,000
1,500
1,500
1,250

0,000
0,500
0,500
0,750

1,000
1,000
1,000
1,000

0,000
0,000
0,250
0,250

0,501
0,501
0,500
0,500

1,002
1,001
1,000
1,000

0,998
0,999
1,000
1,000

1,000
1,000
1,000
1,000

0,499
0,499
0,500
0,500

Из протокола видно, что ресурс, в начальном состоянии
находившийся в первом циклическом классе, на первом такте
разделился поровну между двумя классами. Одновременно с этим
все вершины перешли на правило 2, и дальнейшего
перераспределения ресурса между циклическими классами не
происходит. Сеть стабилизируется; в каждом классе суммарный
ресурс равен 2. Два предельных вектора совпадают между собой. В
сети имеется равновесное состояние:
Q * = Q1* = Q2* = (0,5, 1, 1, 1, 0,5).

6.3. Пороговое значение Т и функционирование
циклических сетей при больших ресурсах
6.3.1. Пороговое значение Т
В регулярных сетях существование и единственность порогового
значения Т вытекали из единственности вектора предельного
состояния при малых ресурсах. Все компоненты вектора Q* при
увеличении W вплоть до значения Т, увеличивались
пропорционально, пока одна или несколько из них не принимали
значения, равные своим суммарным выходным пропускным
способностям. Это значение суммарного ресурса и было пороговым.
Вершины с ресурсом, достигшим выходных пропускных
способностей при W = T, – потенциальные аттракторы сети. При
дальнейшем увеличении ресурса пропорциональность компонент
нарушается, и все излишки сверх Т накапливаются в аттракторах.
В циклической сети существует d предельных векторов, в
общем случае не равных друг другу. Кроме того, каждый из этих
векторов зависит от начального состояния. Единственность
порогового значения в такой сети уже неочевидна.

208

Будем говорить, что если в циклической сети d предельных
векторов равны при любом начальном состоянии (с фиксированным
суммарным ресурсом), в ней существует предельное состояние Q*:

Q1* = ... = Qd* = Q* .
Т е о р е м а 6.2. В эргодической d-циклической ресурсной сети
существует единственное пороговое значение Т, такое, что:
при W < T все вершины за конечное число тактов переходят
на правило 2, и в сети имеется d предельных векторов;
при W  T потоки стабилизируются, и в сети достигается
глобальное равновесие при любом начальном состоянии.
Предельный поток существует и единствен. Предельное состояние
существует; оно не зависит от начального состояния в том и
только в том случае, когда сеть имеет один аттрактор.
Д о к а з а т е л ь с т в о. В сети, все вершины которой
функционируют по правилу 2, существует предельный цикл из d
предельных векторов. Если в начальном состоянии некоторые
вершины функционируют по правилу 1, но все они за конечное
число тактов N переходят на правило 2, то, взяв Q(N+1) за новое
начальное состояние, вновь получим предельный цикл из d
векторов. Верхняя граница суммарного ресурса, при котором все
вершины функционируют по правилу 2, равна Т. Т существует для
любой сети.
Докажем, что значение Т единственно и не зависит от
начального состояния. При W = T по крайней мере одна вершина
имеет ресурс, равный своей выходной пропускной способности.
Пусть это вершина vj. Для нее q*j = r jout в каждом из d предельных
векторов.
Матрица R' импримитивна с индексом импримитивности d.
Это означает, что ее степень R'd разлагается в прямую сумму d
регулярных матриц, соответствующих циклическим классам Rii' d
(см. лемму 6.1). Предельные векторы сети выражаются через
собственные векторы этих матриц. Вершина vj является аттрактором
в некотором циклическом классе с номером i. Если с первого такта
все вершины функционировали по правилу 2, для него выполняется:
*
Qi (0) Rii' = Qdi
= Wi i , где Wi – суммарный ресурс в i-м циклическом
классе, i – вектор предельных вероятностей соответствующей цепи
209

Маркова. Для сети, описываемой регулярной матрицей Rii' d ,
пороговое значение существует и единственно. Обозначим его через
*
out
*
Ti. Тогда при Wi = Ti имеем qdi
j = r j , где qdi j – j-я компонента

( )

( )

*
вектора Qdi
. Но чтобы ресурс вершины vj был равен r jout на каждом

такте, суммарный ресурс i-го циклического класса должен быть
равен Ti также на каждом такте. Если сеть функционирует по
правилу 2, ресурс циркулирует по циклическим классам, не
перемешиваясь. Если раскрасить ресурс в каждом классе в свой
цвет, ресурсы разных цветов на любом такте будут целиком в одном
классе. Пороговое значение Т определяется как максимальный
ресурс, при котором все вершины функционируют по правилу 2 при
t → . Тогда при t →  каждый циклический класс на каждом такте
должен содержать Ti ресурса. А пороговое значение ресурса сети
вычисляется по формуле: T = dTi.
Поскольку каждая компонента имеет одинаковое количество
ресурса, поток в сети стабилизируется, и все предельные векторы
одинаковы.
При W > T как минимум один аттрактор (пусть это вновь будет
вершина vj) за конечное число тактов переходит на правило 1. То
есть существует такой момент времени t', что при t  t' вершина vj
функционирует по правилу 1. На каждом такте она отдает ресурс,
равный r jout , и получает ресурс, не меньший r jout . Тогда в нее можно
добавить петлю с пропускной способностью q j (t ' ) − r jout , по которой
на каждом такте будет проходить неотрицательный поток, равный
q j (t ' ) − r jout . Функционирование сети при этом не изменится. Но
наличие петли влечет за собой потерю цикличности, и сеть
превращается в регулярную. В регулярной сети поток существует и
единственен. Предельное состояние единственно во всех вершинах,
кроме потенциальных аттракторов. Если в сети единственный
аттрактор, предельное состояние также единственно. 
6.3.2. Критерий аттрактивности
и потенциальные аттракторы
Докажем, что для вершин в произвольной d-циклической сети
выполняется тот же критерий аттрактивности, что и для вершин в
несимметричной регулярной сети.
210

Т е о р е м а 6.3. В эргодической d-циклической ресурсной сети
вершина vj является потенциальным аттрактором, если и только
r out
если j = arg min i 1* , где вектор Q1* определяется по формуле
i{1,...,n} q
i
Q1* =

1
d

d

 Qk1* ,

(6.13)

k =1

векторы Qk1* (k = 0, …, d) – предельные векторы при W = 1 и
произвольном начальном состоянии.
Д о к а з а т е л ь с т в о. Из теоремы 6.2 следует, что при W = T
предельное состояние сети при любом начальном состоянии
единственно, и все ее d предельных векторов равны. Но для W  T
выполняется равенство: Q1* + ... + Qd* = dWQ1* , где вектор Q1*,
вычисляемый по формуле (6.13), – единственный положительный
собственный вектор стохастической матрицы R'. Непосредственно
отсюда
следует,
что
предельное
состояние
сети
*
*
*
1*
Q = Q1 = ... = Qd = TQ . Таким образом, функционирование сети
начинает описываться регулярной матрицей A, состоящей из n строк
Q1*:
A = 1 Q1*.
Для сети, функционирование которой описывается матрицей
А, справедливы все результаты, полученные для регулярных сетей.
Таким образом, для того, чтобы вершина vj была аттрактором,
r out
необходимо и достаточно выполнение условия j = arg min i 1*
i{1,...,n} q
i
(теорема 4.4, глава 4). 
С л е д с т в и е 6.1. В эйлеровых d-циклических сетях при
больших ресурсах предельное состояние полностью зависит от
начального, так как каждая вершина в них – потенциальный
аттрактор.

211

С л е д с т в и е 6.2. В эргодической d-циклической ресурсной
пороговое значение Т определяется по формуле:
r out
T = min i 1* .
i{1,...,n} q
i

сети

6.3.3. Предельное состояние и предельный поток
при больших ресурсах
Обобщив полученные результаты, сформулируем для циклических
сетей теоремы о предельном состоянии и потоке при W > T,
аналогичные теоремам о регулярных сетях. Их доказательства
следуют из теорем 6.2–6.3 и следствия 6.2.
Т е о р е м а 6.4 (о п р е д е л ь н о м с о с т о я н и и).
В
эргодической d-циклической ресурсной сети при W  T значения
неаттрактивных компонент вектора предельного состояния
Q* = q1* , ..., qn* вычисляются по формуле

(

)

=
 T , i  jk, jk – номера аттракторов,
где:
1) вектор Q1* определяется по формуле (6.13),
qi*

qi1*

riout
2) T = min
,
i{1,...,n} q1*
i

riout
.
i{1,...,n} q1*
i
Оставшийся ресурс распределяется между потенциальными
аттракторами.
Проиллюстрируем теорему следующим примером.
П р и м е р 6.11.
Рассмотрим
функционирование
неоднородной сети, содержащей циклы с общими ребрами.
3) jk определяются из условия: jk = arg min

212

1

2

4

3

5

6

Рис. 6.13. Циклы с общими ребрами

В этой сети четыре циклических множества: {v1, v5}, {v2, v6},
{v3} и {v4}. Пусть матрица пропускных способностей сети имеет
вид:
0 1 0 0 0 0


0 0 3 0 0 0
0 0 0 2 0 0
 . rsum = 18.
R =
 2 0 0 0 5 0
 0 0 0 0 0 4


0 0 1 0 0 0


Тогда при помещении в начальном состоянии ресурса W = 1 в
любую из шести вершин предельные векторы будут:

Q11* = (0,286, 0, 0, 0, 0,714, 0), Q21* = (0, 0,286, 0, 0, 0, 0,714),

Q31* = (0, 0, 1, 0, 0, 0), Q41* = (0, 0, 0, 1, 0, 0).
Собственный вектор стохастической матрицы находится как
их среднее арифметическое (формула (6.13)):
Q1* = (0,0715, 0,0715, 0,25, 0,25, 0,1785, 0,1785).

riout
Вычислим значение отношения 1* для каждой вершины.
qi
213

r1out
1

 14 ,
1*
0,0715
q1

r2out
3

 42 ,
1*
0,0715
q2

r3out
2

= 8,
1*
0,25
q3

r4out
7

= 28 ,
1*
0,25
q4

r5out
4

 22,4 ,
1*
0,1785
q5

r6out
1

 5,6 .
1*
0,1785
q6

riout
достигается в вершине v6.
qi1*
Таким образом, v6 – единственный потенциальный аттрактор
этой сети. По следствию 6.2 из теоремы 6.2, T  5,6.
При W = T предельное состояние при любом начальном:
Минимум

~
Q = (0,4, 0,4, 1,4, 1,4, 1, 1) .

Этому же вектору равны предельные входной и выходной
потоки.
При W > T, излишек ресурса скапливается в аттракторе,
остальные
компоненты
предельного
вектора
остаются
неизменными. Например, при W = 20, при любом начальном
состоянии предельное состояние равно
Q* = (0,4, 0,4, 1,4, 1,4, 1, 15,4).
Излишек ресурса аккумулировался в аттракторе. Остальные
компоненты предельного вектора не изменились.
Т е о р е м а 6.5 (о п р е д е л ь н о м п о т о к е).
В
эргодической d-циклической ресурсной сети при W  T предельный
поток существует, единственен и определяется по формуле:

~
fiin* = fiout* = qi1*T ; F in* = Fi out* = Q1*T = Q ,
где
1) вектор Q1* определяется по формуле (6.13),
214

riout
2) T = min
.
i{1,...,n} q1*
i
З а м е ч а н и е. В регулярных сетях при разделении ресурса на
«малый» и «большой», пороговое значение Т, по которому проходит
эта граница, относился к малым ресурсам. Это связано с тем, что
при W = T сеть описывается регулярной цепью Маркова, как и при
меньших значениях суммарного ресурса, и предельное состояние в
ней единственно. Т.е. в регулярных сетях суммарный ресурс
разбивается на значения W  T и W > T. В циклических сетях
значение Т входит в «большой» ресурс, так как при W  T сеть имеет
предельное состояние, в то время как при W < T существует лишь
предельный цикл из d предельных векторов.

Комментарий к главе 6
В этой главе впервые исследуется класс нерегулярных сетей –
эргодические
(т.е.
сильно
связные)
циклические
сети.
Нерегулярность таких сетей наиболее явно проявляется в том, что
при малом ресурсе предельного состояния не существует. Тем не
менее, базовые понятия модели остаются в силе. В частности,
важным свойством циклических сетей является то, что, как и в
регулярных сетях, существует порог Т величины ресурса, при
переходе через который сеть резко меняет свое поведение. Поэтому,
как и прежде, поведение при малых и больших ресурсах
существенно различается. Наряду с тем, что, как и в регулярных
сетях, при большом ресурсе появляются аттракторы, которые
забирают излишки ресурса W – T, порог в циклических сетях играет
еще одну важную роль: при большом ресурсе цикличность
поведения сети перестает быть явной – предельное состояние и
предельный поток существуют.
Может показаться странным, что половина главы посвящена
исследованию довольно простого частного случая циклической сети
– элементарного цикла. Однако это не случайно. В начале главы
отмечалось, что конденсация графа любой d-циклической сети по
циклическим классам преобразует граф в элементарный цикл длины
d. Следует ожидать, что многие свойства динамики циклических
сетей будут видны уже при рассмотрении элементарных циклов.
Это подтверждается следующей таблицей, в которую сведены
основные результаты главы 6.
215

Элементарный цикл

Произвольные
эргодические
d-циклические сети

216

Малый ресурс:
W<T
Сеть устойчива с
самого начала, если
и только если в
начальном
состоянии ресурс
одинаков во всех
вершинах. В
остальных случаях
последовательность
ее состояний,
начиная с
некоторого
момента,
становится
периодической.

Предельное
состояние
существует, если
и только если в
момент, когда все
вершины
оказались в зоне
Z–(t), во всех
циклических
классах
содержится
одинаковый
ресурс.
В остальных
случаях
существует

W=T
Предельный
поток и
предельное
состояние
существуют и
единственны.
Вектор
предельного
потока равен
вектору
предельного
состояния

Предельный
поток и
предельное
состояние
существуют и
единственны.
Вектор
предельного
потока равен
вектору
предельного
состояния

Большой ресурс:
W>T
Предельные
состояние и
поток
существуют,
причем
предельный
поток
единственен.
Предельное
состояние
единственно в
том и только в
том случае,
когда в сети есть
только один
потенциальный
аттрактор. В
противном
случае
распределение
ресурса сверх
порогового
значения W – T
зависит от
начального
состояния.
Предельные
состояние и
поток
существуют,
причем
предельный
поток
единственен.
Предельное
состояние не
зависит от
начального
состояния в том
и только в том
случае, когда в
сети есть только

предельный цикл
длины d,
состоящий из
предельных
векторов

один аттрактор.

Q1* , ..., Qd* .
Как видим, общая схема поведения d-циклической сети при
малых и больших ресурсах одинакова как для элементарных циклов,
так и в общем случае. Детали, разумеется, различны. Например,
условие существования предельного состояния при W < T для
элементарного цикла формулируется в терминах вершин, а для
произвольной циклической сети – в терминах циклических классов.
Наиболее важным различием является то, что в элементарном цикле
периодическая последовательность устанавливается за конечное
время, а порог Т вычисляется по простым формулам. В
произвольной d-циклической сети каждый из предельных векторов
пределом
одной
из
d
сходящихся
Q1* , ..., Qd* является
подпоследовательностей, а формула для порога более сложна.

217

ГЛАВА 7. ПОГЛОЩАЮЩИЕ СЕТИ,
в которой:
• Описываются свойства поглощающих ресурсных сетей. Доказывается,
что предельное состояние в них существует.
• Показывается, что в поглощающих сетях нет порогового значения Т.
• Рассматривается специальный класс поглощающих сетей, в которых
предельное состояние единственно и при фиксированном суммарном
ресурсе не зависит от начального состояния. Блок Н матрицы R,
содержащий пропускные способности ребер между переходной и
стоковой компонентами, в таких сетях имеет в них ранг 1. Для таких
сетей приводится формула предельного состояния, выражающая
количество ресурса в стоках только через его начальное количество в
них, суммарное значение ресурса в переходной компоненте и элементы
матрицы Н.
• Находится предел степеней стохастической матрицы R'.
• Доказывается инвариантность матрицы R' относительно любого
изменения в диагональных элементах матрицы R.
• Доказывается теорема о предельном состоянии сети при любой
матрице пропускных способностей. Предельное состояние зависит от
начального и находится по формуле Q* = Q(0)R'. Этот результат
отличен от результатов, полученных для регулярных сетей, где при
больших ресурсах сеть становится нелинейной. В поглощающих сетях
линейность может быть нарушена на конечном отрезке, но вновь
восстанавливается в предельном состоянии.
• Из двух предыдущих пунктов следует, что предельное состояние в
поглощающей сети не зависит от наличия петель ни в стоковой, ни в
переходной компонентах.

Поглощающими ресурсными сетями называются сети со
стоковыми вершинами, т.е. с вершинами, не имеющими исходящих
ребер, кроме, возможно, петли. Основные определения, касающиеся
поглощающих сетей, были даны в п. 2.3. Там же было показано, что
изучение любой сети, состоящей из переходной компоненты и
одной или нескольких эргодических компонент, можно свести к
отдельному изучению эргодических компонент и поглощающей
сети, где вместо каждой эргодической компоненты будет
единственная вершина-сток.

7.1. Свойства поглощающих ресурсных сетей
Пусть поглощающая сеть имеет l стоков с номерами от 1 до l. Ее
матрицу пропускных способностей можно представить в блочном
виде:
218

 D O1 
 ,
R = 
R
R
2
 1

(7.1)

где D – диагональная матрица размера l  l с произвольными
неотрицательными
диагональными
элементами,
равными
пропускным способностям петель в стоках (если они есть), О1 –
нулевая матрица размера l  (n – l), R1 – матрица размера (n – l)  l, и
R2 – квадратная матрица (n – l)  (n – l). Матрица R1 состоит из
пропускных способностей ребер, ведущих из переходной
компоненты в стоки, матрица R2 – из пропускных способностей
ребер, соединяющих вершины внутри переходной компоненты.
Стохастическая матрица R', соответствующая такой матрице R,
будет иметь вид
 E O1 

(7.2)
R' =  1'
' .
 R1 R2 
При этом даже если матрица D имеет на диагонали нулевые
элементы (т.е. одна или несколько стоковых вершин не имеют
петель), блок E1 матрицы R', соответствующий D, будет единичной
матрицей. Во-первых, с формальной точки зрения, это
поддерживает стохастические свойства матрицы R', а во-вторых,
фактически матрица Е1 отвечает за то, что весь ресурс в стоках
остается в них, независимо от наличия петель.
Перечислим свойства поглощающих сетей, вытекающие
непосредственно из их топологии и имеющие очевидную
интерпретацию.
С в о й с т в о 7.1. Предельное состояние в поглощающих
сетях существует. Координаты вектора предельного состояния,
соответствующие
переходной
компоненте,
равны
нулю.
Предельный поток состоит из потока в петлях стоковых вершин.
В самом деле, количество ресурса в переходной компоненте на
каждом такте падает. Ресурс перетекает в стоковые вершины за
конечное время, если вершины из переходной компоненты не
имеют петель. Если петли есть, ресурс в этой компоненте стремится
к нулю асимптотически. Предельный поток во всех ребрах, кроме
петель стоков стремится к нулю.
Из этого свойства следует, что если сеть не имеет петель,
предельный поток в ней равен нулю, т.е. функционирование сети
останавливается, чего в регулярных и эргодических сетях не
219

происходит никогда. Если в стоках имеются петли, ресурс
циркулирует только по ним; поток в петлях переходных вершин
стремится к нулю при t → .
С в о й с т в о 7.2. Наличие или отсутствие петель в стоках
не влияет на распределение ресурса в стоках в предельном
состоянии при неизменном начальном состоянии.
Действительно, петля отвечает за то, какое количество ресурса
не покинет вершину, но поскольку у стока нет исходящих ребер, то
весь ресурс, пришедший туда, больше никуда не уходит. Наличие
или отсутствие петли, а также ее пропускная способность, не
влияют на количество ресурса в вершине.
Справедливо и гораздо более сильное утверждение.
С в о й с т в о 7.3. Наличие или отсутствие петель в
переходных вершинах никак не влияет на количество ресурса в
стоках в предельном состоянии при неизменном начальном
состоянии.
Свойства 7.2 и 7.3 вытекают из теоремы 7.2, доказанной ниже.
Хотя их доказательство нетривиально, физический смысл нагляден.
Петли в стоках не влияют на функционирование сети, поскольку из
стоковых вершин ресурс не выходит. Петли в переходных вершинах
задерживают распределение ресурса, но не нарушают пропорции, в
которой он распределяется в исходящие ребра. Таким образом,
координаты предельного вектора, соответствующие стоковым
вершинам, остаются неизменными.
П р и м е р 7.1. Рассмотрим сеть с пятью вершинами, две из
которых, v1 и v2, являются стоками. Ее матрица пропускных
способностей имеет вид:
10 0 0 0 0 


 0 20 0 0 0 
R =  6 1 2 3 5


 1 6 6 7 1
 0 0 1 3 4


Все диагональные элементы этой матрицы отличны от нуля,
т.е. все вершины имеют петли. Пусть начальное состояние
Q(0) = (0, 0, 30, 10, 10).
Предельное
состояние
будет:
*
Q = (26.428, 23.572, 0, 0, 0).
Функционирование сети представлено на рис. 7.1.
220

Рис. 7.1. Функционирование поглощающей сети с петлями

Если убрать из сети все петли, все диагональные элементы
матрицы R станут равны нулю:

0

0
R = 6

1
0


0
0
1
6
0

0
0
0
6
1

0
0
3
0
3

0

0
5

1
0 

Начальное состояние Q(0) = (0, 0, 30, 10, 10) приведет к такому
же предельному состоянию Q* = (26.428, 23.572, 0, 0, 0), только за
меньшее число шагов, поскольку ресурс не задерживается в петлях
вершин переходной компоненты. При этом функционирование сети
останавливается (рис. 7.2).

221

Рис. 7.2. Функционирование поглощающей сети без петель

Из этих рисунков видно, что, хотя относительная пропускная
способность петель в первом случае была достаточно велика,
распределение ресурса в сети с петлями и без петель имеет мало
отличий.
С в о й с т в о 7.4. В поглощающей сети с несколькими
стоками и произвольными пропускными способностями ребер в
общем случае предельное состояние полностью зависит от
начального при любом суммарном ресурсе.
Этим свойством поглощающие сети отличаются от всех
остальных. В общем случае ни при каких ресурсах, в отличие от
регулярных сетей, они не имеют единственного предельного
состояния, к которому сеть сходилась бы из произвольного
начального состояния. Однако есть частные случаи поглощающих
сетей с несколькими стоками, в которых предельное состояние не
зависит от начального распределения ресурса в вершинах
переходной компоненты. То есть, если в начальном состоянии весь
ресурс находится в переходной компоненте, то предельное
состояние единственно.

222

7.2. Поглощающие сети с единственным
предельным состоянием
Рассмотрим поглощающую сеть, матрица пропускных способностей
которой имеет вид:
 D O1 
 ,
(7.3)
R = 
H
R
2

Ее отличие от матрицы (7.1) заключается в блоке H – он имеет
ранг, равный единице: rank H = 1. Это означает, что пропускные
способности ребер, ведущих из переходной компоненты в стоки,
пропорциональны, т.е. пропорциональны столбцы матрицы Н.
Т е о р е м а 7.1. В поглощающей сети с матрицей (7.3), в
которой rank H = 1, для любого начального состояния Q(0) = (q1(0),
…, ql(0), ql+1(0), …, qn(0)) предельное состояние определяется
формулой:


hin
hin
Q* =  q1 (0) + 1 W − ,..., ql (0) + l W − ,0,...,0  ,
(7.4)
h
h
sum
sum


где W − =

n

 qi (0) ,

i = l +1

h inj – сумма j-го столбца матрицы Н, hsum –

сумма всех элементов матрицы Н.
Д о к а з а т е л ь с т в о.
1. Вклады в предельные значения ресурса стоковых компонент
слагаемых q1(0), …, ql(0) очевидны, так как ресурс из стока выйти не
может.
2. Если ранг матрицы равен 1, то все ее строки и столбцы
пропорциональны. Матрицу Н можно записать в виде:
 h1

 h
H = 2
...

h
 n −l

 2 h1
 2 h2
...
 2 hn − l

...  l h1 

...  l h2 
.
...
... 

...  l hn − l 

Если некоторая вершина vj из переходной компоненты
функционирует по правилу 1, она будет отдавать в стоки ресурс,
равный пропускным способностям ребер: hj, 2hj, …, lhj. Т.е. в
каждый сток он попадет в пропорции 1 : 2 : … : l. Если вершина
223

функционирует по правилу 2, она отдает в стоки ресурс, равный
 hj

h j 2
h jl

 , и стоки получат ресурс в той же
q
(
t
),
q
(
t
),...,
q
(
t
)
j
j
j
out
out
 h out

h
h
j
j
 j

пропорции 1 : 2 : … : l. Тогда суммарный входящий ресурс в
стоках на каждом такте также делится в соотношении 1 : 2 : … : l.
Соответственно, в такой же пропорции он распределится между
стоками в предельном состоянии. То есть ресурс, пришедший в
стоки из переходной компоненты, будет равен:

l
2
1
W−,
W − , …,
W−.
1 +  2 + ... +  l
1 +  2 + ... +  l
1 +  2 + ... +  l
Входные
соответственно:

пропускные

способности

стоков

равны

h1in = h1 + h2 +…+ hn-l,
hkin = k(h1 + h2 +…+ hn-l), k = 2, …, l.
Суммарная пропускная способность матрицы Н:
hsum = (h1 + h2 +…+ hn-l)(1+2 + … + l).
hin
k
hin
l
h1in
1
=
, k =
,…, l =
,
hsum 1 +  2 + ... +  l
hsum 1 +  2 + ... +  l hsum 1 +  2 + ... +  l

откуда и вытекает формула (7.4). 
С л е д с т в и е 7.1. Если в начальном состоянии весь ресурс
находится в переходной компоненте, т.е. q1(0) = … = ql(0) = 0, то
предельное состояние единственно и не зависит от начального
распределения ресурса по вершинам.
С л е д с т в и е 7.2. Из формулы предельного состояния
видно, что матрица R2 в сети, у которой rank H = 1, может быть
любой. Перетоки ресурса внутри переходной компоненты никак не
влияют на предельное состояние.
Проиллюстрируем теорему 7.1 примерами.
П р и м е р 7.2. Матрица 77 с тремя стоками v1, v2, v3.
224

0

0
0

R = 1
1

1

1

0 0 0 0 0 0

0 0 0 0 0 0
0 0 0 0 0 0

1 1 2 3 0 4
1 1 6 7 8 0 
1 1 9 1 2 3

1 1 6 7 8 9

Матрица H в этом примере состоит из одинаковых элементов.
Распределение любого ресурса W в любой пропорции между
вершинами v4, …, v7 приводит к предельному состоянию
W W W

Q * =  , , ,0,0,0,0  .
На
рис.
7.3
представлено
3 3 3

перераспределение ресурса, равного 30, и в начальном состоянии
находящегося в переходной компоненте.

Рис. 7.3. Функционирование поглощающей сети

Q(0) = (0, 0, 0, 0, 10, 10, 10) → Q* = (10, 10, 10, 0, 0, 0, 0)

225

Рассмотрим случай, когда все входные пропускные
способности стоков разные, но ранг матрицы Н по-прежнему равен
единице.
П р и м е р 7.3. Сеть задана матрицей:

0

0
0

R = 1
2

3

4

0 0 0 0

0 0 0 0 0 0
0 0 0 0 0 0

2 7 2 3 0 4
4 14 6 7 8 0 
6 21 9 1 2 3 

8 28 6 7 8 9 
0

0

При распределении любого ресурса W в любой пропорции
между четырьмя переходными вершинами предельное состояние
будет:
 W 2W 7W

Q* =  ,
,
,0,0,0,0  .
 10 10 10

На рис. 7.4 представлено функционирование сети с вектором
начального состояния Q(0) = (0, 0, 0, 20, 10, 10, 10).

226

Рис. 7.4. Функционирование поглощающей сети с тремя стоками
и матрицей H, имеющей ранг 1.
Q(0) = (0, 0, 0, 20, 10, 10, 10) → Q* = (5, 10, 35, 0, 0, 0, 0)

7.3. Поглощающие сети общего вида.
Пороговое значение Т
Будем рассматривать произвольные поглощающие сети, наложив на
них единственное ограничение: переходная компонента должна

( )

k

'
быть регулярной, т.е. существует такое k ≥ 1, что матрица R2
строго положительна.
Если матрица R1 имеет ранг больше единицы, распределение
ресурса в предельном состоянии всегда зависит от начального. При
этом элементы матрицы R2 тоже начинают играть роль в
формировании предельного состояния.
П р и м е р 7.4. Пусть одна пропускная способность в матрице
Н из примера 7.2 отлична от остальных.

227

0

0
0

R = 1
1

1

1

0 0 0 0 0 0

0 0 0 0 0 0
0 0 0 0 0 0

1 1 2 3 0 4
1 1 6 7 8 0 
1 1 9 1 2 3

7 1 6 7 8 9

Помещая ресурс, равный единице, поочередно в каждую из
переходных вершин, найдем предельные состояния.
Q(0) = (0, 0, 0, 1, 0, 0, 0) → Q* = (0.280, 0.440, 0.280, 0, 0, 0, 0)
Q(0) = (0, 0, 0, 0, 1, 0, 0) → Q* = (0.290, 0.420, 0.290, 0, 0, 0, 0)
Q(0) = (0, 0, 0, 0, 0, 1, 0) → Q* = (0.282, 0.436, 0.282, 0, 0, 0, 0)
Q(0) = (0, 0, 0, 0, 0, 0, 1) → Q* = (0.232, 0.536, 0.232, 0, 0, 0, 0)
При этом никакое увеличение ресурса (вплоть до rsum и выше)
не нарушает указанных пропорций. Таким образом, в поглощающей
сети с произвольной топологией предельное состояние зависит от
начального.
При изменении хотя бы одного из недиагональных элементов
матрицы R2, предельное состояние тоже изменяется.
Из сказанного вытекает еще одно основное отличие
поглощающих ресурсных сетей от регулярных и эргодических – они
не имеют порогового значения Т.
Функционирование поглощающих сетей при любом ресурсе
остается одинаковым: при пропорциональном увеличении
компонент вектора начального состояния, каждая компонента
вектора предельного состояния увеличивается в той же пропорции.
Для обоснования отсутствия порогового значения обратимся к
его определению (теорема 3.3). Пороговое значение Т – это такое
количество ресурса, что при W > T для некоторого момента времени
t' и некоторой вершины vi выполняется:  t > t' vi  Z+(t). В
поглощающих сетях такими вершинами могут быть только стоки.
Но принадлежность вершины зоне Z+(t) означает, что ее ресурс
228

превосходит ее выходную пропускную способность riout . Однако
стоки не имеют исходящих ребер, кроме, возможно, петли, наличие
или отсутствие которой не влияет на функционирование сети.
Добавляя и убирая петли в стоки и изменяя их пропускные
способности, можно получить сети с разным значением Т, при
котором хотя бы один сток перейдет на правило 1, но с одинаковым
функционированием при любом суммарном ресурсе. Это и означает
отсутствие порога в таких сетях.
З а м е ч а н и е 7.1. В регулярных и эргодических сетях
r out
значение Т рассчитывается по формуле: T = min i 1* , и этот
i{1,...,n} q
i
минимум достигается на всех вершинах-аттракторах. В
r out
поглощающих сетях отношение Ti = i 1* принимает разные
qi
значения на разных стоках (хотя все они являются аттракторами) и
обращается в нуль на стоках без петель. В остальных вершинах это
отношение равно бесконечности. В регулярных сетях для любой
вершины Ti – положительно и конечно.
З а м е ч а н и е 7.2.
Коэффициент
симметричности,
T
определенный в третьей главе, как отношение  =
, при
rsum

riout
обращается в нуль на стоках без петель (а по
i{1,...,n} q1*
i
свойству 7.2 петлями в стоках можно пренебречь). Для всех
регулярных сетей   (0, 1]. В поглощающих сетях значение  = 0,
что соответствует «полностью несимметричной» сети.
З а м е ч а н и е 7.3. В регулярных сетях при W ≤ T:
1) все вершины за конечное число шагов переходят на правило 2;
2) предельное состояние не зависит от начального.
В поглощающей сети, если rank H = 1, предельное состояние
единственно при всех значениях суммарного ресурса (с точностью
до начального ресурса в источниках); если же rank H > 1,
предельное состояние не единственно (зависит от начального
состояния) при любом количестве суммарного ресурса. В этом
смысле порогового значения в таких сетях также не существует.
T = min

229

7.4. Предельные состояния в поглощающих сетях
7.4.1. Матрица R' и ее свойства
Найдем предельную матрицу произвольной поглощающей сети R'
и опишем ее свойства.
Л е м м а 7.1. Пусть поглощающая сеть с l стоками
представлена матрицей (7.1). Тогда R' – предел степеней
стохастической матрицы R', определяется по формуле:

E1

R' = 
'
 E2 − R2

(

)

−1

O1 
,
O2 

R1'

(7.5)

где E2 – единичная матрица размера (n – l)  (n – l).
Д о к а з а т е л ь с т в о. Степени матрицы R' имеют вид:

E1

R'k =  '
' '
' 2 '
'
 R1 + R2 R1 + R2 R1 + ... + R2

( )

( )

k −1

R1'

O1 
k .
R2' 

( )

В главе 5 аналогично выражались степени переходной
матрицы Р для потоков в эйлеровых сетях.

( )

k

Для цепи Маркова R2' → O2 при k → , где O2 – нулевая

 (R2' )


матрица размера (n – l)  (n – l);

(

матрица E2 − R2'

)

−1

k

k =0

(

= E2 − R2'

)

−1

, причем

существует ([38], теоремы 3.1.1 и 3.2.1).

( )

( )

2

k

(

Тогда: R1' + R2' R1' + R2' R1' + ... + R2' R1' + ... = E2 − R2'
матрица R' имеет вид:

E1

R' = 
'
 E2 − R2

(

)

−1

R1'

)

−1

R1' , и

O1 
. 
O2 

З а м е ч а н и е 7.4. Из формулы (7.5) следует, что R' = (P)T,
где матрица P определяется по формуле (5.11).
З а м е ч а н и е 7.5. Из формулы (7.5) также вытекает
справедливость теоремы 7.1. Подставив в нее вместо R1 матрицу H,
получим, что нижний левый блок матрицы R' имеет ранг 1, и его
230

столбцы пропорциональны с тем же отношением, что и столбцы Н:
1 : 2 : … : l.
Т е о р е м а 7.2. В поглощающей сети с l стоками матрица

R' остается неизменной при любых изменениях диагональных
элементов матрицы R.
Д о к а з а т е л ь с т в о.
Матрице R, заданной формулой (7.1), соответствует
стохастическая матрица
 E O1 

R' =  '
' .
 R1 R2 
1. Для изменения диагональных элементов блока D матрицы
(7.1) доказательство очевидно.
2. Докажем это утверждение для диагональных элементов
матрицы R2.
Пусть R2new = R2 – D(rii), где D(rii) – диагональная матрица
размера (n – l)  (n – l), элементы которой характеризуют изменение
пропускных способностей петель. Будем предполагать, что
0 ≤ rii ≤ rii, и хотя бы для одной вершины выполнится строгое
неравенство: rkk > 0. Если для некоторой вершины vk выполняется
равенство rkk = rkk, петля этой вершины исчезает вообще.
Тогда новая матрица пропускных способностей сети будет:

 D O1   O3
 − 
Rnew = 
 R1 R2   O4

O1   D
=
D(rii )   R1

O1 
.
R2new 

Стохастическая матрица, соответствующая матрице Rnew, будет
отлична от R'.
'
Зависимость между матрицами R1' и R2' и матрицами R1new
и
'
R2new
следующая:

R1' new

 riout   '
 r  
 riout  '
'


 out
   R2 − D outii   , (7.6)
= D out
R
R
=
D
,
1
2
new

 r − r  
 r 
ii  
 ri − rii 
 i
 i 

231

 r out 
 – диагональная матрица размера (n – l)  (n – l) с
где D outi

r
−

r
ii 
 i

riout
элементами out
. Именно в такой пропорции пересчитываются
ri − rii
элементы двух нижних блоков матрицы R'. Обозначим ее через D';
 r 
D outii  – диагональная матрица, соответствующая изменению
 ri 
матрицы R2' после изменения пропускных способностей петель.
Обозначим ее через D.
Тогда равенства (7.6) можно переписать в более компактном
виде:
R1' new = D' R1' , R2' new = D' R2' − D .

(

)

O1 
 E
'
 по-прежнему остается
Новая матрица Rnew
=  '
'
 R1new R2 new 
стохастической, и поэтому предел ее степеней существует и равен:

E

'
Rnew
= 
'
 E2 − R2new

(

(

Выразим E2 − R2' new
имеем:

(E

2

)

−1

− R2' new

)

)

−1

O1 
.
O2 

R1' new

R1' new через исходные матрицы. Из (7.6)

−1

(

(

R1' new = E2 − D' R2' − D

))

−1

D' R1' .

(7.7)

Все диагональные элементы матрицы D' отличны от 0. Это
означает, что матрица D'-1 существует. Тогда в первом множителе
правой части равенства (7.7) D' можно внести в скобку:

(E

2

(

− D' R2' − D

(

(

))

−1

(

= D'−1 − R2' − D

))

−1

(

R1' = D'−1 + D − R2'

Вычислим сумму D'-1 + D.
232

(

D' R1' = D'−1 E2 − D'−1 D' R2' − D

)

−1

R1' .

))

−1

R1' =

Это две диагональные матрицы. Элементы матрицы D' равны
riout − rii
ri
-1
,
тогда
соответствующие
элементы
D'
равны
.
riout − rii
riout
r
Элементы D равны outii .
ri
out

Для каждого i выполнится:

(D'
(E

−1

2

+ D − R2'

− R2' new

)

−1

)

−1

(

)

R1' , а это означает, что

(

)

R1' , и соответственно,

R1' = E2 − R2'

R1' new = E2 − R2'

E

'
Rnew
= 
'
 E2 − R2

(

riout − rii rii
+ out = 1 . Отсюда
riout
ri

)

−1

−1

−1

O1 
 = R ' .
O2 

R1'

Таким образом, при любых изменениях диагональных
элементов матрицы R пределы степеней соответствующих
стохастических матриц совпадают, хотя сами стохастические
матрицы различны. 
П р и м е р 7.5. Рассмотрим две сети. Первая представлена
матрицей R+ с диагональными элементами, неравными нулю, вторая
– той же матрицей, но с нулевыми диагональными элементами (R–).

0

0
R+ =  6

1
0


0
0
1
6
0

0
0
2
6
1

0
0
3
7
3

0
0 0


0
0 0

5 , R− =  6 1


1
1 6

0 0
4


0
0
0
6
1

0
0
3
0
3

0

0
5 .

1
0 

Стохастические матрицы, соответствующие им:

233

0
0
0
0
0
0 0 0
1
1




1
0
0
0
0 0 0
 0
0 1
1
2
3
5
3 5
 6
6 1
0



15 15  .
R+' =  17 17 17 17 17  , R−' =  15 15
1
6
6
7
1
1
6
6
1
0




14 
 21 21 21 21 21 
 14 14 14
1
3
4
1
3
 0
 0
0
0
0 

8
8
8
4 4




Несмотря на то что матрицы различны, пределы их степеней
совпадают. Для них обеих выполнится:

0
0
 1

1
0
 0
 
R' = 0.6161 0.3839 0

 0.3661 0.6339 0
 0.4286 0.5714 0


0
0
0
0
0

0

0
0

0
0 

7.4.2. Вектор предельного состояния и его свойства
Т е о р е м а 7.3. Пусть поглощающая сеть с l стоками
представлена матрицей (7.1). Тогда для любого ресурса W и любого
начального состояния Q(0) = (q1(0), …, qn(0)) предельное состояние
рассчитывается по формуле:
Q* = Q(0)R',
(7.8)
где R' – предельная матрица, определяемая по формуле (7.5).
Д о к а з а т е л ь с т в о.
1. Если начальное состояние таково, что все вершины из
переходной компоненты функционируют по правилу 2,
доказательство теоремы очевидно. Для каждого t выполнится: Q(t)=
Q(0)R't. Совершив предельный переход, получим искомое равенство
(7.8).
2. Пусть вершины из переходной компоненты некоторое число
тактов функционируют по правилу 1 (поскольку ресурс
безвозвратно уходит в стоки, то такое количество тактов конечно
при любом начальном ресурсе).
На каждом такте t построим новую матрицу пропускной
способности R(t), отличающуюся от матрицы R только
234

диагональными элементами тех нестоковых вершин, которые
функционируют по правилу 1. То есть
rii , если qi (t )  riout ,

rii (t ) = 
q (t ) −  rij , если qi (t )  riout
 i
j i


Нормируя матрицу R(t), получим стохастическую матрицу
R'(t), которая задает неоднородную цепь Маркова. Для этих матриц
выполняются следующие два условия:
a) t Q(t + 1)= Q(t)R'(t);
b) t вектор Q(t) совпадает с вектором состояния сети,
заданной матрицей R, с начальным состоянием
Q(0) = (q1(0), …, qn(0)).
Тогда функционирование сети описывается правилом:
Q(t + 1) = Q(t ) R' (t ) = Q(0)(R' (0) R' (1)    R' (t )) .

За конечное число шагов m все вершины из переходной
компоненты перейдут на правило 2. Тогда, начиная с шага m + 1,
сеть описывается однородной цепью Маркова: R(t) = R и R'(t) = R'.
Вектор Q(m+k) можно записать в следующем виде:

 m

Q(m + k ) = Q(0)  R' (t )  R'k .
 t =0

При k →  получим:
m

 m

Q* = Q(0)  R' (t )  lim R'k = Q(0)  R' (t )  R' .
 t =0
 k →
 t =0

По теореме 7.2 матрица R' не изменяется при любых
изменениях диагональных элементов.
Тогда для всех t = 0, …, m выполнится R'(t)R' = R'.
Отсюда Q* = Q(0)R'. 
С л е д с т в и е 7.3. Вектор предельного состояния Q* не
зависит от наличия или отсутствия петель в вершинах.
С л е д с т в и е 7.4. Пусть поглощающая сеть с l стоками
представлена матрицей (7.1). Тогда элементы i-й строки матрицы
235

R' (i > l) соответственно равны компонентам вектора
предельного
состояния
при
начальном
состоянии
Qi(0) = (0, …, 0, 1, 0, …, 0), где единице равна i-я компонента:

 e1T 


 ... 
 T 
e

R ' =  *l  ,
 Ql +1 


 ... 
 Q* 
 n 
(e1, …, el – первые l вектор-столбцов единичной матрицы (E)nn).
Доказательство
вытекает непосредственно из
формулы (7.8).
З а м е ч а н и е 7.6. Предельная матрица R' является
собственным проектором лапласовской матрицы L = E – R',
описанной в разделе 1.2.4 первой главы. Также этот проектор
совпадает с нормированной матрицей максимальных исходящих
лесов орграфа, полученного из исходного орграфа сети изменением
направлений ребер. Лесная размерность орграфа поглощающей
сети, в отличие от эргодических сетей, может быть отлична от
единицы и равна количеству стоковых вершин. Предельная матрица
R' может быть найдена с помощью любого аннулирующего
многочлена для лапласовской матрицы L. Другие способы
нахождения собственного проектора L описаны в [3, 63].
П р и м е р 7.6. Сеть представлена матрицей:

0

0
R = 6

1
0


0
0
1
6
0

0
0
2
6
1

0
0
3
7
3

0

0
5 .

1
4 

Стохастическая матрица, соответствующая ей:

236

0
0
0
0
1


1
0
0
0
 0
1
2
3
5
 6


R ' =  17 17 17 17 17  .
1
6
6
7
1


 21 21 21 21 21 
1
3
4
 0
0

8
8
8


Рассмотрим предельные состояния, соответствующие
начальным состояниям – векторам ортонормированного базиса.
Q1(0) = (0, 0, 1, 0, 0) → Q1* = (0.6161, 0.3839, 0, 0, 0);
Q2(0) = (0, 0, 0, 1, 0) → Q2* = (0.3661, 0.6339, 0, 0, 0);
Q3(0) = (0, 0, 0, 0, 1) → Q3* = (0.4286, 0.5714, 0, 0, 0).
Тогда предел степеней R' будет:

0
0
 1

1
0
 0

R' =  0.6161 0.3839 0

 0.3661 0.6339 0
 0.4286 0.5714 0


0
0
0
0
0

0

0
0

0
0 

7.4.3. Нелинейное изменение промежуточных состояний
По теореме 7.3 предельное состояние в поглощающей сети зависит
от начального состояния линейно. Если начальное состояние
описывается вектором Q(0) = Q1(0) + Q2(0), то предельное
состояние будет Q* = Q1* + Q2*, но для произвольного конечного
момента t равенство Q(t) = Q1(t) + Q2(t) выполняется не всегда.
Это происходит вследствие нелинейности распределения ресурса
при
функционировании
вершин
по
разным
правилам.
Проиллюстрируем нелинейность поведения сети следующим
примером, состоящим из трех частей. Во всех частях сеть задана
матрицей пропускных способностей:
237

0

0
R = 6

3
1


0
0
1
6
1

0
0
4
5
1

0
0
5
1
2

0

0
7 .

7
4 

П р и м е р 7.7.a.
Начальное
состояние
сети
Q1(0) = (0, 0, 100, 0, 0), ему соответствует предельное состояние
Q1* = (62.5, 37.5, 0, 0, 0). Динамика ресурса представлена на рис. 7.5.

Рис. 7.5. Динамика ресурса в вершинах при начальном
состоянии Q1(0) = (0, 0, 100, 0, 0)

П р и м е р 7.7.b.
Начальное
состояние
сети
Q2(0) = (0, 0, 0, 100, 0), ему соответствует предельное состояние
Q2* = (46.154, 53.846, 0, 0, 0). Динамика ресурса представлена на
рис. 7.6.

238

Рис. 7.6. Динамика ресурса в вершинах при начальном
состоянии Q2(0) = (0, 0, 0, 100, 0)

П р и м е р 7.7.c. Рассмотрим параллельно два графика,
характеризующих динамику ресурса в вершинах. Один – сумма
графиков, представленных на рис. 7.5–7.6; второй – для вектора
начального состояния Q3(0) = Q1(0) + Q2(0) = (0, 0, 100, 100, 0).
Из рис. 7.7.а и 7.7.б хорошо видно, что графики динамики
ресурса во всех пяти вершинах различны. Однако предельные
состояния оказываются одинаковыми. Нелинейность проявляется
тогда и только тогда, когда хотя бы одна переходная вершина в
начальном состоянии имеет ресурс выше своей выходной
пропускной способности и функционирует по правилу 1. Если все
вершины функционируют по правилу 2, линейность не нарушается,
как и в случае регулярных сетей.

239

120
100

80

v1
v2

60

v3
v4

40

v5
20
0
0 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38

Рис. 7.7.а. Сумма двух протоколов: Q1(0)+ Q2(0), Q1(t)+ Q2(t).
Q1*+ Q2* = (108.654, 91.346, 0, 0, 0)

120
100

80

v1
v2

60

v3
v4

40

v5
20
0
0 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38

Рис. 7.7.б. Функционирование с новым начальным состоянием
Q3(0) = Q1(0)+ Q2(0) = (0, 0, 100, 100, 0).
Q* = (108.654, 91.346, 0, 0, 0)

240

Комментарий к главе 7
Поглощающие сети по своим свойствам наиболее далеки от
регулярных сетей: их специфическая топология (отсутствие
нетривиальных
эргодических
компонент),
определяет
специфическое поведение. Оно выражается прежде всего в том, что
понятие порога теряет смысл (впрочем, его можно считать равным
0): при любом ресурсе поглощающие сети функционируют
одинаково. Если положить T = 0, то коэффициент симметричности
T
сети, определенный как отношение  =
и для регулярных сетей
rsum
принимающий значения на полуинтервале (0, 1], в поглощающей
сети равен нулю. Предельное состояние в поглощающих сетях
существует. Весь ресурс в предельном состоянии находится в
стоках. Это кажется очевидным, поскольку стоки на каждом такте
получают некоторое количество ресурса и ничего не отдают.
Предельный поток состоит из потока в петлях стоковых вершин;
поток в петлях переходных вершин стремится к нулю при t → .
Если же сеть не имеет петель, предельный поток в ней равен нулю,
т.е. функционирование сети останавливается, чего не бывает в
регулярных и эргодических сетях.
Независимо от величины суммарного ресурса предельное
состояние полностью зависит от начального состояния. Исключение
представляет случай, когда в начальном состоянии весь ресурс
находится в переходной компоненте, а пропускные способности
ребер, ведущих из переходной компоненты в стоки,
пропорциональны, т.е. пропорциональны столбцы матрицы Н в
формуле (7.3). Тогда предельное состояние единственно. Но во всех
случаях оно определяется формулой Q* = Q(0)R', где R' – предел
степеней стохастической матрицы R'.
Представляет интерес тот факт, что предельное состояние не
зависит от наличия или отсутствия петель (теорема 7.2): это
означает, что предел произведений совсем разных стохастических
матриц оказывается одним и тем же.

241

ГЛАВА 8. РАСПРЕДЕЛЕНИЕ РЕСУРСА
МЕЖДУ АТТРАКТОРАМИ В РЕГУЛЯРНЫХ
НЕСИММЕТРИЧНЫХ СЕТЯХ
ПРИ БОЛЬШИХ РЕСУРСАХ,
в которой:
• Рассматриваются несимметричные регулярные сети с более чем одним
активным аттрактором.
• Доказывается, что распределение ресурса сверх порогового значения:
W = W – T происходит в соответствии с тем же законом, что и в
соответствующей поглощающей сети (полученной из несимметричной
удалением выходных ребер аттракторов), однако существует поправка,
зависящая от пропускных способностей выходных ребер аттракторов и
начального распределения ресурса.
• Поправки оцениваются сверху; находятся начальные состояния, при
которых они максимальны.
• Определяются начальные состояния, при которых поправки
отсутствуют.

Рассмотрим регулярную несимметричную ресурсную сеть с
несколькими активными аттракторами. Если в начальном состоянии
ресурс находится в источниках и нейтральных вершинах, не
являющихся пассивными аттракторами, при W > T в предельном
состоянии все излишки сверх порогового значения Т будут
распределены между активными аттракторами. Пропорция, в
которой произойдет это распределение, зависит от начального
состояния сети, точно так же, как это происходило в поглощающих
сетях при распределении ресурса между несколькими стоками.
Однако поведение регулярных несимметричных сетей с
несколькими активными аттракторами сложнее поведения
поглощающих сетей. Так, в поглощающей сети ресурс, помещенный
в сток в начальном состоянии, остается в нем в любой момент
времени. В регулярных сетях это условие не выполняется. Для
иллюстрации
этого
утверждения
рассмотрим
примеры
функционирования сети с двумя активными потенциальными
аттракторами.
П р и м е р 8.1. Несимметричная сеть (n = 5) с двумя
аттракторами v1 и v2 задана матрицей:

242

1

1
R =6

1
1


1
1
1
6
1

1
1
1
1
1

1
1
1
1
1

1

1
1 .

1
1

(8.1)

Основные ее характеристики следующие.
 = ((10, 5), (10, 5), (5, 10), (5, 10), (5, 5)); предельное состояние
при
W = 1:
Q1* = (0,250, 0,250, 0,1(6), 0,1(6), 1(6));
пороговое

~

значение ресурса: T = 20; Q = (5, 5, 3,(3), 3,(3), 3,(3)).

v5

v3

v4

v1

v2

Рис. 8.1. Сеть, заданная матрицей (8.1)

Из рисунка видно, что приемники в этой сети симметричны
относительно указанного сечения.
Рассмотрим
начальное
состояние
Q(0) = (0, 5, 20, 0, 0).
Суммарный ресурс W = 25 больше порогового значения, значит,
излишки ресурса должны распределиться между аттракторами.
Аттрактор v2 имеет ресурс в начальном состоянии, аттрактор v1 –
нет.
Предельное состояние для такого вектора Q(0) будет
Q* = (10, 5, 3,(3), 3,(3), 3,(3)). Как видно, весь излишек оказался в
243

первой вершине (поскольку она связана с источником, имеющим
большой ресурс, ребром с большой пропускной способностью).
Вершине v2 не удалось накопить больше того, что она имела в
начале.
Даже с ресурсом, превышающим выходную пропускную
способность, потенциальный аттрактор бывает неспособным
перейти в зону Z+*. Для той же сети перераспределим ресурс 25 в
начальном состоянии: Q(0) = (0, 8, 17, 0, 0). Предельное состояние в
этом случае будет точно таким же: Q* = (10, 5, 3,(3), 3,(3), 3,(3)).
Если же ресурс 8 переложить в вершину v4 (источник, связанный с
v2 ребром с большой пропускной способностью), так, чтобы
начальное состояние было Q(0) = (0, 0, 17, 8, 0), то предельное
состояние будет: Q*= (9,75, 5,25, 3,(3), 3,(3), 3,(3)). То есть в этом
случае второй аттрактор получает излишки сверх своей пропускной
способности, чего не наблюдалось, когда мы помещали ресурс
непосредственно в него.
Таким образом, активный аттрактор может притягивать ресурс
из источников, но не всегда может удержать ресурс, находящийся в
нем в начальном состоянии.
В этой главе будем рассматривать начальные состояния, в
которых ресурс находится в источниках1. В дальнейшем, во всех
утверждениях под «аттракторами» будем понимать лишь активные
аттракторы.

8.1. Поглощающая сеть, соответствующая
несимметричной, и поправка на регулярность W
Исследуем распределение ресурса между потенциальными
аттракторами при W > T. В главе 4 для больших ресурсов были
определены все компоненты вектора предельного состояния, кроме
вершин-аттракторов. Если аттрактор в сети один, предельное
состояние единственно. Если потенциальных аттракторов
несколько, ресурс между ними в предельном состоянии может
распределяться по-разному для разных начальных состояний.
Опишем зависимость предельного состояния в аттракторах от

Все результаты, полученные ниже, обобщаются на начальные состояния,
в которых ресурс может находиться также в нейтральных вершинах, не
являющихся пассивными аттракторами. Начальные состояния с ресурсом в
источниках рассматриваются для большей наглядности в примерах и
компактности формулировок утверждений.
244
1

начального состояния сети, как это было сделано для эйлеровых и
поглощающих сетей.
Рассмотрим несимметричную сеть с двумя аттракторами,
заданную матрицей (8.1). Для нее Q1*=(0,250, 0,250, 0,1(6), 0,1(6),
0,1(6)), T = 20.
Пусть в начальном состоянии весь суммарный ресурс W > T
находится в одном из источников. Найдем закономерность
распределения ресурса W = W – T между аттракторами при
изменении W. Рассмотрим два начальных состояния и
соответствующие им предельные состояния:
Q(0)=(0, 0, 50, 0, 0) → Q*= (29,3, 10,7, 3,(3), 3,(3), 3,(3)).

(8.2)

Q(0)=(0, 0, 90, 0, 0) → Q*= (59,3, 20,7, 3,(3), 3,(3), 3,(3)).

(8.3)

Суммарный ресурс вершин, находящихся в зоне Z–*, в
предельном состоянии равен 10. При Q(0) = (0, 0, 50, 0, 0) и
Q(0) = (0, 0, 90, 0, 0) в зоне Z+* распределяется ресурс, равный 40 и
80 соответственно. При суммарном приросте 40 прирост в
аттракторах составил, соответственно 30 и 10, т.е. 0,75W и 0,25W,
т.е. распределился в пропорции 3:1.
При любом дальнейшем увеличении ресурса пропорция 3:1 в
распределении ресурса W между аттракторами сохраняется. В силу
симметричности аттракторов (рис. 8.1), если в начальном состоянии
весь ресурс находился во втором источнике (вершине v4), в
предельном состоянии его прирост в аттракторах распределится в
пропорции 0,25W и 0,75W (соответственно, 1:3). А при
помещении ресурса в начальном состоянии в нейтральную вершину,
прирост в аттракторах распределится как 0,5W, 0,5W, т.е. в
пропорции 1:1.
Для объяснения этого факта построим поглощающую сеть,
соответствующую данной несимметричной сети, т.е. превратим
аттракторы в стоки, заменив все элементы матрицы R,
соответствующие входным пропускным способностям аттракторов,
нулями. Матрицу пропускной способности такой сети обозначим
через Rabsorb.

245

0

0
Rabsorb =  6

1
1


0
0
1
6
1

0
0
1
1
1

0
0
1
1
1

0

0
1 .

1
1 

Предел степеней соответствующей стохастической матрицы
обозначим через R'absorb . Найдем эту матрицу, воспользовавшись
формулой из следствия 7.4 (глава 7). Для этого вычислим векторы
предельного состояния при единичном ресурсе, поочередно
находящемся в каждой из переходных вершин:
Q(0) = (0, 0, 1, 0, 0) → Q*= (0,75, 0,25, 0, 0, 0);
Q(0) = (0, 0, 0, 1, 0) → Q*= (0,25, 0,75, 0, 0, 0);
Q(0) = (0, 0, 0, 0, 1) → Q*= (0,5, 0,5, 0, 0, 0).
Тогда

0
0
 1

1
0
 0


R'absorb = 0,75 0,25 0

 0,25 0,75 0
 0,5 0,5 0


0
0
0
0
0

0

0
0 .

0
0 

(8.4)

Именно в таких пропорциях распределяется ресурс W из
каждой не-аттрактивной вершины между аттракторами.
Возникает вопрос, зависит ли эта пропорция от первых двух
строк матрицы R, или выходные пропускные способности
аттракторов могут быть любыми до тех пор, пока они остаются
аттракторами. При изменении выходных пропускных способностей
аттракторов меняется пороговое значение Т. Остается ли при
больших W пропорция, заданная R'absorb , для излишков ресурса?
Для ответа на этот вопрос рассмотрим несколько примеров, в
которых будем изменять первые две строки матрицы R. Строки
246

будем изменять таким образом, чтобы симметрия между
аттракторами (рис. 8.1) не была нарушена.
П р и м е р 8.2. Пропорциональное уменьшение строк. Сеть
задана матрицей

 0,5 0,5 0,5 0,5 0,5 


 0,5 0,5 0,5 0,5 0,5 
R = 6
1
1
1
1 .


6
1
1
1 
 1
 1
1
1
1
1 


(8.5)

Для этой сети Т = 10; Q1* = (0,250, 0,250, 0,1(6), 0,1(6), 1(6));
~
Q =(2,5, 2,5, 1,(6), 1,(6), 1,(6)).

Функционирование сети при разных начальных состояниях
дает следующие предельные состояния:
Q(0)=(0, 0, 85, 0, 0) → Q*= (60,5, 19,5, 1,(6), 1,(6), 1,(6));
Q(0)=(0, 0, 45, 0, 0) → Q*= (30,5, 9,5, 1,(6), 1,(6), 1,(6)).
Ресурс, равный 5, остается в зоне Z–*; остальной ресурс
распределяется между аттракторами. Разность ресурса для этих двух
начальных состояний W = 40 разделилась в пропорции 30:10, т.е.
3:1, как и раньше.
Это соотношение выполняется не только для однородных
выходных пропускных способностей аттракторов. Но чтобы обе
вершины оставались потенциальными аттракторами, их выходные
пропускные способности нельзя изменять произвольно. Не приводят
к потере аттрактивности любые изменения в пропускных
способностях петель аттракторов, а также одинаковые изменения в
пропускных способностях ребер, связывающих аттракторы с
нейтральной вершиной v5 и друг с другом.

247

П р и м е р 8.3. Выборочные изменения элементов
верхних строк матрицы R. Сеть задана матрицей

3

1
R =6

1
1


1
8
1
6
1

1
1
1
1
1

1
1
1
1
1

двух

0

0
1 .

1
1 

Для нее имеем: Т = 23; Q1* = (0,261, 0,478, 0,116, 0,116, 0,029);
~
Q = (6, 11, 2,(6), 2,(6), 0,(6)).

Как видно, вектор предельных вероятностей изменился; в той
~
же пропорции изменились компоненты вектора Q . В зоне Z–* в
предельном состоянии оказывается ресурс, равный 6.
Рассмотрим две пары векторов (начальное состояние →
предельное состояние): Q(0) → Q*.
Q(0)=(0, 0, 86, 0, 0) → Q*= (56,910, 23,090, 2,(6), 2,(6), 0,(6)).
Q(0)=(0, 0, 46, 0, 0) → Q*= (26,910, 13,090, 2,(6), 2,(6), 0,(6)).
Разность ресурса W = 40 вновь разделилась в пропорции 3:1,
несмотря на вышеописанные изменения векторов предельного
состояния.
Эта пропорция имеет место только для разности между двумя
различными векторами предельного состояния. Для компонент
одного вектора предельного состояния, соответствующих
аттракторам, она не выполняется. Рассмотрим первую пару Q(0) →
Q*:
Q(0)=(0, 0, 86, 0, 0) → Q*= (56,910, 23,090, 2,(6), 2,(6), 0,(6)).

r1out = 6, r2out = 11.
q1 = q1* − r1out = 50,910, q2 = q2* − r2out = 12,090
248

q1 : q2 = 50,910 : 12,090 > 4.

Вернемся к матрице (8.1) и проверим выполнение этой
пропорции для нее. Из примера 8.1 имеем:
Q(0)=(0, 0, 100, 0, 0) → Q*= (66,8, 23,2, 3,(3), 3,(3), 3,(3)).
Для этой матрицы r1out = 5, r2out = 5.

q1 = q1* − r1out = 61.8, q2 = q2* − r2out = 18,2.
Как видно, пропорция 3:1 вновь не выполняется.
Вычислим разность q1 − 3q2 :

q1 − 3q2 = 61,8 – 18,2  3 = 61,8 – 54,6 = 7,2.
Проверим, чему равна эта разность при других значениях W.
Из (8.2), (8.3) следует, что при W = 50 и W = 90 также
выполняется равенство:
(8.6)
q1 − 3q2 = 7,2.
Для достаточно больших значений W в сети, заданной
матрицей (8.1), значение разности (8.6) остается неизменным.
Обозначим его через W. Начиная с некоторого Wmin  T, W = const.
Для поглощающей сети W = 0. Как только поглощающая сеть
превращается в регулярную (т.е. у стоков появляются выходные
ребра), величина W становится положительной. Будем называть W
поправкой на регулярность.
Опишем процесс нахождения W для произвольной сети с l
активными аттракторами и произвольного начального состояния
Q(0), в котором ресурс, больший Wmin, сосредоточен в неаттрактивных вершинах. Пусть R – матрица пропускных
способностей сети с аттракторами, имеющими номера от 1 до l.
Пусть Q* – вектор предельного состояния при суммарном ресурсе
W > 2rsum (количество ресурса 2rsum заведомо больше Wmin).
~
Построим вектор Q = Q* – Q . Его последние n – l компонент
равны нулю, а первые l компонент содержат ресурс, накопленный
249

аттракторами сверх их пропускных способностей. Rabsorb – матрица
поглощающей сети, первые l строк которой равны нулю, а
остальные n – l строк совпадают со строками матрицы R.
Рассмотрим векторы начального и предельного состояния этой
поглощающей сети как функции от количества ресурса
Q(0) = QW(0), Q* = Q*W. Будем увеличивать W в начальном
состоянии (сохраняя пропорцию между компонентами вектора
QW(0)) от некоторого  > 0 до тех пор, пока какая-нибудь
компонента Q*W не совпадёт с компонентой вектора Q. Обозначим
это количество ресурса через W'. Тогда все компоненты разности
Q – Q*W' неотрицательны по построению. Их сумма и составляет
поправку на регулярность W. Это такое количество ресурса,
которое нарушает пропорциональность, имеющую место для
поглощающей сети, распределяясь между аттракторами. Эта
величина
заведомо
положительна.
Используя
введенные
обозначения, можно дать формальное определение.
Поправкой на регулярность W называется суммарное
количество ресурса в предельном состоянии в одном или
нескольких аттракторах, нарушающего пропорцию, заданную
~
матрицей Rabsorb: W = (Q* – Q – Q*W')1, где 1 – вектор-столбец из n
единиц.
Для того чтобы найти Wmin и объяснить, откуда возникает
вклад ресурса W, нарушающий пропорцию, имеющую место для
стоков, рассмотрим функционирование сети при ресурсах W > T,
близких к пороговому значению, т.е. таких, что W – T  W.
П р и м е р 8.4. Сеть задана матрицей (8.1). Начиная с W = T,
будем увеличивать суммарный ресурс в сети, помещая его в
начальном состоянии в третью вершину. Для этой сети Т = 20.
Выпишем начальные и соответствующие им предельные состояния.
~
Q(0)=(0, 0, 20, 0, 0) → Q = (5, 5, 3,(3), 3,(3), 3,(3)).

Q(0)=(0, 0, 25, 0, 0) → Q*= (10, 5, 3,(3), 3,(3), 3,(3)).
Q(0)=(0, 0, 27, 0, 0) → Q*= (12, 5, 3,(3), 3,(3), 3,(3)).
Q(0)=(0, 0, 27,2, 0, 0) → Q*= (12,2, 5, 3,(3), 3,(3), 3,(3)).
Q(0)=(0, 0, 27,21, 0, 0) → Q*= (12,2075, 5,0025, 3,(3), 3,(3), 3,(3)).
250

Из этих пар векторов видно, что при значениях W – T  7,2
ресурс из источника не распределяется пропорционально, а
накапливается в одном аттракторе. Ресурс второго аттрактора
остается в предельном состоянии равным r2out = 5 вплоть до W = 27,2,
и, соответственно, W= 7,2.
При суммарном ресурсе W > 27,2 второй аттрактор тоже
попадает в зону Z+*, и начинает выполняться соотношение:

(q1* − 5 − 7,2) : (q2* − 5) = 1 : 3 .
В общем виде (для произвольных пропускных способностей
ребер) для сети, заданной рис. 8.1, c двумя симметричными
аттракторами v1 и v2, к которым присоединены источники v3 и v4
соответственно, можно утверждать следующее. Если ресурс в
начальном состоянии находится в вершине v3, и при этом его
величина удовлетворяет неравенству W  T+W, в предельном
состоянии выполнится соотношение:
'
'
(q1* − r1out − W ) : (q2* − r2out ) = rabsorb
31 : rabsorb32 ,

где матрица R'absorb задана формулой (8.4).
То есть, если известно значение W, предельное состояние при
заданном начальном находится однозначно.
Л е м м а 8.1. Пусть в регулярной несимметричной сети с
двумя аттракторами v1 и v2 ресурс W > T в начальном состоянии
'
'
находится в источнике vj, для которого rabsorb
j1 = max rabsorb k1 .
k{3,...n}

Тогда вектор предельного состояния равен:
~

Q + (W − T , 0, 0, ..., 0), при W  T + W
(8.7)
Q =~
'
'
Q
+
(

W
+
r


W
,
r


W
,
0
,...,
0
),
при
W

T
+

W

absorb j1
absorb j 2

*

W = W − (T + W ) ,
где
– предельная матрица
R'absorb
поглощающей сети, соответствующей данной регулярной сети.
Д о к а з а т е л ь с т в о. Дисбаланс в аттракторах происходит
по следующей причине. Пока аттрактор v2 добирает свой ресурс до
251

выходной пропускной способности, он функционирует по правилу
2, т.е. на каждом такте отдает весь свой ресурс. Аттрактор v1
переходит на функционирование по правилу 1 и начинает отдавать
по полной выходной пропускной способности, получая больше
этого значения. Излишек на каждом такте остается в v1. Таким
образом, W состоит из ресурса, накопленного одним аттрактором,
пока он работает по правилу 1, в то время как другой аттрактор
работает по правилу 2. Если значение ресурса суммарного ресурса
W  T + W, то по определению W ресурс аттрактора v2
асимптотически стремится к r1out , v2 не переходит в зону Z+(t), и
верхняя строка (8.7) доказана.
Если W > T + W, оба аттрактора оказываются в зоне Z+(t). В
некоторый момент времени t' выполнится: q2(t' – 1)  r2out
и q2(t') > r2out . Тогда q1(t') = r1out + W . Покажем, что при переходе
второго аттрактора в зону Z+(t) ресурс начинает распределяться
между аттракторами в пропорции, заданной R'absorb . Выходной
поток в аттракторах при их переходе в зону Z+(t) стабилизировался:
он равен r1out в первом аттракторе и r2out во втором – в каждое ребро
они отдают по полной пропускной способности. Накопление в
аттракторах происходит, пока их входной поток больше выходного.
Оно складывается из разницы стабильной и нестабильной
компонент, поскольку в сбалансированном (предельном) потоке для
аттракторов выполняется: f1in* = f1out* = r1out , f 2in* = f 2out* = r2out . Если
рассматривать только нестабильную компоненту потока, ей
соответствует матрица, в которой выходные пропускные
способности аттракторов равны нулю, а это и есть матрица Rabsorb .
Таким образом, ресурс сверх T + W распределяется между
аттракторами в пропорции, заданной матрицей R'absorb . 
Лемма легко обобщается на случай произвольного количества
аттракторов. Пусть в сети с l аттракторами v1, …, vl, ресурс W > T в
начальном состоянии весь сосредоточен в источнике vj, j > l.
Обозначим через Wi – поправку в аттракторе vi при любом W  T –
достаточно большом, чтобы часть ресурса распределялась в
предельном состоянии в соответствии с матрицей R'absorb . Ясно, что

Wi = const, поскольку после перехода последнего из аттракторов в
252

зону Z+(t), выходной поток в них стабилизируется, и ресурс
начинает прибывать в них с пропорции, заданной матрицей R'absorb .
Т е о р е м а 8.1. Пусть в регулярной несимметричной сети с l
аттракторами v1, …, vl ресурс W > T в начальном состоянии
находится в источнике vj,
j > l. Тогда вектор предельного
состояния равен:
~
Q + (0, ..., W − T , 0, ..., 0), при W  T + (Wm − W− m )

~
Q* = Q + (W1^ , ..., Wl ^ , 0,...,0), при T + (Wm − W− m )  W  T + W
~
'
'

Q + (W1 + rabsorb j1  W , ..., Wl + rabsorb jl  W , 0,...,0), при W  T + W
(8.8)
где вектор (0, …, W – T, 0, …, 0) имеет ненулевую компоненту с
'
номером m  l, m находится из условия: m = arg max rabsorb
km ;
k{1,...,l }

0  Wi < Wi – поправки при T + (Wm – W–m) < W < T + W;
Wm = max Wk – поправка, соответствующая аттрактору vm;
^

k{1,...,l }

W− m =

max

Wk {W1 ,...,Wl }\Wm

Wk – вторая по величине поправка при

ресурсе, сконцентрированном в источнике vj;
l

W =  Wi ; W = W − (T + W ) ;
i =1

причем существует аттрактор vi, для которого Wi = 0, i  l.
Д о к а з а т е л ь с т в о.
Докажем каждую строку из формулы (8.8) отдельно.
1. Справедливость формулы для случая W  T + (Wm − W− m )
вытекает из доказательства леммы 8.1. Аттрактор vm первым
переходит на правило 1 и начинает набирать излишки ресурса,
составляющие поправку Wm^ = (W – T). Если второй (по величине
Wi) аттрактор не может перейти на правило 1, все излишки ресурса
в предельном состоянии окажутся в вершине vm. Переход второго
аттрактора на правило 1 происходит, когда аттрактор vm имеет
ресурс, равный (Wm − W− m ) . Отсюда непосредственно вытекает
~
условие выполнения равенства Q* = Q + (0, ..., W − T , 0, ..., 0) .
2. При ресурсе, превосходящем значение Т менее чем на
суммарную поправку W, при функционировании сети часть
аттракторов может не перейти в зону Z+(t), соответствующие
253

поправки Wi^ =Wi^(W) для них будут равны нулю, и компоненты
предельного состояния будут равны соответствующим компонентам
~
вектора Q = (r1out , ..., rlout , q~l +1(0), ..., q~n (0)) . По мере увеличения

суммарного ресурса сверх величины T + (Wm − W− m ) , аттракторы
один за другим смогут перейти в зону Z+(t). Если ввести такую
нумерацию аттракторов, что они будут упорядочены по убыванию
величины Wi, т.е. W1 := Wm, W2 := W–m, и т.д., то можно
вычислить значение ресурса W, при котором аттрактор с номером k
будет иметь в предельном состоянии Wk^(W) > 0. Для этого
необходимо, чтобы все аттракторы с номерами, меньшими k, тоже
имели положительные поправки. Разобьем множество значений
суммарного ресурса W > T на интервалы и рассмотрим зону Z+(t) для
каждого из них.
1) T < W  T + (W1 – W2): только аттрактор v1 функционирует
по правилу 1. Введем обозначение: T + (W1 – W2) = T1. Далее
границы полуинтервалов будем обозначать через Ti.
2) T1 < W  T + (W1 – W2) + 2(W2 – W3) = T + W1 + W2 –
2W3 = T2: аттракторы v1 и v2 функционируют по правилу 1.
3) T2 < W  T + (W1 – W2) + 2(W2 – W3) + 3(W3 – W4) = T
+ W1 + W2 + W3 – 3W4 = T3: аттракторы v1, v2 и v3
функционируют по правилу 1.
…
l – 2) Tl–3 < W  T + W1 + … + Wl–1 – (l – 1)Wl = Tl–2:
аттракторы v1, v2, …, vl–2 функционируют по правилу 1.
l – 1) Tl–2 < W  T + W1 + … + Wl–1: аттракторы v1, v2, …, vl–1
функционируют по правилу 1, но поправка в аттракторе vl–1 еще не
достигла своего максимального значения.
l) W > T + W1 + … + Wl–1 = T + W все аттракторы переходят
в зону Z+(t), и поправки достигли максимальных значений. При
этом, в аттракторе vl поправки нет: Wl = 0, так как больше нет
аттракторов, которым нужно накапливать ресурс.
3. Третья строка формулы (8.8) доказана в пункте l). При
W > T + W все аттракторы переходят в зону Z+(t), и выходной поток
в них стабилизируется за конечное число тактов. Далее в сети
начинается перераспределение ресурса в соответствии с матрицей
R'absorb . 
Замечание 8.1. Если вершин-аттракторов, для которых
'
выполняется условие m = arg max rabsorb
km , несколько, то ресурс
k{1,...,l }

254

W – T в верхней строке формулы (8.8) распределится в равных долях
между всеми этими аттракторами.
З а м е ч а н и е 8.2. Проиллюстрируем графически формулы в
пунктах 1) ÷ l).
На рис. 8.2.а представим, что пунктирные линии –
смещающаяся вниз ось абсцисс. Они задают уровень, ресурс над
которым виден. Чем ось ниже, тем больше вершин-аттракторов
имеют положительные поправки. При непрерывной («главной») оси
абсцисс все вершины имеют максимальные поправки. При
дальнейшем увеличении ресурса излишки будут распределяться в
пропорции, заданной матрицей R'absorb .
Как и во всех гистограммах, количество ресурса
рассчитывается как площадь частей столбиков, выделенных тем или
иным цветом. Ширину каждого столбца считаем единичной. На рис.
8.2.б количество ресурса над соответствующей осью показано
цветом. Этот рисунок иллюстрирует возникновение каждого
слагаемого в суммах из выражений 1) ÷ l).
С л е д с т в и е 8.1. Непосредственно из доказательства
теоремы вытекает, что если в несимметричной сети имеется l
потенциальных аттракторов, а ресурс в начальном состоянии
сосредоточен в вершине-источнике vj, j > l, то значения суммарного
ресурса при W > T можно разбить на l + 1 интервал, для каждого из
которых поправки Wi будут иметь i – 1 вершин (i = 1, …, l + 1).
Границы интервалов задаются формулами из пп. 1) ÷ l).
При ресурсе W > T + W1 + … + Wl = T + W все вершины
имеют максимально возможную поправку, ресурс сверх T + W
распределяется в соответствии с матрицей R'
absorb .
Значения Wi можно найти экспериментально для любой сети.
Чтобы получить аналитические зависимости и выявить
закономерности, рассмотрим изменение Wi при изменении строк
матрицы пропускных способностей, соответствующих аттракторам.
Если все элементы в них равны нулю, сеть превращается в
поглощающую.

255

W1
W2
W3
…

Wl–1
v1

v2

v3

…

vl–1

Рис. 8.2.а. Поправки на регулярность в аттракторах.
Расположение величин Wi в порядке убывания.

(W1 – W2) – при этом излишке
ресурса только первая вершина в зоне
Z+(t).

W1
W2

(W1 + W2 – 2W3)

W3

(W1 + W2 + W3– 3W4)

…

Wl–1
v1

v2

v3

…

vl–1

Рис. 8.2.б. Поправки на регулярность в аттракторах. Для перехода
аттрактора в зону Z+(t), ресурс должен превысить сумму ресурсов над
пунктирной чертой
256

8.2. Зависимость W от выходных пропускных
способностей аттракторов
Вновь рассмотрим сеть с двумя потенциальными аттракторами.
Здесь поправка W накапливается только в одной вершине, поэтому
можно записать W1 = W и далее оперировать величиной W.
Проследим зависимость W от выходных пропускных
способностей вершин-аттракторов: W = W riout , i = 1, 2, считая,
что первые две строки матрицы R однородны, как в матрицах (8.1) и
(8.5).
П р и м е р 8.5. В матрице

( )

r

r
R = 6

1
1


r
r
1
6
1

r
r
1
1
1

r
r
1
1
1

r

r
1

1
1 

будем изменять пропускные способности r от нуля с некоторым
шагом. Данные экспериментов представлены в табл. 8.1.
Таблица 8.1
Характеристики предельного состояния
при разных выходных пропускных способностях аттракторов
~
№
r
W
r1out = r2out T
Q
1.
2.
3.
4.
5.
6.
7.
8.
9.
10.
11.
12.
13.

0
0,05
0,1
0,15
0,2
0,25
0,3
0,35
0,4
0,45
0,5
0,55
0,6

0
0,25
0,5
0,75
1
1,25
1,5
1,75
2
2,25
2,5
2,75
3

0
1
2
3
4
5
6
7
8
9
10
11
12

(0,25, 0,25, 0,1(6), 0,1(6), 0,1(6))
(0,5, 0,5, 0,(3), 0,(3), 0,(3))
(0,75, 0,75, 0,5, 0,5, 0,5)
(1, 1, 0,(6), 0,(6), 0,(6))
(1,25, 1,25, 0,8(3), 0,8(3), 0,8(3))
(1,5, 1,5, 1, 1, 1)
(1,75, 1,75, 1,1(6), 1,1(6), 1,1(6))
(2, 2, 1,(3), 1,(3), 1,(3))
(2,25, 2,25, 1,5, 1,5, 1,5)
(2,5, 2,5, 1,(6), 1,(6), 1,(6))
(2,75, 2,75, 1,8(3), 1,8(3), 1,8(3))
(3, 3, 2, 2, 2)

0
0,875
1,75
2,625
3,5
4,375
5
5,375
5,75
6,125
6,5
6,875
7,2
257

14.
15.
16.
17.
18.
19.
20.
21.
22.
23.
24.
25.
26.
27.
28.
29.
30.
31.

0,65
0,7
0,75
0,8
0,85
0,9
0,95
1
1,05
1,1
1,15
1,2
1,25
1,3
1,35
1,4
1,45
1,5

3,25
3,5
3,75
4
4,25
4,5
4,75
5
5,25
5,5
5,75
6
6,25
6,5
6,75
7
7,25
7,5

13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30

(3,25, 3,25, 2,1(6), 2,1(6), 2,1(6))
(3,5, 3,5, 2,(3), 2,(3), 2,(3))
(3,75, 3,75, 2,5, 2,5, 2,5)
(4, 4, 2,(6), 2,(6), 2,(6))
(4,25, 4,25, 2,8(3), 2,8(3), 2,8(3))
(4,5, 4,5, 3, 3, 3)
(4,75, 4,75, 3,1(6), 3,1(6), 3,1(6))
(5, 5, 3,(3), 3,(3), 3,(3))
(5,25, 5,25, 3,5, 3,5, 3,5)
(5,5, 5,5, 3,(6), 3,(6), 3,(6))
(5,75, 5,75, 3,8(3), 3,8(3), 3,8(3))
(6, 6, 4, 4, 4)
(6,25, 6,25, 4,1(6), 4,1(6), 4,1(6))
(6,5, 6,5, 4,(3), 4,(3), 4,(3))
(6,75, 6,75, 4,5, 4,5, 4,5)
(7, 7, 4,(6), 4,(6), 4,(6))
(7,25, 7,25, 4,8(3), 4,8(3), 4,8(3))
(7,5, 7,5, 5, 5, 5)

7,28
7,3
7,31
7,32
7,335
7,35
7,365
7,2
6,945
6,67
6,4
6,13
6,155
6,16
6,04
5,78
5,515
5,18

Таблица конечна. Далее пропускная способность
увеличиваться не может, так как (как было показано в главе 4),
матрица

1,5 1,5 1,5 1,5 1,5 


1,5 1,5 1,5 1,5 1,5 
R = 6 1 1 1 1 


1 6 1 1 1
1 1 1 1 1


задает сеть с тремя потенциальными аттракторами. Это вершины v1,
v2 и v5. В самом деле, для вершин v1, v2 и v5 выполняется:

r5out
r1out r2out 7,5
5
=
=
=
=
30;
= 30;
1*
1*
1*
1/ 6
0,25
q1
q5
q2
при этом из табл. 8.1 видно, что для этой сети T = 30. Таким
образом, по теореме 4.4 все эти вершины удовлетворят условию
аттрактивности.
258

Представим данные, полученные в таблице в виде графика
(рис. 8.3). Из него видно, что изменения W с ростом пропускных
способностей аттракторов происходят немонотонно. Сначала эта
величина возрастает, причем, присутствуют участки линейного
роста; при пропускных способностях, равных приблизительно 0,95,
достигает максимума, и затем начинает убывать. Однако при
пропускных способностях, равных 1,25 и 1,3, монотонность вновь
нарушается.

Рис. 8.3. Зависимость величины W от выходных пропускных
способностей аттракторов (и порогового значения Т)

8.3. Неоднородная цепь Маркова, динамика
стохастических матриц и вычисление W
Функционирование несимметричной сети с ресурсом, большим
порогового значения, описывается неоднородной цепью Маркова.
На каждом такте t можно построить новую матрицу
пропускной способности R(t), отличающуюся от матрицы R только
диагональными элементами вершин, которые
в момент t
функционируют по правилу 1. То есть

259

rii , если qi (t )  riout ,

rii (t ) = 
qi (t ) −  rij , если qi (t )  riout

j i


Нормируя матрицы R(t), получим стохастические матрицы
R'(t), которые задают неоднородную цепь Маркова. Вектор
t

Q(t + 1) = Q(0)  R' (m)
m =0

совпадает с вектором состояния сети, заданной матрицей R, с
начальным состоянием Q(0).
Если в начальном состоянии весь ресурс сосредоточен в
источнике с номером j, матрица R(0) будет отличаться от исходной
матрицы R только j-й строкой. В процессе функционирования
некоторые вершины могут оказываться в зоне Z+(t), и тогда
соответствующие им строки матрицы R(t) будут отличаться от строк
матрицы R. За конечное число шагов зона Z+(t) стабилизируется, и в
ней остаются только потенциальные аттракторы. Все остальные
строки матрицы R(t) и соответствующей ей матрицы R'(t) совпадают
с соответствующими строками матриц R и R'.
Опишем процессы, происходящие в сети, когда одна из
вершин изменяет правило функционирования. Снова для простоты
рассмотрим сеть с двумя потенциальными аттракторами. Пусть
W > T + W. Тогда при начальном состоянии, в котором весь ресурс
сосредоточен в одном источнике, существует, как минимум, три
точки смены правила функционирования: первый и второй
аттракторы по очереди переходят на правило 1, источник, в котором
в начальном состоянии был сосредоточен ресурс, переходит на
правило 2.
Рассмотрим этапы, на которые делится функционирование
сети.
0. В начальном состоянии в зоне Z+(0) находится единственная
вершина – источник с ресурсом W > T.
1. Смена правила в первой вершине-аттракторе. Поскольку в
начальном состоянии этот аттрактор не имел ресурса, существует
как минимум один такт времени, в который эта вершина
функционирует по правилу 2. Через конечное число тактов эта
260

вершина переходит на правило 1. Зона Z+(t) содержит две вершины:
аттрактор и источник.
2. Второй аттрактор переходит на правило 1. Зона Z+(t)
содержит три вершины: два аттрактора и источник. Выходной поток
из аттракторов стабилизируется.
3. Источник покидает зону Z+(t). В зоне Z+(t) остаются два
аттрактора.
На промежутке между переходами 1 и 2 происходит
формирование поправки W. На промежутке между переходами 2 и
3 начинается формирование разности ресурса, соответствующее
R'absorb . Если переход 2 отсутствует, второй аттрактор не получает
ресурс, больший своей выходной пропускной способности.
После перехода 3 зона Z+(t) стабилизируется.
Строки стохастических матриц R'(t), соответствующие
вершинам, функционирующим по правилу 1, изменяются на каждом
такте. Рассмотрим матрицы, задающие изменение вектора
исходящего потока. Они изменяются только при переходах 1-3, в
остальные моменты времени они стационарны. Представим
стохастическую матрицу R' в виде: R' = (r1 ' , r2 ' ,..., rn ') , где rk' –
столбцы R'. Пусть vj – вершина-источник, содержащая ресурс в
начальном состоянии, v1, v2 – аттракторы; для определенности пусть
первым переходит в зону Z+(t) аттрактор v1. Тогда изменение
исходящего потока на последовательных тактах в соответствии с
этапами 0-3 можно записать следующим образом:

(

)

(

)

0. F out (t + 1) = F out (t ) r1 ' , r2 ' , r3 ' ,..., e j ,..., rn ' , t < t1;
1. F out (t + 1) = F out (t ) e1 , r2 ' , r3 ' ,..., e j ,..., rn ' , t1 ≤ t < t2;

(

)

(

)

2. F out (t + 1) = F out (t ) e1 , e2 , r3 ' ,..., e j ,..., rn ' , t2 ≤ t < t3;
3. F out (t + 1) = F out (t ) e1 , e2 , r3 ' ,..., r j ' ,..., rn ' , t ≥ t2.
Обозначим матрицы, на которые умножается вектор Fout(t),
через Pj, P1j, P12j и P12, соответственно. Для каждого из четырех
этапов входящий поток вычисляется по формуле:

261

F in (t + 1) = F out (t ) R' .
Из сказанного выше следует, что W вычисляется как первая
компонента вектора:
t2
 t2
W =  F in (t + 1) − F out (t + 1) =  F out (t ) R'− F out (t ) P1 j =
t =t1

t2

(

)

(

t =t1

(

)

)

=  F out (t ) R '− P1 j ;
t =t1

Матрица (R' – P1j) имеет два ненулевых столбца с номерами 1
и j.
Преобразуем это выражение далее, воспользовавшись
зависимостью
векторов
исходящего
потока
на
двух
последовательных тактах. В рамках второго этапа

F out (t + 1) = F out (t ) P1 j , следовательно, F out (t ) = F out (t1 )( P1 j ) t −t1
Тогда






W = F out (t1 )  ( P1 j ) t −t1 (R '− P1 j ).
t2

 t =t1




Вектор W имеет ненулевые компоненты с номерами 1 и j,

соответствующие аттрактору и источнику. W = W 1 .
Значения Wi для сети с l аттракторами (i = 1, …, l)
определяются аналогично. Количество промежуточных переходов
будет l + 1 – по одному на каждый аттрактор и один для источника.

( )

8.4. Предельное состояние сети при fsum(t)  T
Заметим, что значения Wi (i = 1, …, l) максимальны, когда ресурс в
начальном состоянии сосредоточен только в одной вершинеисточнике, т.е. асимметрия его распределения максимальна. При
других начальных состояниях W будут меньше. В предельном
случае W = 0. Так, например, эксперименты показывают, что если
во все вершины в начальном состоянии поместить ресурс, больший
предельного значения при W = T, то весь излишек будет
262

распределяться в пропорции, заданной матрицей R'absorb . Докажем,
что это верно для любой несимметричной регулярной сети.
Т е о р е м а 8.2. Пусть регулярная несимметричная ресурсная
сеть с l потенциальными аттракторами (l > 1) имеет суммарный
ресурс W > T, и начальное ее состояние Q(0) представимо в виде:
~
~
Q (0) = Q + Q (0) , где Q – предельное состояние при W = T, Q(0) –
произвольный неотрицательный вектор, задающий распределение
излишков ресурса W – T. Тогда предельное состояние представимо в
виде суммы двух векторов:

~
Q* = Q + Q(0) R'absorb .

(8.9)

Д о к а з а т е л ь с т в о. Когда в регулярной сети все
вершины имеют ресурс, не меньший соответствующей компоненты
~
вектора Q , поток в сети состоит из двух частей:
~
~
F out (t ) = F + F out (t ) , где стабильная компонента F равна
предельному потоку при любом ресурсе W > T, а нестабильная
компонента Fout(t), уменьшающаяся со временем, отвечает за
перераспределение излишков ресурса Q(t). Поскольку аттракторы
при W = T отдают по полной пропускной способности и больше
отдать уже не могут, то соответствующие им компоненты вектора
Fout(t) равны нулю – ресурс, соответствующий Q(t), в аттракторы
входит, но не может выйти. Таким образом, излишки
распределяются по закону:

 E O1 
'
'

=  '
Q(t+1) = Q(t) Rabsorb
, где Rabsorb
' .
 R1 R2 
В предельном состоянии:

E

Q* = Q(0) 
'
 E2 − R2

(

)

−1

'
1

R

O1 
'
 = Q(0) Rabsorb
.
O2 

(8.10)


263

8.5. Начальные состояния, не создающие поправку
Теорема 8.2 содержит достаточное условие того, что ресурс в
аттракторах распределится в той же пропорции, что и в стоках
соответствующей поглощающей сети. Однако в ней описан узкий
класс начальных состояний, приводящих к такому предельному
состоянию. Предельное состояние описывается формулой (8.9) для
еще одного класса начальных состояний. Если все источники в
начальном состоянии имеют ресурс, и его количество достаточно
велико, то накопления поправки Wi , i = 1, …, l, в аттракторах не
происходит. Это количество ресурса в источниках ограничено снизу
величинами необходимых минимальных излишков.
Пусть сеть имеет k источников с номерами l+1, …, l+k. Для
начального состояния Q(0), все источники в котором имеют
заведомо большой ресурс, поставим каждому источнику в
соответствие величину W j по формуле
W j =



i{1,...,l ,l + k +1,...,n}

d i (0)
riin−

r ji ,

(8.11)

где riin− – суммарная входная пропускная способность вершин из Z–
(0) по ребрам из вершин-источников, di(0) – дефициты всех вершин
из Z–(0): i = 1,…, l, l+k+1,…n.
W j
Величины
будем
называть
необходимыми
минимальными излишками. Обоснование формулы (8.11) дается в
следующей теореме.
Т е о р е м а 8.3. Пусть в регулярной несимметричной
ресурсной сети с l потенциальными аттракторами с номерами
1, …, l и k источниками с номерами l+1, …, l+k, начальное
состояние задано вектором:

Q(0) = (q1 (0), ..., ql (0), q~l +1 + Wl +1 + Ql +1 ,..., q~l +k + Wl +k + Ql +k ,...,q n (0)),
где величины W j (j = l+1, …, l+k) – необходимые минимальные
излишки в каждом источнике, определенные в (8.11), Q j  0 ,
j = l+1,…, l+k. Тогда предельное состояние представимо в виде:

264

~
Q* = Q + Q  R'absorb ,
где Q – вектор длины n с ненулевыми компонентами Q j
(j = l+1, …, l+k).
Д о к а з а т е л ь с т в о. Чтобы оценить количество ресурса,
которое должно находиться в каждом из источников, обратимся к
описанию смены правил вершинами в сети, данному в разделе 8.3.
Накопление величины поправки происходит, когда при
функционировании сети
случается асинхронный переход
–
аттракторов из зоны Z (t) в зону Z+(t): пока в аттракторах из Z+(t)
происходит накопление, аттракторы, находящиеся в Z–(t),
продолжают отдавать весь свой ресурс.
При достаточно больших ресурсах во всех источниках
аттракторы переходят на правило 1 одновременно (это следует из
свойства аттрактивности (глава 4)). Следовательно, накопления
поправки ресурса не происходит и W =0.
Найдем необходимые излишки для каждой вершиныисточника.
Для каждой вершины vi, которая в состоянии Q(0) имеет
дефицит ресурса, обозначим через riin− ее суммарную входную
пропускную способность из вершин-источников. Дефицит вершины
vi обозначим, как и прежде, di(0). Тогда, чтобы покрыть дефицит
~
каждой вершины до величины, соответствующей компоненте Q ,
источник vj должен отдать



d i ( 0)

r ji ресурса, где
riin−
i пробегает множество индексов вершин, имеющих дефицит в
начальном состоянии.
d i (0)
r ji .
Отсюда вытекает формула (8.11): W j =

in −
i{1,...,l ,l + k +1,...,n} ri
Соответствующая компонента вектора Q вычисляется по
формуле: Q j = q j (0) − q~ j − W j . 
i{1,...,l ,l + k +1,...,n}

Проиллюстрирует теорему примером, в котором предельное
состояние может быть получено из начального аналитически.
П р и м е р 8.6. Сеть задана матрицей (8.1) (и рис. 8.1). Пусть
ресурс W > T присутствует в двух источниках, причем, в каждом
источнике его достаточно много: Q(0) = (0, 0, 20, 40, 0). Тогда
265

предельное состояние для этой сети будет Q* = (20, 30, 3,(3), 3,(3),
3,(3)).
Опишем алгоритм нахождения Q*. Все его компоненты, кроме
~
двух первых, совпадают с компонентами вектора Q , Для расчета
первых двух компонент найдем дефициты вершин в начальном
состоянии и пропорцию восполнения этих дефицитов из обоих
источников, содержащих излишки ресурса. Каждый источник
1
3
5
должен отдать ресурс в нейтральную вершину в количестве 3 =
2 3
и в вершины-аттракторы по 5 единиц – чтобы они получили r1out и

r2out единиц ресурса. Итого каждый из двух источников должен
отдать

20
10
ресурса для насыщения сети и оставить себе 3,(3) =
.
3
3

W3, 4 =

10
20 ~
, q3, 4 =
3
3

10
20
–
= 20 – 10
3
3
= 10, в вершине v4 остается излишек Q4 = 40 – 10 = 30. Эти
излишки вершины должны распределить между аттракторами в
пропорциях, соответственно, 3:1 и 1:3 (рис. 8.4).

Излишек вершины v3 составит Q3 = 20 –

266

v3
Q3 = 10

v4
Q4 = 30

2,5
22,5

7,5

r1

v1
out=5

r2

7,5

v2
out=5

Рис. 8.4. Распределение излишков ресурса между аттракторами

Имеем: q1* = 5 + 7.5 + 7.5 = 20; q 2* = 5 + 2.5 + 22.5 = 30.
Эти значения соответствуют первым двум компонентам
вектора предельного состояния.

8.6. Оценка поправки W
Теоремы 8.2–8.3 описывают начальные состояния, при которых для
каждого из аттракторов Wi = 0. Своего максимума величины Wi
достигают, если ресурс в начальном состоянии сосредоточен в
одном источнике.
Т е о р е м а 8.4. Пусть в регулярной несимметричной
ресурсной сети с l потенциальными аттракторами (l ≥ 2),
имеющими номера 1, …, l, суммарный ресурс W > T + W j (0)

(W (0)  W )
j

в начальном состоянии находится в вершине-

источнике v j . Тогда предельное состояние представимо в виде:

~
Q* = Q + QR'absorb +(W1, W2, …, Wl, 0, …, 0),
267

l


где Q = Q(0) −  0,...,0,  Wi ,0,...,0  , ненулевая компонента имеет
i =1


номер j.
Причем для аттрактора с номером l0 = arg min r 'absorb jk
k

выполняется: Wl0 = 0 , а остальные значения Wi находятся по
формуле:

Wi =

(qi*

− ri

out

) − (ql*0

− rl0 )
out

'
rabsorb
ji
'
rabsorb
jl0

.

(8.12)

Д о к а з а т е л ь с т в о. Теорема 8.4. двойственна теореме
8.1. Вершина-аттрактор с номером l0 = arg min r 'absorb m0 j последней
j

из аттракторов перейдет на правило 1. Излишек Wi в каждом
аттракторе накапливается, пока хотя бы один аттрактор
функционирует по правилу 2. Таким образом, вершина, перешедшая
на правило 1 последней, не имеет излишка.
Формула (8.12) – следствие из теоремы 8.1. Когда все
аттракторы
функционируют
по
правилу
1,
ресурс
перераспределяется между ними в пропорции, задаваемой матрицей
R'absorb . Излишки в каждой вершине-аттракторе выражаются через
компоненту вектора предельного состояния, соответствующую
аттрактору, для которого Wl0 = 0 . 
Теорема объясняет результаты, полученные в примерах 8.2–
8.4. Пусть даны два вектора начальных состояний:

Q1 (0) = (q1 (0), q2 (0), ..., q~l +1 + Wl +1 ,..., q~l +k + Wl +k ,...,q n (0)) ,

Q2 (0) = (q1 (0), q2 (0), ..., q~l +1 + 2Wl +1 ,..., q~l +k + 2Wl +k ,...,q n (0)) ,
где Wi – любые заведомо большие величины (например, можно
считать, что Wi > T). Предельные состояния для них:

~
Q1* = Q + Q1 R'absorb +(W1, W2, …, Wl, 0, …, 0),
~
Q2* = Q + Q2 R'absorb +(W1, W2, …, Wl, 0, …, 0),
268

Разность между ними равна:

~
Q2* − Q1* = Q + (Q2 − Q1 ) R'absorb .
Таким образом, разность двух предельных состояний не
зависит от поправок в аттракторах.
Компоненты
вектора
предельного
состояния,
соответствующие потенциальным аттракторам, можно вычислить
через потоки.
Т е о р е м а 8.5. Пусть регулярная несимметричная ресурсная
сеть имеет потенциальные аттракторы с номерами 1, …, l. Пусть
суммарный ресурс W > T + W j (0) в начальном состоянии
находится в не-аттрактивных вершинах. Тогда для каждого из
потенциальных аттракторов выполнится соотношение:

 (outf iin (t ) − riout ) = qi* − riout

(8.13)

qi (t )ri

Д о к а з а т е л ь с т в о. Левая часть равенства (8.13)
характеризует ресурс, накопленный сверх суммарной выходной
пропускной способности вершины на протяжении всего
функционирования сети – каждое слагаемое равно разности
входного и выходного потоков, а это и есть предельная разность
qi* − riout . 
С л е д с т в и е 8.2. Если в начальном состоянии Q(0) ресурс
сосредоточен в одной неаттрактивной вершине, и его величина
W > T такова, что в предельном состоянии по крайней мере один из
потенциальный аттрактор имеет ресурс, равный своей суммарной
выходной пропускной способности: qm* = rmout , m  l, а при любом
его увеличении qm*  rmout , то для всех остальных аттракторов
выполнится:

 (outf iin (t ) − riout ) = Wi

.

qi (t )ri

Доказательство
формулы (8.13).

вытекает

непосредственно

из
269

Отсюда вытекает, что

Wi = qi* − riout .
П р и м е р 8.7. Пусть сеть задана матрицей (8.2), и суммарный
ресурс W = T + W1 = 27.2 в начальном состоянии находится в
вершине v3: Q(0) = (0, 0, 27,2, 0, 0). Предельное состояние для этой
сети будет Q* = (7.2, 5, 3.(3), 3.(3), 3.(3)).
W1 = 7.2 может быть найдена как сумма разностей двух
графиков в дискретных точках:
f(t)
9
8

7
6
5
4

f_in1(t)

3

f_out1(t)

2
1
0
1

2

3

4

5

6

7

8

t

Рис. 8.5. Разность входящего и исходящего потоков

Из рисунка видно, что вклад в величину Wi дают только
первые несколько тактов функционирования сети.

Комментарий к главе 8
Исследования регулярных сетей, проведенные в главах 3 и 4, не
были доведены до конца: не был рассмотрен случай двух и более
аттракторов в сети, т.е. вопрос о том, как в предельном состоянии
распределяется излишек ресурса W = W – T между несколькими
аттракторами. Это исследование было отложено до главы 8,
270

поскольку в нем используются результаты гл. 7 по поглощающим
сетям. Оказывается, что, когда в начальном состоянии весь ресурс
находится в источниках, поведение сети с несколькими
аттракторами удобно изучать с помощью соответствующей
поглощающей сети, которая получается из исходной регулярной
сети превращением аттракторов в стоки. Другими словами,
исходная матрица пропускных способностей R путем обнуления
строк, соответствующих аттракторам, превращается в матрицу Rabsorb поглощающей сети.
Для случая, когда в Q(0) весь ресурс находится в одном
источнике, картина полностью ясна. Для сети с двумя аттракторами
справедливо следующее: если излишек W меньше некоторой
величины W, называемой поправкой на регулярность, то он
целиком попадает в один из аттракторов: только этот аттрактор
функционирует по правилу 1. Если же W > W, то разность W −
W распределяется между аттракторами в той же пропорции, что и
между стоками в поглощающей сети, заданной матрицей Rabsorb. В
общем случае сети с l аттракторами при W > W аттракторы
переходят на правило 1 последовательно со своими поправками,
сумма которых равна W. Этот процесс в п. 8.3 описывается с
помощью
неоднородной
цепи
Маркова,
задаваемой
стохастическими матрицами R'(t), которые изменяются в моменты
перехода очередного аттрактора на правило 1.
Величина W зависит от начального состояния. Она
максимальна, когда в Q(0) весь ресурс находится в одном
источнике. Этот случай описывается теоремами 8.1, 8.4. С другой
стороны, существуют начальные состояния, при которых W = 0.
Они соответствуют более равномерному распределению ресурса в
Q(0) между неаттрактивными вершинами. Такие состояния описаны
в теоремах 8.2, 8.3.
Все результаты, полученные в главе, обобщаются на случай,
когда в начальном состоянии Q(0) ресурс находится не только в
источниках, но и в нейтральных вершинах, не являющихся
пассивными аттракторами.

271

СРАВНЕНИЕ РЕСУРСНЫХ СЕТЕЙ
С ДРУГИМИ ДИНАМИЧЕСКИМИ
СЕТЕВЫМИ МОДЕЛЯМИ
Потоковые модели. Ресурсная сеть является потоковой моделью, и
тем самым наследует основные понятия и терминологию,
используемую в этой области. Однако для известных потоковых
моделей, – как классических, так и их различных модификаций,
характерна определенная ориентация потока – от начальных узлов
(источников1) к целевым узлам (стокам). Кроме того, в этих
моделях, как правило, важное место занимают различные задачи
оптимизации потока, поскольку их основная установка –
планирование потока, т.е. решение проблем типа «как сделать,
чтобы…» В ресурсных сетях ориентации потока нет:
распространение ресурса происходит по всем направлениям
одновременно, и это делает ее гораздо ближе к моделям рассеяния
на графах, нежели к традиционным потоковым моделям. Кроме
того, как уже заметил читатель, задачи оптимизации потока в
предлагаемой теории в принципе не рассматриваются. Основная
установка здесь – исследование поведения ресурсной сети при
разных топологиях, распределениях пропускных способностей и
начальных состояниях, т.е. решение проблем типа «что будет,
если…»
Случайные блуждания и рассеяние на графах. Сеть, в
которой все вершины функционируют по правилу 2, как показано в
гл.3, описывается цепью Маркова. Однако при увеличении
суммарного ресурса наступает насыщение, и, по крайней мере, одна
вершина в сети начинает функционировать по правилу 1. С другой
стороны, доказано, что при любом, даже очень большом количестве
ресурса в определенном широком классе сетей все вершины никогда
не перейдут на правило 1. Наличие двух множеств вершин,
функционирующих по разным правилам, повышает выразительную
силу модели, но и затрудняет ее исследование. Предельное
состояние в таких сетях уже не всегда единственно. В некоторых
классах сетей оно зависит от начального состояния.
Функционирование сети начинает описываться неоднородной
Понятие «источник», используемое в модели Форда-Фалкерсона и в ее
последующих модификациях, не имеет отношения к одноименному понятию
источника, введенному в п.2.4 и активно используемому на протяжении всей
книги.
272
1

цепью Маркова. Для классов эйлеровых (гл.5) и поглощающих
сетей (гл.7) в этом случае оказалось возможным получить
аналитические результаты для предельных состояний. Однако для
некоторого подкласса несимметричных сетей существуют
начальные состояния, для которых предельное состояние в
выделенных вершинах можно предсказать лишь с некоторой
погрешностью; в остальных вершинах предельное количество
ресурса определяется однозначно и не зависит от начального
состояния (гл.8). Таким образом, когда хотя бы одна вершина сети
переходит на правило 1, аппарат однородных цепей Маркова
перестает описывать происходящие в этой сети процессы.
Игра выстреливания фишек. Если ресурсная сеть,
функционирующая по правилу 2, эквивалентна рассеянию на графе,
то вершины, функционирующие в сети по правилу 1, действуют
сходно с выстреливанием вершин в игре chip-firing. Однако
имеются и существенные отличия.
Первое отличие – уже упомянутое свойство ресурсной сети:
для всех не-эйлеровых сетей состояние, в котором все вершины
функционируют по правилу 1, является неустойчивым, и часть
вершин за конечное число тактов теряют ресурс и переходят на
правило 2.
Второе отличие: выстреливания в chip-firing games
последовательны. Последовательность в этих играх введена не
случайно: весь аппарат их исследования базируется на том, что
вершины выстреливают поочередно. В параллельном варианте chipfiring исследуются бесконечные периодические игры в терминах
длины периода игры и количества фишек, участвующих в
выстреливании. И это говорит еще о двух взаимосвязанных важных
отличиях.
Игра выстреливаний является целочисленной и пороговой.
Если вершина не накопила фишек для выстрела, она находится в
пассивном состоянии. В [77] упоминается возможность
рассмотрения вещественнозначной игры, названной ими mass-firing
game, в которой ребрам приписываются вещественные веса
(пропускные способности). Правила игры остаются теми же:
вершина может выстрелить, если и только если она накапливает
массу больше, чем суммарные веса исходящих ребер. Но далее
авторы отмечают, что при целых или рациональных пропускных
способностях игра сводится к chip-firing, а вещественнозначные
игры интересны лишь в случае исследования марковских цепей с
иррациональными
вероятностями
перехода.
В
основе
273

функционирования ресурсных сетей лежит совсем иное понимание
вещественнозначности. Ресурс является бесконечно делимым, и
каждая вершина отдает ресурс на каждом такте, каким бы его
количеством она ни обладала.
Такая формулировка позволяет моделировать непрерывные
пороговые процессы, для которых игры выстреливания
неприемлемы. Если, например, chip-firing хорошо моделирует
лавинообразные процессы, в которых масса должна достичь
некоторой критической отметки, прежде чем процесс начнется, то
ресурсные сети предназначены для моделирования непрерывных
явлений – их пороговость состоит не в отсутствии деятельности при
значениях ниже порога, а в смене правила функционирования. Так,
вода в резервуаре не задерживается, если она втекает и вытекает с
одинаковой скоростью, но стоит увеличить мощность входящего
потока, оставив прежним выходящий, как в резервуаре начинает
происходить накопление. Именно такие процессы соответствуют
распределению ресурса в ресурсной сети. Примером приложения
ресурсных сетей может служить модель распространения
загрязняющего вещества в водном пространстве [26].
Граф
ресурсной сети этой модели представляет собой регулярную
решетку. Поля течений в ней имитируются пропускными
способностями ребер, инерционность процесса – пропускными
способностями петель вершин. Подробное описание модели можно
найти в [26].

274

КРАТКОЕ РЕЗЮМЕ
ОСНОВНЫХ РЕЗУЛЬТАТОВ
Книга посвящена изложению новой динамической сетевой модели –
ресурсной сети. Основные задачи исследования этой модели,
которые решались в книге:
• Исследование динамики вектора состояния ресурсной
сети;
• Исследование динамики входящего и исходящего потоков
в вершинах, а также суммарного потока;
• Исследование сетей на сходимость (существование
предельного состояния и предельного потока);
• Исследование зависимости предельного состояния от
начального состояния;
• Описание векторов предельного состояния и потока и
выражение их через параметры сети (матрица пропускных
способностей R, количество ресурса W, начальное
состояние Q(0)).
В пп. 2.3, 2.4 предложена матричная классификация ресурсных
сетей по двум основаниям: по топологии, т.е. структуре графа сети,
и по пропускным способностям ее ребер. Сеть называется
эргодической, если ее граф сильно связен. Эргодическая сеть
называется регулярной, если НОД длин ее циклов равен единице.
Сеть называется d-циклической (или просто циклической), если НОД
длин ее циклов d больше единицы. Сеть называется поглощающей,
если она содержит стоки – вершины без выходящих ребер. Сеть
называется симметричной, если матрица ее пропускных
способностей симметрична; квазисимметричной, если для любой
вершины vi суммарная пропускная способность ее входящих ребер
равна суммарной пропускной способности ее выходящих ребер: riin
= riout ; несимметричной, если хотя бы для одной вершины vi
выполнено неравенство riin  riout .
Эта классификация определяет структуру книги: каждая глава
посвящена решению указанных выше задач для определенного
класса ресурсных сетей.
При описании динамики функционирования используется
разбиение вершин на зоны Z–(t) и Z+(t). Зона Z–(t) – это множество
вершин, которые в момент t функционируют по правилу 2 (отдается
весь
ресурс пропорционально пропускным способностям
275

выходящих ребер); вершины зоны Z+(t) в момент t функционируют
по правилу 1 (ресурс вершины превосходит суммарную пропускную
способность riout ее выходящих ребер, поэтому по выходящим
ребрам отдается «всё, что можно»; остаток ресурса остается
вершине).
Основные общие результаты исследования заключаются в
следующем.
1. Показано, что для всех классов ресурсных сетей, кроме
поглощающих сетей, существует пороговое значение Т
суммарного ресурса W. При малом ресурсе (W ≤ Т)
функционирование сети и ее предельное состояние
определяется соответствующей однородной цепью
Маркова, т.е. стохастической матрицей сети, которая
получается путем нормирования матрицы пропускных
способностей сети.
2. При большом ресурсе (W > T) существенную роль играет
классификация вершин. По соотношению входных и
выходных пропускных способностей все вершины делятся
на источники ( riout > riin ), приемники ( riout < riin ) и
нейтральные вершины ( riout = riin ). В зависимости от
структуры сети и начального состояния приемники и
нейтральные вершины могут оказаться аттракторами –
вершинами, которым в предельном состоянии достаются
все излишки W – T ресурса; остальные не получают ничего
сверх W = T: их состояния – такие же, как и при W = T.
Конкретные зависимости предельного состояния и потока от
параметров сети, а также конкретное значение порога T для разных
классов сетей различны и выглядят следующим образом.
Полные однородные сети (граф сети – полный, все
пропускные способности одинаковы и равны r, все n вершин
нейтральны).
Порог T равен суммарной пропускной способности ребер: T =
rsum = rn2. При малом ресурсе предельное состояние не зависит от
начального состояния: все вершины в конечном счете оказываются
в зоне Z–(t), в которой ресурс во всех вершинах одинаков.
W
Предельный поток в любом ребре равен 2 . При большом ресурсе
n
предельное состояние зависит от начального и описывается
теоремой 2.2 (формулы (2.6) – (2.9)).
276

Регулярные несимметричные сети (граф сильно связен,
существуют источники и приемники).
Порог Т < rsum, причем его величина зависит от соотношения
пропускных способностей сети. Это соотношение характеризуется
коэффициентом  симметричности сети (п.3.5): чем сильнее разница
в пропускных способностях вершин, тем меньше , т.е. тем дальше
Т от rsum.
Источники, начиная с некоторого t, навсегда переходят в Z–,
независимо от их начального состояния. Если в несимметричной
сети присутствует эйлерова компонента (см. раздел 3.3 главы 3), все
ее вершины являются пассивными аттракторами (они остаются в Z+,
только если они были в ней в начальном состоянии). Активными
аттракторами, т.е. вершинами, способными перейти из Z– в Z+*,
могут быть только приемники.
Предельное состояние и предельный поток существуют.
Величина порога T определяется теоремой 4.3 (формула (4.5)).
Значения компонент вектора предельного состояния для всех неаттракторов при любом ресурсе W > T и любом числе аттракторов
совпадают с их значениями при W = T и описываются теоремой 4.5
(формула (4.9)).
В сети с одним аттрактором предельное состояние при любом
значении суммарного ресурса не зависит от начального состояния.
Все излишки W – T ресурса в предельном состоянии достаются
единственному аттрактору. В сети с несколькими аттракторами
вопрос о распределении излишка W – T между аттракторами
исследован для случая, когда в начальном состоянии весь ресурс
находится в источниках или не-аттрактивных нейтральных
вершинах (см. комментарий к гл.8).
Предложен критерий аттрактивности вершин (теорема 4.4).
Матрица предельного потока описывается теоремой 4.1.
Величина суммарного предельного потока равна пороговому
значению T.
Регулярные
эйлеровы
сети
(сети
регулярны
и
квазисимметричны).
Все вершины нейтральны. Порог, как и в однородных сетях,
выражается формулой Т = rsum. Предельное состояние и предельный
поток существуют
~
При W = Т для вектора Q предельного состояния справедлива
~
формула Q = (r1out , r2out ,..., rnout ) . При W > T предельное состояние
277

зависит от начального состояния Q(0). Описан метод вычисления
предельного состояния через координаты Q(0).
Эргодические циклические сети.
Порог Т существует; предложена формула его вычисления.
При W < T предельное состояние существует, если и только
если в момент, когда все вершины оказались в зоне Z–(t), во всех
циклических классах содержится одинаковый ресурс. В остальных
случаях существует предельный цикл длины d, состоящий из
предельных векторов Q1* , ..., Qd* .
При W = T предельный поток и предельное состояние
существуют и единственны. Вектор предельного потока равен
вектору предельного состояния.
При W > T предельные состояние и поток существуют, причем
предельный поток единственен. Предельное состояние не зависит
от начального состояния в том и только в том случае, когда в сети
есть только один аттрактор.
Поглощающие сети.
Понятие порога теряет смысл: при любом ресурсе
поглощающие сети функционируют одинаково. Впрочем, его можно
считать равным 0. Предельное состояние в поглощающих сетях
существует и определяется формулой Q* = Q(0)R', где R' – предел
степеней стохастической матрицы R'. Весь ресурс в предельном
состоянии находится в стоках. Предельный поток состоит из потока
в петлях стоковых вершин. Если сеть не имеет петель, предельный
поток в ней равен 0.
В гл. 7, посвященной поглощающим сетям, рассматриваются
сети, в которых стоки являются единственными (и тривиальными)
эргодическими компонентами. В п. 2.3 отмечено, что к таким сетям
можно
свести
исследование
неэргодических
сетей
с
нетривиальными эргодическими компонентами.
Подводя итог, отметим, что в настоящей книге содержится
решение всех проблем, сформулированных в терминах базовых
понятий предложенной теории. Дальнейшие исследования,
посвященные описанию функционирования сетей с ограничениями
на ёмкость аттракторов, опубликованы в статьях [35, 36].

278

ЛИТЕРАТУРА
1.

2.

3.

4.

5.

6.
7.
8.
9.

10.

11.
12.

13.

Агаев Р.П., Чeботарев П.Ю. Матрица максимальных
исходящих лесов орграфа и ее применения // Автоматика и
телемеханика. – 2000. – № 9. – С. 15–43.
Агаев Р.П., Чeботарев П.Ю. Остовные леса орграфа и их
применение // Автоматика и телемеханика. – 2001. – № 3. –
С. 108–133.
Агаев Р.П., Чeботарев П.Ю. О нахождении собственного
проектора и компонент матрицы // Автоматика и
телемеханика. – 2002. – № 10. – С. 3–12.
Агаев Р.П., Чеботарев П.Ю. Сходимость и устойчивость в
задачах согласования характеристик (обзор базовых
результатов) / Управление большими системами. Специальный
выпуск 30.1 «Сетевые модели в управлении». – М.: ИПУ РАН,
2010. – С. 470–505.
Агаев Р.П., Чeботарев П.Ю. Метод проекции в задаче о
консенсусе
и
регуляризованный
предел
степеней
стохастической матрицы // Автоматика и телемеханика. – 2011.
– № 12. – С. 38–59.
Адельсон-Вельский Г.М., Диниц Е.А., Карзанов А.В.
Потоковые алгоритмы. – М.: Наука, 1975. – 119 с.
Барон С.А., Введение в теорию суммируемости рядов. –
2-е изд.. – Таллин, 1977. – 280 с.
Бурман Ю.М. Многочлен Татта и модель случайных кластеров,
Матем. просв., сер. 3, 11, – М.: МЦНМО, 2007. – С. 47–60.
Басангова Е.О., Ерусалимский Я.М. Смешанная достижимость
на частично ориентированных графах // Деп. в ВИНИТИ. –
1982. – № 5892-82.
Басангова Е.О.,
Ерусалимский Я.М.
Различные
виды
смешанной достижимости // Алгебра и дискретная математика.
Элиста, КГУ. – 1985. – С. 70–75.
Гантмахер Ф.Р. Теория матриц. – М.: Физматлит, 2004. – 560 с.
Губанов Д.А., Новиков Д.А., Чхартишвили А.Г. Социальные
сети. Модели информационного влияния, управления и
противоборства. – М.: Изд-во физико-математической
литературы, 2010. – 228 с.
Губанов Д.А., Новиков Д.А. Модели унифицированного
информационного управления в однородных социальных сетях
/ Управление большими системами. Специальный выпуск 30.1
279

14.

15.

16.

17.

18.

19.

20.

21.

22.

23.
24.

280

«Сетевые модели в управлении». – М.: ИПУ РАН, 2010. –
С. 722–742.
Ерзин А.И., Тахонов И.И. Задача поиска сбалансированного
потока // Сибирский журнал индустриальной математики. –
2006. – Т. IX, № 4 (28). – С. 50–63.
Ерзин А.И., Тахонов И.И. Равновесное распределение ресурсов
в сетевой модели // Сибирский журнал индустриальной
математики. – 2005. – Т. VIII, № 3(23). – С. 58–68.
Ерусалимский Я.М. Потоки в сетях с нестандартной
достижимостью // Известия вузов. Северо-Кавказский регион.
Ест. науки. – 2012. – № 1. – С. 5–7.
Ерусалимский Я.М. Общий метод решения задач о
достижимости на ориентированных графах // Известия ВУЗов.
Северо-Кавказский регион. Естественные науки. – 2000. – № 3.
– С. 62–63.
Ерусалимский Я.М., Петросян А.Г. Многопродуктовые потоки в
сетях с нестандартной достижимостью // Известия ВУЗов.
Северо-Кавказский регион. Естественные науки. Приложение. –
2005. – № 6. – С. 8–16.
Ерусалимский Я.М., Петросян А.Г. Случайные процессы в сетях
с биполярной магнитностью // Известия ВУЗов. СевероКавказский регион. Естественные науки. Приложение. – 2005. –
№ 11. – С. 10–16.
Ерусалимский Я.М., Скороходов В.А. Общий подход к
нестандартной достижимости на графах.// Известия вузов.
Сев.-Кавк. Регион. Естест. Науки. 2005, Спецвыпуск.
Псевдодифференциальные уравнения и некоторые проблемы
математической физики. — С. 64–67.
Ерусалимский Я.М., Скороходов В.А. Графы с вентильной
достижимостью. Марковские процессы и потоки в сетях //
Известия ВУЗов. Северо-Кавказский регион. Естественные
науки. – 2003. – № 2. – С. 3–5.
Ерусалимский Я.М., Скороходов В.А., Кузьминова М.В.,
Петросян А.Г. Графы с нестандартной достижимостью: задачи,
приложения. – Ростов н/Д.: Южный федеральный университет,
2009. – 195 c.
Ерусалимский Я.М., Водолазов Н.Н. Нестационарный поток в
сети // Вест. ДГТУ. – 2009. – Т. 9. – № 3. – C. 402–409.
Ерусалимский Я.М., Водолазов Н.Н. Максимальный всплеск в
сети и максимальный объём сети // Изв. ВУЗов. Северо-Кавказ.
регион. Естеств. науки. – 2010. – № 6. – C. 9–13.

25.

26.

27.

28.

29.

30.

31.

32.

33.

34.
35.

36.

37.

Жилякова Л.Ю. Несимметричные ресурсные сети. I. Процессы
стабилизации при малых ресурсах // Автоматика и
телемеханика. – 2011. – № 4. – С. 133–143.
Жилякова Л.Ю. Применение ресурсных сетей для
моделирования распространения веществ в водной среде //
Проблемы управления. – 2011. – № 2. – С. 46–51.
Жилякова Л.Ю. Полные несимметричные ресурсные сети.
Случай одного приемника // Изв. ВУЗов. Северо-Кавказ.
регион. Естеств. науки. – 2011. – № 4 (164). – С. 14–18.
Жилякова Л.Ю. Несимметричные ресурсные сети. II. Потоки
при больших ресурсах и их стабилизация // Автоматика и
телемеханика. – 2012. – № 6. – С. 103–118.
Жилякова Л.Ю. Несимметричные ресурсные сети. III.
Исследование предельных состояний // Автоматика и
телемеханика. – 2012. – № 7. – С. 67–77.
Жилякова Л.Ю. Исследование эйлеровых ресурсных сетей /
Управление большими системами. – Вып. 41. – М.: ИПУ РАН,
2013. – С. 28–50.
Жилякова Л.Ю. Эргодические циклические ресурсные сети. I.
Колебания и равновесные состояния при малых ресурсах /
Управление большими системами. – Вып. 43. – М.: ИПУ РАН,
2013. – С. 34–54.
Жилякова Л.Ю. Эргодические циклические ресурсные сети. II.
Большие ресурсы / Управление большими системами. –
Вып. 45. – М.: ИПУ РАН, 2013. – С. 6–29.
Жилякова Л.Ю. Управление предельными состояниями в
поглощающих ресурсных сетях // Проблемы управления. – 2013.
– № 3. – С. 51–59.
Жилякова Л.Ю. Графовые динамические модели и их свойства
// Автоматика и телемеханика. – 2015. – № 8. – С. 115 – 139.
Жилякова Л.Ю. Ресурсная сеть с ограничением на ёмкость
аттракторов // Управление большими системами. – Вып. 58. –
М.: ИПУ РАН, 2015. – С. 67–89.
Жилякова Л.Ю. Ресурсные сети с ограничениями на ёмкость
аттракторов. Формальные характеристики // Управление
большими системами. – Вып. 59. – М.: ИПУ РАН, 2016. –
С. 72–119.
Жилякова Л.Ю. Распределение ресурса между аттракторами в
регулярных несимметричных ресурсных сетях // Управление
большими системами. – Вып. 60. – М.: ИПУ РАН, 2016. – С. 82–
118.
281

38.
39.

40.

41.
42.

43.

44.

45.

46.

47.
48.

49.
50.
282

Кемени Дж., Снелл Дж. Конечные цепи Маркова. – М.: Наука,
1970. – 272 с.
Кочкаров
А.А.,
Салпагаров
М.Б.,
Кочкаров
Р.А.
Моделирование разрушения сложных систем с ациклической
структурой / Управление большими системами. – Вып. 17. –
М.: ИПУ РАН, 2007. – С. 103–120.
Кочкаров А.А., Салпагаров М.Б., Эльканова Л.М. Дискретная
модель структурного разрушения сложных систем // Проблемы
управления. – 2007. – № 5. – С. 21–26.
Кузнецов О.П. Однородные ресурсные сети. I. Полные графы //
Автоматика и телемеханика. – 2009. – № 11. – С. 136–147.
Кузнецов О.П., Жилякова Л.Ю. Двусторонние ресурсные сети –
новая потоковая модель // Доклады Академии Наук. – 2010. –
Т. 433, № 5. – С. 609–612.
Кузнецов О.П., Жилякова Л.Ю. Полные двусторонние
ресурсные сети с произвольными пропускными способностями
// Управление большими системами. Специальный выпуск 30.1
«Сетевые модели в управлении». – М.: ИПУ РАН, 2010. –
С. 640–664.
Кузьминова М.В. Ограниченные магнитные достижимости на
ориентированных графах // Известия ВУЗов. Северо-Кавказский
регион. Естественные науки. Приложение. – 2006. – № 6. –
С. 12–26.
Куссуль Н., Соколов А. Адаптивное обнаружение аномалий в
поведении пользователей компьютерных систем с помощью
марковских цепей переменного порядка. Ч. 2: Методы
обнаружения аномалий и результаты экспериментов //
Проблемы управления и информатики. – 2003. – № 4. – С. 83–
88.
Лазарев А.А., Гафаров Е.Р. Теория расписаний. Исследование
задач с отношениями предшествования и ресурсными
ограничениями: научное издание / М.: Вычислительный центр
им. А.А. Дородницына РАН. – 2007. – 80 с.
Ланкастер П. Теория матриц. – М.: Наука, 1982. – 272 с.
Ловас Л., Пламмер М. Прикладные задачи теории графов.
Теория паросочетаний в математике, физике, химии: Пер. с
англ. – М.: Мир, 1998. – 653 с.
Новиков Д.А. Сетевые структуры и организационные системы. –
М.: ИПУ РАН, 2003.
Петросян А.Г. Потоковая задача в многопродуктовых сетях с
нестандартной достижимостью // Современные проблемы

51.

52.

53.

54.
55.
56.
57.

58.
59.
60.
61.
62.

63.

64.

65.

математического моделирования. – Ростов н/Д., 2005. – C. 334–
340.
Петросян А.Г. Потоки в сетях с биполярной достижимостью //
Известия ВУЗов. Северо-Кавказский регион. Естественные
науки. Приложение. – 2006. – № 3. – С. 32–37.
Робертс Ф.С. Дискретные математические модели с
приложениями к социальным, биологическим и экологическим
задачам. – М.: Наука, 1986. – 496 с.
Романовский В.И. Дискретные цепи Маркова. – М.; Л.:
Государственное
издательство
научно-технической
литературы, 1949. – 436 с.
Свами М., Тхуласираман К. Графы, сети и алгоритмы: Пер. с
англ. – М.: Мир, 1984, – 454 с.
Севастьянов Б.А. Ветвящиеся процессы. – М.: Наука, 1971.
Седжвик Р. Фундаментальные алгоритмы на С++. Алгоритмы
на графах. – СПб.: ДиаСофтЮП, 2002. – 496 c.
Скороходов В.А. Графы с магнитной достижимостью.
Марковские процессы и потоки в сетях // деп. в ВИНИТИ,
2003, № 410-В2003
Фляйшнер Г. Эйлеровы графы и смежные вопросы: Пер. с
англ. – М.: Мир, 2002. – 176 с.
Форд Л.P., Фалкерсон Д.Р. Потоки в сетях: Пер. с англ. – М.:
Мир, 1996. – 334 с.
Фрэнк Г., Фриш И. Сети, связь и потоки: Пер. с англ. / Под ред.
Д.А. Поспелова. – М.: Связь, 1978. – 448 с.
Хорн Р., Джонсон Ч. Матричный анализ. – М.: Мир, 1989. –
655 с.
Чеботарев П.Ю., Агаев Р.П. Согласование характеристик в
многоагентных системах и спектры лапласовских матриц
орграфов // Автоматика и телемеханика. – 2009. – № 3. – С. 136–
151.
Чеботарев П.Ю., Агаев Р.П. Об асимптотике в моделях
консенсуса.
–
URL:
http://ubs.mtas.ru/bitrix/components/bitrix/forum.
interface/show_file.php?fid=7640
Aiello, W., Awerbuch, B., Maggs, B. and Rao, S. Approximate load
balancing on dynamic and asynchronous networks, Proc. 25th
ACM Symp. of Theory of Computing. 1993. P. 632–634.
Ahuja, R.K., Magnanti, T.L., Orlin, J.B. Network Flows: Theory,
Algorithms, and Applications. Prentice Hall, United States, 1993.
283

66.

67.

68.

69.

70.
71.
72.
73.
74.

75.
76.
77.
78.

79.
80.

81.
284

Aldous, D.J. Lower bounds for covering times for reversible Markov chains and random walks on graphs. J. Theoret. Probab. 2, no.
1. 1989. P. 91–100.
Aleliunas, R., Karp, R.M., Lipton, R.J., Lovász L., and C.W.
Rackoff. Random walks, universal travelling sequences, and the
complexity of maze problem // Proc. 20th Ann. Symp. on Foundations of Computer Science. P. 218–223, 1979.
Anderson, R.J., Lovász L., Shor, P.W., Spencer, J., Tardos, E. and
Winograd, S. Disks, balls, and walls: analysis of a combinatorial
game // Amer. Math. Monthly 96. 1989. pp. 481–493.
Bak, P. How Nature Works: The Science of Self-Organized Criticality. New York: Copernicus. 1996. (Рус. пер.: Как работает
природа: Теория самоорганизованной критичности. – М.:
УРСС: Либроком, 2013. – 276 с.)
Bak, P., Tang, C. and Wiesenfeld, K. Self-organized criticality,
Physical Review A 38. 1988, P. 364–374.
Bak, P., Chen K. Self-organized criticality. Scientific American
264, January 1991 issue. P. 46–53.
Barabási A.-L., Albert R. Emergence of scaling in random networks / Science. 1999. V. 286. No. 5439. P. 509–512.
Bayer, D. and Diaconis, P. Trailing the dovetail shuffle to its lair.
Ann. Appl. Probab. 2. 1992, P. 294–313.
Biggs, N.L. Chip-Firing and the Critical Group of a Graph // Journal of Algebraic Combinatorics 9 (1999), pp. 25–45. Kluwer Academic Publishers. Netherlands. 1999.
Biggs, N. The Tutte-polynomial as a growth function // J. Algebraic
Combinatorics 10. 1999, pp. 115–133.
Björner, A., Lovász L., and Shor, P. Chip-firing games on graphs //
Europ. J. Comb. 12 (1991), 283–291.
Björner, A. and Lovász L. Chip-firing games on directed graphs, J.
Algebraic Combinatorics 1. 1992, pp. 305–328.
Blanchard, Ph., Volchenkov, D. Random Walks and Diffusions on
Graphs and Databases: An Introduction (Springer Series in Synergetics). Springer-Verlag – Berlin–Heidelberg. 2011.
Brin, S., Page, L. The PageRank Citation Ranking: Bringing Order to
the Web. URL: http://infolab.stanford.edu/~backrub/pageranksub.ps
Chebotarev P., Agaev R. Forest matrices around the Laplacian matrix // Linear Algebra and its Applications. – 2002. – Vol. 356. – P.
253–274.
Chung, F., Ellis, R. A chip-firing game and Dirichlet eigenvalues //
Discrete Math. 257. 2002. pp. 341–355.

82.
83.
84.

85.
86.
87.

88.

89.
90.
91.
92.

93.

94.
95.
96.
97.

Chung, F. Laplacians and the Cheeger inequality for directed
graphs. Ann. Comb. 9, 1. 2005.
Cori, R. and Rossin, D. On the sandpile group of dual graphs // Europ. J. Comb. 21. 2000, pp. 447–459.
Dasgupta, K., Singh, R., Viswanathan, B., Chakraborty, D.,
Mukherjea, S., Nanavati, A.A. Social Ties and their Relevance to
Churn in Mobile Telecom Networks // Proceedings of the 11th international conference on Extending database technology EDBT'08:
Advances in database technology ACM New York, NY, USA.
2008.
De Groot M.H. Reaching a Consensus // J. Amer. Statist. Assoc. –
1974. – Vol. 69, No. 345. – P. 118–121.
Dhar, D. Self-organized critical state of sandpile automaton models,
Physical Review Letters 64. 1990, P. 1613–1616.
Dhar, D. The abelian sandpile and related models // Physica A: Statistical Mechanics and its Applications. Volume 263, Issues 1–4, 1
February 1999, pp. 4–25.
Dhar, D., Sadhu, T., Chandra, S. Pattern formation in growing
sandpiles // Euro. Phys. Lett. Volume 85, Number 4, 48002. 2009.
arXiv:0808.1732 [cond-mat.stat-mech]
Dhar, D., Ruelle, P., Sen, S., Verma, D.-N. Algebraic Aspects of
Abelian Sandpile Models. 1994. arXiv:cond-mat/9408020
Engel, A. The probabilistic abacus, Educ. Stud. in Math. 6. 1975.
pp. 1–22.
Engel, A. Why does the probabilistic abacus work? Educ. Stud. in
Math. 7. 1976. pp. 59–69.
Fleischer, L., Skutella, M. Minimum Cost Flows Over Time without Intermediate Storage. // Proc. 35th ACM/SIAM Symp. on Discrete Algorithms (SODA), Baltimore, MD, January 2003, pp. 66–
75.
Hajnal J. The ergodic properties of non-homogeneous finite Markov chains // Proc. Cambridge Philos. Soc. – 1956. – Vol. 52. – P.
67–77.
Hajnal J. Weak ergodicity in non-homogeneous Markov chains //
Proc. Cambridge Philos. Soc. – 1958. – Vol. 54. – P. 233–246.
Hu, T.C. Multy-commodity network flows. – J. ORSA, 1963.
№ 11 (3). P. 344–360.
Ivashkevich, E.V., Priezzhev, V.B., Introduction to the sandpile
model. Physica A 254, 97–116. 1998.
Kuznetsov, O.P., Zhilyakova, L.Yu. Flows and Limit States in Bidirectional Resource Networks// Preprints of the 18th IFAC World
285

98.

99.
100.
101.

102.

103.

104.

105.

106.
107.
108.
109.
110.
111.

286

Congress. Milano (Italy) August 28 – September 2, 2011,
pp. 14031–14035
Kuznetsov, O.P., Zhilyakova, L.Yu. Nonsymmetric resource networks. The study of limit states // Management and Production Engineering Review. Volume 2, Number 3, September 2011, pp. 33–
39.
Lancaster P., Tismenetsky M. The Theory of Matrices, 2nd ed.
New York: Academic Press, 1985.
Lopez, C.M. Chip firing and the Tutte polynomial // Annals of
Combinatorics, 1. 1997. pp. 253–259.
Lovász, L. and Winkler, P. Mixing of Random Walks and Other
Diffusions on a Graph // Surveys in Combinatorics, 1995 (ed.
P. Rowlinson), London Math. Soc. Lecture Notes Series 218, Cambridge Univ. Press. pp. 119–154.
Maes, C., Redig, F., and Saada, E., The Abelian sandpile model on
an infinite tree // Ann. Probab. Volume 30, Number 4 (2002),
2081–2107.
Maes, C., Redig, F., and Saada, E., Abelian Sandpile Models in
Inﬁnite Volume. March, 2005. 24 p. URL: http://www.
academia.edu/2491250/Abelian_sandpile_models_in_infinite_volume
Maes, C., Redig, F., Saada E., The inﬁnite volume limit of dissipative abelian sandpiles, Commun. Math. Phys. 244, No. 2, 395–417.
2004.
Meester, R., Redig, F., and Znamenski, D. The Abelian sandpile; a
mathematical
introduction.
2008.
20
p.
URL:
http://www.cs.vu.nl/~rmeester/onderwijs/introduction_spatial_mod
els/sandpile2.pdf
Meshbahi M., Egerstedt M. Graph Theoretic Methods in Multiagent
Networks. Princeton, NJ: Princeton University Press, 2010.
Meyer, C.D., Jr., Limits and the Index of a Square Matrix, SIAM J.
Applied Math., 1974, vol. 26, pp. 469–478.
Meyn, S., Tweedie, R. L. Markov Chains and Stochastic Stability.
Cambridge University Press. 2009. 594 p.
Norris, J. R. Markov Chains. Cambridge University Press. 1998.
237 p.
Priezzhev, V.B., Structure of two-dimensional sandpile. I. Height
probabilities. Journal of Stat. Phys. 74, 955–979 (1994).
Prisner, E. Parallel Chip Firing on Digraphs // Complex Systems 8.
1994. pp. 367–383.

112. Redig, F., Mathematical aspects of the abelian sandpile model.
June, 2005. 60 p. URL: http://www.math.leidenuniv.nl/~redig/
sandpilelectures.pdf
113. Ren W., Cao Y., Distributed Coordination of Multi-agent Networks: Emergent Problems, Models, and Issues. London: Springer,
2011.
114. Rothblum, U.G. Computation of the eigenprojection of a nonnegative matrix at its spectral radius // Stochastic Systems: Modeling,
Identification and Optimization II, ser. Mathematical Programming
Study, R.J.-B. Wets, ed. Amsterdam: North-Holland. – 1976. –
Vol. 6. – P. 188–201.
115. Seneta, E. Non-negative Matrices and Markov Chains. Springer.
2006. –279 p.
116. Speer, E. R. Asymmetric abelian sandpile models // Journal of Statistical Physics. April 1993, Volume 71, Issue 1-2, pp. 61–74.
117. Spencer, J. Balancing vectors in the max norm. Combinatorica,
v. 6. 1986, pp. 55–66.
118. Turcotte, D.L., Self-Organized Criticality, Rep. Prog. Phys. 62,
pp. 1377–1429. 1999.
119. Volchenkov D., Volchenkova L., Blanchard P. Epidemic spreading
in a variety of scale free networks. // Physical Review E 66,
046137. – 2002.
120. Watts D.J., Strogatz S.H. Collective dynamics of 'small-world' networks // Nature. 1998. V. 393. No. 6684. P. 440–442.
121. Ye, N. A Markov chain model of temporal behavior for anomaly
detection // Proceedings of the 2000 IEEE Workshop on Information Assurance and Security United States Military Academy,
West Point, NY, 6-7 June, 2000. P. 171–174.

287

ПРЕДМЕТНЫЙ УКАЗАТЕЛЬ
Аттрактор 3.6
— активный
— пассивный
— потенциальный 3.6
Вершина
— источник 2.4
— приемник 2.4
— нейтральная 2.4
— стоковая 2.3
Зона Z–(t) 2.1
Зона Z+(t) 2.1
Компонента (сети) переходная 2.3
— эйлерова 3.3
— эргодическая 2.3
Коэффициент симметричности 3.5
Пропускная способность
Пропускных способностей матрица
Ресурса
— дефицит 2.2
— пороговое значение Комментарий к гл.2, п. 3.4
— поток 2.1
— профицит 2.2
— суммарное значение
Ресурсная сеть 2.1
— квазисимметричная 2.4
— однородная 2.2
— поглощающая 2.3
— регулярная 2.3
— симметричная 2.4
— циклическая 2.3
— эйлерова 2.4
— эргодическая 2.3
Состояние сети 2.1
— предельное 2.1
— равновесное 6.1
— устойчивое 2.1
Функционирование сети
— правило 1
— правило 2
Циклический класс гл.6 (начало)

288

СПИСОК ОСНОВНЫХ ОБОЗНАЧЕНИЙ
R – матрица пропускных способностей сети

riin , riout – суммарные входная и выходная пропускные способности
вершины – суммы i–го столбца и i–й строки матрицы R,
соответственно
rsum – суммарная пропускная способность сети
R' – стохастическая матрица, соответствующая матрице пропускных
способностей R (матрица R, нормированная по строкам)
W – суммарное значение ресурса в сети
Т – пороговое значение ресурса
Q(t) – вектор состояния сети в момент t
Q* – вектор предельного состояния
Q1* – вектор предельного состояния при W = 1
~
Q – вектор предельного состояния при W = Т
F(t) – матрица потока в сети на такте t
Fin(t), Fout(t) – векторы суммарных входного и выходного потоков в
вершинах
fsum(t) – суммарный поток в сети
Fin*, Fout* – векторы соответствующих предельных потоков
~
~
F in , F out – векторы предельных потоков при W = Т
Z–(t) – множество вершин vi, имеющих в момент времени t ресурс,
out

не превосходящий ri (имеющих дефицит ресурса)
Z+(t) – множество вершин vi, имеющих в момент времени t ресурс,
out

превосходящий ri (имеющих профицит ресурса)
D(t), C(t) – векторы дефицитов и профицитов ресурса в вершинах
сети
~
C m – критические значения профицитов вершин эйлеровых сетей
 – кортеж, характеризующий вершины сети по соотношению
суммарных входных и выходных пропускных способностей
 – коэффициент симметричности сети
W – поправка на регулярность в несимметричной регулярной сети с
несколькими аттракторами

289

Оглавление
ВВЕДЕНИЕ ............................................................................ 3
ГЛАВА 1. ОБЗОР ГРАФОВЫХ ДИНАМИЧЕСКИХ
МОДЕЛЕЙ ............................................................................. 6
1.1. Потоковые модели ......................................................................... 8
1.1.1.
1.1.2.
1.1.3.
1.1.4.

Классические потоковые модели ................................................ 8
Потоки в сетях с нестандартной достижимостью ................... 14
Задачи, сводящиеся к статическим потоковым моделям ........ 20
Динамические задачи. Потоки во времени (flow over time) ... 21

1.2. Случайные блуждания и рассеяние на графах.......................... 22
1.2.1. Области применения моделей случайного блуждания
и рассеяния на графах................................................................. 22
1.2.2. Конечные цепи Маркова и их классификация ......................... 24
1.2.3. Графы перехода конечных цепей Маркова .............................. 26
1.2.4. Дискретная модель достижения консенсуса ............................ 28
1.2.5. Неоднородные цепи Маркова .................................................... 31

1.3. Целочисленные пороговые модели ............................................ 32
1.3.1. Chip-firing game ........................................................................... 32
1.3.2. Вероятностный абак.................................................................... 35
1.3.3. Некоторые результаты для chip-firing game ............................. 37
1.3.4. Модель «абелева куча песка»..................................................... 40
1.3.5. Графовая интерпретация «абелевой кучи» и chip-firing game 41

Комментарий к главе 1 ......................................................................... 42

ГЛАВА 2. РЕСУРСНАЯ СЕТЬ –
ПРЕДВАРИТЕЛЬНОЕ ЗНАКОМСТВО ........................ 44
Основные определения ............................................................... 44
Полные однородные ресурсные сети ......................................... 46
Классификация ресурсных сетей по топологии ....................... 61
Классификация ресурсных сетей
по пропускным способностям .................................................... 63
Комментарий к главе 2 ......................................................................... 68
2.1.
2.2.
2.3.
2.4.

ГЛАВА 3. РЕГУЛЯРНЫЕ СЕТИ –
ФУНКЦИОНИРОВАНИЕ ПРИ МАЛЫХ
РЕСУРСАХ. СТРУКТУРНЫЕ СВОЙСТВА
НЕСИММЕТРИЧНЫХ СЕТЕЙ ...................................... 70
3.1. Предельное состояние регулярной сети
при единичном ресурсе ............................................................... 71
3.2. Предельное состояние регулярной сети при малых ресурсах .... 73
290

3.3.
3.4.
3.5.
3.6.

Регулярные несимметричные сети и их свойства .................... 75
Пороговое значение Т ................................................................. 85
Коэффициент симметричности сети .......................................... 86
Аттракторы и их классификация ............................................... 88
3.6.1. Определение потенциальных аттракторов ............................... 88
3.6.2. Классификация аттракторов ...................................................... 96
3.6.3. Признаки аттрактивности вершины .......................................... 96

Комментарий к главе 3 ....................................................................... 101

ГЛАВА 4. ПОТОКИ И ПРЕДЕЛЬНЫЕ СОСТОЯНИЯ
В РЕГУЛЯРНЫХ НЕСИММЕТРИЧНЫХ СЕТЯХ ... 103
4.1. Поток ресурса............................................................................. 103
4.1.1. Поток при малых ресурсах....................................................... 104
4.1.2. Поток при больших ресурсах................................................... 104

4.2. Семейство сетей, соответствующих одной стохастической
матрице ....................................................................................... 116
4.2.1. Матрицы с большей выходной пропускной
способностью вершин-источников ......................................... 118
4.2.2. Матрицы с большей выходной пропускной
способностью вершин-приемников ........................................ 119
4.2.3. Смена сетью вершины-приемника .......................................... 121

4.3. Вектор Q1* и пороговое значение Т ......................................... 123
4.4. Свойство аттрактивности и предельное состояние сети ....... 124
4.5. Построение матрицы R с произвольным количеством
аттракторов по заданной матрице R'........................................ 128
4.6. Оценка числа сетей с неединственным аттрактором ............. 131
4.7. Полная сеть с одним приемником и одним источником ....... 132
Комментарий к главе 4 ....................................................................... 134

ГЛАВА 5. РЕГУЛЯРНЫЕ ЭЙЛЕРОВЫ СЕТИ.......... 136
5.1. Существование предельного состояния
и пороговое значение Т ............................................................. 137
5.2. Свойства эйлеровых сетей ........................................................ 139
5.3. Предельное состояние сети при единичном
и малом ресурсе ......................................................................... 140
5.4. Функционирование сети при больших ресурсах .................... 143
5.5. Предельные состояния и потоки при больших ресурсах....... 145
5.5.1. Предельное состояние сети при неизменной зоне Z+(t) ........ 145
5.5.2. Предельное состояние эйлеровой сети. Общий случай ........ 148
5.5.3. Предельные потоки при больших ресурсах и задача

~m

нахождения вектора C – случай отсутствия ресурса
в зоне Z–(0) ................................................................................. 151
291

~m

5.5.4. Задача нахождения вектора C – случай стационарной
зоны Z+(t).................................................................................... 157

~m

5.5.5. Задача нахождения вектора C

– общий случай.................. 161

Комментарий к главе 5 ....................................................................... 171

ГЛАВА 6. ЭРГОДИЧЕСКИЕ
ЦИКЛИЧЕСКИЕ СЕТИ.................................................. 173
6.1. Элементарные циклы и их свойства ........................................ 176
6.2. Функционирование произвольных циклических сетей
при малых ресурсах ................................................................... 193
6.2.1. Функционирование циклической сети
при единичном ресурсе ............................................................ 194
6.2.2. Предельные векторы и циклы d-циклической сети ............... 198
6.2.3. Достижение глобального равновесия при малых ресурсах .. 202

6.3. Пороговое значение Т и функционирование
циклических сетей при больших ресурсах .............................. 208
6.3.1. Пороговое значение Т ............................................................... 208
6.3.2. Критерий аттрактивности и потенциальные аттракторы ...... 210
6.3.3. Предельное состояние и предельный поток при больших
ресурсах ..................................................................................... 212

Комментарий к главе 6 ....................................................................... 215

ГЛАВА 7. ПОГЛОЩАЮЩИЕ СЕТИ .......................... 218
7.1. Свойства поглощающих ресурсных сетей .............................. 218
7.2. Поглощающие сети с единственным
предельным состоянием ............................................................ 223
7.3. Поглощающие сети общего вида. Пороговое значение Т ..... 227
7.4. Предельные состояния в поглощающих сетях ....................... 230
7.4.1. Матрица R' и ее свойства ........................................................ 230
7.4.2. Вектор предельного состояния и его свойства ...................... 234
7.4.3. Нелинейное изменение промежуточных состояний.............. 237

Комментарий к главе 7 ....................................................................... 241

ГЛАВА 8. РАСПРЕДЕЛЕНИЕ РЕСУРСА
МЕЖДУ АТТРАКТОРАМИ В РЕГУЛЯРНЫХ
НЕСИММЕТРИЧНЫХ СЕТЯХ ПРИ БОЛЬШИХ
РЕСУРСАХ ........................................................................ 242
8.1. Поглощающая сеть, соответствующая несимметричной,
и поправка на регулярность W................................................ 244
8.2. Зависимость W от выходных пропускных способностей
аттракторов ................................................................................. 257
292

8.3. Неоднородная цепь Маркова, динамика стохастических
матриц и вычисление W .......................................................... 259
8.4. Предельное состояние сети при fsum(t)  T .............................. 262
8.5. Начальные состояния, не создающие поправку ........................ 264
8.6. Оценка поправки W ................................................................. 267
Комментарий к главе 8 ....................................................................... 270

СРАВНЕНИЕ РЕСУРСНЫХ СЕТЕЙ С ДРУГИМИ
ДИНАМИЧЕСКИМИ СЕТЕВЫМИ МОДЕЛЯМИ ... 272
КРАТКОЕ РЕЗЮМЕ
ОСНОВНЫХ РЕЗУЛЬТАТОВ ....................................... 275
ЛИТЕРАТУРА ................................................................... 279
ПРЕДМЕТНЫЙ УКАЗАТЕЛЬ ...................................... 288
СПИСОК ОСНОВНЫХ ОБОЗНАЧЕНИЙ ................. 289

293

